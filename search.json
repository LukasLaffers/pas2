[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Pravdepodobnosť a štatistika 2",
    "section": "",
    "text": "O tomto kurze\n\nTento kurz má ambíciu priblížiť pravdepodobnosť a štatistiku praktickým spôsobom. A teda najmä s použitím softvéru.\nŠtudenti by mali byť familiárni s nasledujúcimi pojmami:\n\nPravdepodobnosť\nPodmienená pravdepodobnosť, nezávislosť udalostí.\nDiskrétne rozdelenia náhodných premenných - popis náhodnosti pomocou pravdepodobnostnej funkcie a kumulatívnej distribučnej funkcie.\nSpojité rozdelenia náhodných premenných - popis nahodnosti pomocou funkcie hustoty a kumulatívnej distribučnej funkcie.\nCharakteristiky náhodných premenných - stredná hodnota, variancia, kovariancia.\nNezávislosť náhodných premenných a súvis náhodných premenných - kovariancia a korelácia.\nZákon veľkých čísel\nCentrálna limitná veta\n\nK týmto pojmom sa budeme vracať a budeme ich hlbšie spoznávať s použitím softvéru R. Ak si ich potrebujete osviežiť, môžete tak urobiť napríklad na tomto odkaze: https://lukaslaffers.github.io/pas1/\n \nTu je prehľad kurzu. Veci, s ktorými by ste sa mali počas semestra sfamiliarizovať ako aj budúce získané (snáď) kompetencie.\n\nZáklady štatistického prostredia R, práca s rôznymi dátovými štruktúrami. Cykly, usporiadanie, podmienené príkazy.\nPráca s dátovými súbormi, skripty, knižnice, úvod do zobrazovania dát.\nPravdepodobnostné distribúcie - diskrétne a spojité. Ich vlastnosti a použitie.\nDeskriptívne štatistiky a vizualizácia dát. Rôzne typy grafov - ich použitie, výhody a nevýhody.\nÚvod do štatického testovania hypotéz.\nTestovanie štatistických hypotéz v R, jedno a dvoj-výberové testy, parametrické a neparametrické testy.\nÚvod do lineárnej regresie. Geometria úlohy najmenších štvorcov.\nLineárna regresia v R, použitie, užitočnosť a limitácie.\nAplikácie (nielen) v pedagogickej praxi. Kvantitatívny vedecký výskum.\n\n \nKým doteraz ste sa na pravdepodobnosť a štatistiku pozerali najmä teoreticky - spoznávali charakter matematických objektov, s ktorými sa v štatistike pracuje - teraz bude zreteľ kladený najmä na praktickú stránku, teda ako tieto poznatky aplikovať v praxi - teda ako veci robiť.",
    "crumbs": [
      "O tomto kurze"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Úvod do jazyka R",
    "section": "",
    "text": "1.1 R\nAplikovaná štatistika sa dnes robí na počítači. Existuje mnoho rôznych softvérov, ktoré môžete používať. My budeme používať jazyk R, ktorý má mnohé výhody.\nExistuje neskutočné množstvo tutoriálov a veľmi kvalitných materiálov, ktoré sú vhodné na oboznámenie sa s R. Tu sú odkazy na niektoré z nich, ktoré považujem sa obzvlášť dobré.\nKvalitné materiály sú v angličtine. Tak to skrátka je a neznalosť angličtiny výrazne znepríjemňuje, skoro až znemožnuje efektívnu prácu.\nTakto vyzerá program RStudio, to je akoby obal, ktorý nám umožňuje efektívne a pohodlne pracovať s jazykom R.\nAko vyzerá program RStudio.\nJednotlivé bloky sa dajú preusporiadať podľa preferencií používateľa. Treba si stiahnuť a nainštalovať Rko. To má však len jednoduché používateľné rozhranie (tomuto zvykneme hovoriť aj user interface). Nadstavbou nad obyčajným Rkovým prehliadačom je RStudio, ktoré je komerčný produkt, jeho desktop verzia (pre naše potreby úplne postačujúca) je však zadarmo.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "intro.html#r",
    "href": "intro.html#r",
    "title": "1  Úvod do jazyka R",
    "section": "",
    "text": "Rafael Irizarry: Data science in R https://rafalab.github.io/dsbook/data.html\nW. N. Venables, D. M. Smith and the R Core Team. “An Introduction to R” https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf\nWickham, Hadley, and Garrett Grolemund. R for data science: import, tidy, transform, visualize, and model data. ” O’Reilly Media, Inc.”, 2016. https://r4ds.had.co.nz\nGrant McDermott: Intro to Data Science https://github.com/uo-ec607/lectures\nKyle Butts: Intro to T https://introductory-r-workbook.netlify.app",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "intro.html#nejaké-príklady-r",
    "href": "intro.html#nejaké-príklady-r",
    "title": "1  Úvod do jazyka R",
    "section": "1.2 Nejaké príklady R",
    "text": "1.2 Nejaké príklady R\nTu sú nejaké príklady aplikácií, ktoré sa dajú v R robiť. Možností je naozaj veľmi veľa.\n\n\n\n\n\nVizualizácia regresného stromu v výskume, kde sa skúmala súvislosť biodiverzity s rôznymi faktormi.\n\n\n\n\n\n\n\n\n\nKorelačná matica rôznych faktorov pacientov v štúdii vzťahu adherencie k nutričným suplementom ku prežívaniu pacientov.\n\n\n\n\n\n\n\n\n\nVplyv opatrení na mobilitu počas začiatku obmedzenia pohyby počas COVID-éry v 2020.\n\n\n\n\n\n\n\n\n\nVývoj epidémie (príjmy v nemocniciach) COVID-19 na Slovensku.\n\n\n\n\n\n\n\n\n\nVizualizácia zmeny mobilít v rôznych európskych krajinách.\n\n\n\n\n\n\n\n\n\nKvantifikácia štatistickej neistoty spoľahlivosti relátok pomocou simulácie.\n\n\n\n\n\n\n\n\n\nKreslenie máp v prostredí R je priamočiare.\n\n\n\n\n\n\n\n\n\nDynamická webstránka prezentujúca výsledky štatistického modelu prežívania na základe metódy náhodného lesa. Porovnáva sa úmrtnostná krivka dvoch pacientov vo všetkých rizikových faktoroch rovnakých okrem veku. (diplomová práca Simony Zemanovej)\n\n\n\n\n\n\n\n\n\nDynamická webstránka prezentujúca výsledky parlamentných volieb (https://samuell.shinyapps.io/NRSR2016/ autor Samuel Hudec)\n\n\n\n\n\n\n\n\n\nDynamická webstránka ukazujúca podiely publikácií vysokých škôl v “predátorských” časopisoch. (https://samuell.shinyapps.io/publications/ autor Samuel Hudec)\n\n\n\n\n\n\n\n\n\nDistribúcia utečencov z Ukrajiny. (https://smikula.shinyapps.io/uarefugees/ autor Štěpán Mikula)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "intro.html#nevýhody-r",
    "href": "intro.html#nevýhody-r",
    "title": "1  Úvod do jazyka R",
    "section": "1.3 Nevýhody R",
    "text": "1.3 Nevýhody R\nNevýhodou Rka je ťažký začiatok. Chvíľu trvá kým si človek zvykne na používanie, toto je špeciálne pravdivé pre ľudí, ktorí majú len málo skúseností s programovaním v nejakom inom jazyku.\nPre obrovské úlohy nemusí byť efektívny. Preto sa častokrát používa Rko na vytvorenie prototypu a keď treba problém aplikovať na obrovské dáta (škálovať) alebo nás zaujíma rýchlosť, tak iné programovacie jazyky môžu byť preferované.\nDôležitou vlastnosťou Rka je, že mnoho knižníc-programov je vytvorených nadšencami, a to zadarmo. Tieto sú častokrát rôznej kvality. Tie isté veci sa dajú robiť rôznymi spôsobmi - tie majú svoje výhody aj nevýhody.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "intro.html#a-čo-teraz.",
    "href": "intro.html#a-čo-teraz.",
    "title": "1  Úvod do jazyka R",
    "section": "1.4 A čo teraz.",
    "text": "1.4 A čo teraz.\nNeexistuje žiaden zázračný tutoriál, ktorý je rádovo oveľa lepší ako iné. Čo je nutné, je dať tomu čas. Skúšať veci, vymýšľať nové veci, meniť existujúce, zaseknúť sa, rozbehnúť sa… Naučiť sa pracovať s R (ako aj programovať v akomkoľvek inom jazyku) sa vôbec nedá bez toho, aby ste tomu venovali veľké množstvo času.\nDobrou správou je, že syntax sa netreba učiť naspamäť. Skrátka si ju zapamätáte, keď s ňou budete robiť a znova zabudnete, keď s ňou prestanete robiť. Je úplne v poriadku nepamätať si veci. Nepamätáme si síce veci ale v čase sa učíme výrazne rýchlejšie ich vyhľadávať na internete. Asi nebude prekvapením, že schopnosť vyhľadávať informácie alebo riešiť problémy vyhľadávaním na internete je absolútne kľúčová.\n\n\n\n\n\nNie je hanbou gúglovať. (Zdroj: internety.)",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "intro.html#demonštrácia-v-r",
    "href": "intro.html#demonštrácia-v-r",
    "title": "1  Úvod do jazyka R",
    "section": "1.5 Demonštrácia v R",
    "text": "1.5 Demonštrácia v R\nPríklady v Rku budú častokrát inšpirované publikáciou P. DALGAARD - Introductory Statistics with R, Springer 2nd edition.\n\n# Rko môžeme používať napríklad aj ako kalkulačku\n2+2\n\n[1] 4\n\nexp(2)\n\n[1] 7.389056\n\n# Za touto mriezkou je komentár.\n\nRozličné textové prehliadače majú nastavané rôzne kódovanie. Preto, ak chceme produkovať čitateľný kód je dobrým nápadom sa vyhýbať dĺžňom a mäkčeňom.\n\n# Je dobrou praxou p4sa& koment!re v angli@tine alebo aspo? bez diakritiky. \n# Je dobrou praxou pisat komentare v anglictine alebo aspon bez diakritiky.\n# It is a good idea to write comments in english or without special symbols. \n\nNakreslíme nejaké náhodne vygenerované čísla.\n\n#plot a vector of 100 realizations of normally distributed \n# random variables with mean 0 and variance 1\nplot(rnorm(100))\n\n\n\n\n\n\n\n\nVytvoríme 15 ďalších náhodných čísel.\n\n#create a vector of 15 realizations of normally distributed random variables with mean 0 and variance 1\nrnorm(15)\n\n [1]  0.60011177  0.59831676 -0.39447226 -0.82175840 -0.14447760  1.57328819\n [7] -0.05915091 -0.11675828 -0.53655106  0.73023981  0.28953291 -0.25041561\n[13] -0.67824199 -0.07239594  2.03249052\n\n\nDo premennej uloźíme číslo. Na to použijeme šípku. Odteraz bude mať Rko uložené, že v x bude 2.\n\n#assign number \"2\" to variable \"x\"\nx &lt;- 2\n\nVypísaním sa pozrieme, čo je vnútri.\n\n#take a look on what is inside x\nx\n\n[1] 2\n\n\nS objektami, ktoré sú v pamäti môžeme robiť všelijaké operácie. Napríklad ich sčitovať.\n\n#calculate x+x\nx + x\n\n[1] 4\n\n\nŠípkou si uložíme do premennej aj skupinu objektov, napríklad čísel.\n\n#save a vector of weights. this is a column vector with 6 elements\nweight &lt;- c(60, 72, 57, 90, 95, 72)\nweight\n\n[1] 60 72 57 90 95 72\n\n\n\n#save a vector of heights\nheight &lt;- c(1.75, 1.80, 1.65, 1.90, 1.74, 1.91)\n\nA robíme s nimi všelijaké aritmetické operácie.\n\n#operators \"/\" and \"^2\" are applied element-wise\nbmi &lt;- weight/height^2\nbmi\n\n[1] 19.59184 22.22222 20.93664 24.93075 31.37799 19.73630\n\n\nSčítanie elementov vektora.\n\n#sum up all the elements in a vector\nsum(weight)\n\n[1] 446\n\n\nRôzne operácie môžeme skladať.\n\n#calculate arithmetic mean\nsum(weight)/length(weight)\n\n[1] 74.33333\n\nxbar &lt;- sum(weight)/length(weight)\nweight - xbar\n\n[1] -14.333333  -2.333333 -17.333333  15.666667  20.666667  -2.333333\n\n(weight - xbar)^2\n\n[1] 205.444444   5.444444 300.444444 245.444444 427.111111   5.444444\n\nsum((weight - xbar)^2)\n\n[1] 1189.333\n\n#estimate the standard deviation\nsqrt(sum((weight - xbar)^2)/(length(weight) - 1))\n\n[1] 15.42293\n\n\nNa všetky bežné operácie už máme predpripravené funkcie priamo v Rku.\n\n#compare with built-in functions \"mean\" and \"sd\"\nmean(weight)\n\n[1] 74.33333\n\nsd(weight)\n\n[1] 15.42293\n\n\nAko aj napríklad na testovanie hypotézy, či je stredná hodnota nejakej premennej rovná určitej hodnote pomocou t-testu.\n\n#one-sample t-test that mean is equal to 22.5\nt.test(bmi, mu=22.5)\n\n\n    One Sample t-test\n\ndata:  bmi\nt = 0.34488, df = 5, p-value = 0.7442\nalternative hypothesis: true mean is not equal to 22.5\n95 percent confidence interval:\n 18.41734 27.84791\nsample estimates:\nmean of x \n 23.13262 \n\n#we cannot reject\n\nNeodmysliteľnou časťou dátovej analýzy je spoznávanie vzťahov medzi rôznymi premennými.\n\n#what is the relationship between height and weight?\nplot(height,weight)\nhh &lt;- c(1.65, 1.70, 1.75, 1.80, 1.85, 1.90)\nlines(hh, 22.5 * hh^2)\n\n\n\n\n\n\n\nargs(plot.default)\n\nfunction (x, y = NULL, type = \"p\", xlim = NULL, ylim = NULL, \n    log = \"\", main = NULL, sub = NULL, xlab = NULL, ylab = NULL, \n    ann = par(\"ann\"), axes = TRUE, frame.plot = axes, panel.first = NULL, \n    panel.last = NULL, asp = NA, xgap.axis = NA, ygap.axis = NA, \n    ...) \nNULL\n\n\nV rámci prostredia R nemusíme pracovať len s číslami. Pokojne to môžu byť texty.\n\n#working with texts\nc(\"Huey\",\"Dewey\",\"Louie\")\n\n[1] \"Huey\"  \"Dewey\" \"Louie\"\n\nc('Huey','Dewey','Louie')\n\n[1] \"Huey\"  \"Dewey\" \"Louie\"\n\nc(T,T,F,T)\n\n[1]  TRUE  TRUE FALSE  TRUE\n\nbmi &gt; 25\n\n[1] FALSE FALSE FALSE FALSE  TRUE FALSE\n\ncat(c(\"Huey\",\"Dewey\",\"Louie\"))\n\nHuey Dewey Louie\n\ncat(\"Huey\",\"Dewey\",\"Louie\", \"\\n\")\n\nHuey Dewey Louie \n\ncat(\"What is \\\"R\\\"?\\n\")\n\nWhat is \"R\"?\n\n\nPomocou funkcie c() zreťazíme rôzne objekty do jedného.\n\n#c as concatenate\nc(42,57,12,39,1,3,4)\n\n[1] 42 57 12 39  1  3  4\n\nx &lt;- c(1, 2, 3)\ny &lt;- c(10, 20)\nc(x, y, 5)\n\n[1]  1  2  3 10 20  5\n\nx &lt;- c(red=\"Huey\", blue=\"Dewey\", green=\"Louie\")\nx\n\n    red    blue   green \n \"Huey\" \"Dewey\" \"Louie\" \n\n\nK názvom elementov pristupujeme pomocou funkcie names().\n\n#names of elements\nnames(x)\n\n[1] \"red\"   \"blue\"  \"green\"\n\n\nZreťazením rôznych typov objektov Rko zmení ich typ. Toto aj dobré aj zlé. Dobré je to, lebo to vie urobiť písanie kódu pohodlnejším. Zlé je to, lebo to môže zneprehľadniť prácu, Rovnaký objekt FALSE môže byť chápaný aj ako číslo, aj ako textový reťazec, aj ako logická premenná.\n\n#concatenating may change type of object\nc(FALSE, 3)\n\n[1] 0 3\n\nc(pi, \"abc\")\n\n[1] \"3.14159265358979\" \"abc\"             \n\nc(FALSE, \"abc\")\n\n[1] \"FALSE\" \"abc\"  \n\n\nPostupnosť čísel získame použitím seq().\n\n#create sequence\nseq(4,9)\n\n[1] 4 5 6 7 8 9\n\nseq(4,10,2)\n\n[1]  4  6  8 10\n\n4:9\n\n[1] 4 5 6 7 8 9\n\n\nUžitočnou funkciou je rep() ktorá zopakuje objekt niekoľko krát\n\noops &lt;- c(7,9,13)\n#repeat\nrep(oops,3)\n\n[1]  7  9 13  7  9 13  7  9 13\n\nrep(oops,1:3)\n\n[1]  7  9  9 13 13 13\n\n\nFunkcia dim() zmení dimenzie objektu. Napríklad vektor čísel preusporiada do tabuľky (matice).\n\nrep(1:2,c(10,15))\n\n [1] 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2\n\nx &lt;- 1:12\n#change dimension of object x\ndim(x) &lt;- c(3,4)\nx\n\n     [,1] [,2] [,3] [,4]\n[1,]    1    4    7   10\n[2,]    2    5    8   11\n[3,]    3    6    9   12\n\n\nRiadkom alebo aj stĺpcom tabuľky môžeme dávať mená.\n\nmatrix(1:12,nrow=3,byrow=T)\n\n     [,1] [,2] [,3] [,4]\n[1,]    1    2    3    4\n[2,]    5    6    7    8\n[3,]    9   10   11   12\n\nx &lt;- matrix(1:12,nrow=3,byrow=T)\nrownames(x) &lt;- LETTERS[1:3]\nx\n\n  [,1] [,2] [,3] [,4]\nA    1    2    3    4\nB    5    6    7    8\nC    9   10   11   12\n\n\nFunkcia t() otočí tabuľku - transponuje ju.\n\n#t for transpose\nt(x)\n\n     A B  C\n[1,] 1 5  9\n[2,] 2 6 10\n[3,] 3 7 11\n[4,] 4 8 12\n\n\nRôzne stĺpce môžeme spojiť cez cbind().\n\n#column bind\ncbind(A=1:4,B=5:8,C=9:12)\n\n     A B  C\n[1,] 1 5  9\n[2,] 2 6 10\n[3,] 3 7 11\n[4,] 4 8 12\n\n\nRôzne riadky môžeme spojiť cez rbind().\n\n#row bind\nrbind(A=1:4,B=5:8,C=9:12)\n\n  [,1] [,2] [,3] [,4]\nA    1    2    3    4\nB    5    6    7    8\nC    9   10   11   12\n\n\nNiekedy je pohodlné pracovať s faktorovou premennou. To je premenná, ktorá má rôzne hodnoty alebo úrovne. Môže ale nemusí byť usporiadaná.\n\npain &lt;- c(0,3,2,2,1)\n#create a factor variable. factors are labels\nfpain &lt;- factor(pain,levels=0:3)\nfpain &lt;- factor(pain,levels=0:3, ordered = TRUE)\n\nHodnoty faktorov môžeme meniť. Toto vie byť užitočné pri dotazníkovom prieskume, kedy hodnoty môžu byť: silne nesúhlasím, nesúhlasím, nemám názor, súhlasím, silne súhlasím.\n\nlevels(fpain) &lt;- c(\"none\",\"mild\",\"medium\",\"severe\")\nfpain\n\n[1] none   severe medium medium mild  \nLevels: none &lt; mild &lt; medium &lt; severe\n\n\nFaktorovú premennú vieme pretransformovať naspäť na číselnú (numerickú).\n\n#transform factor variable into numeric\nas.numeric(fpain)\n\n[1] 1 4 3 3 2\n\nlevels(fpain)\n\n[1] \"none\"   \"mild\"   \"medium\" \"severe\"\n\n\nNiekedy pracujeme so zoznamami (listami). K objektom zo zoznamu pristupujeme pomocou symbolu $.\n\n#lists\nintake.pre &lt;- c(5260,5470,5640,6180,6390,\n                6515,6805,7515,7515,8230,8770)\nintake.post &lt;- c(3910,4220,3885,5160,5645,\n                 4680,5265,5975,6790,6900,7335)\nmylist &lt;- list(before=intake.pre,after=intake.post)\nmylist\n\n$before\n [1] 5260 5470 5640 6180 6390 6515 6805 7515 7515 8230 8770\n\n$after\n [1] 3910 4220 3885 5160 5645 4680 5265 5975 6790 6900 7335\n\nmylist$before\n\n [1] 5260 5470 5640 6180 6390 6515 6805 7515 7515 8230 8770\n\n\nĎalšou užitočnou štruktúrou je dátová tabuľka.\n\n#create a data frame\nd &lt;- data.frame(intake.pre,intake.post)\nd\n\n   intake.pre intake.post\n1        5260        3910\n2        5470        4220\n3        5640        3885\n4        6180        5160\n5        6390        5645\n6        6515        4680\n7        6805        5265\n8        7515        5975\n9        7515        6790\n10       8230        6900\n11       8770        7335\n\nd$intake.pre\n\n [1] 5260 5470 5640 6180 6390 6515 6805 7515 7515 8230 8770\n\n\nDo vektorov, matíc alebo dátových tabuliek môžeme pristupovať cez indexy cez hranaté zátvorky []. Použitím symbolu mínus - odstratíme časti vektora alebo tabuľky.\n\n#indexing\nintake.pre[5]\n\n[1] 6390\n\nintake.pre[c(3,5,7)]\n\n[1] 5640 6390 6805\n\nv &lt;- c(3,5,7)\nintake.pre[v]\n\n[1] 5640 6390 6805\n\nintake.pre[1:5]\n\n[1] 5260 5470 5640 6180 6390\n\nintake.pre[-c(3,5,7)]\n\n[1] 5260 5470 6180 6515 7515 7515 8230 8770\n\n\nK častiam vektorov, matíc alebo dátových tabuliek môžeme pristupovať aj cez logické premenné, teda premenné typu TRUE alebo FALSE. Funkcie head() a tail() slúžia na vypísanie prvých 5 alebo posledných 5 pozorovaní v dátovej tabuľke. Pozrieť sa na surové dáta v tabuľke je vždy užitočné.\n\n#subsetting\nintake.post[intake.pre &gt; 7000]\n\n[1] 5975 6790 6900 7335\n\nintake.post[intake.pre &gt; 7000 & intake.pre &lt;= 8000]\n\n[1] 5975 6790\n\nintake.pre &gt; 7000 & intake.pre &lt;= 8000\n\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE\n\nd &lt;- data.frame(intake.pre,intake.post)\nd[5,1]\n\n[1] 6390\n\nd[5,]\n\n  intake.pre intake.post\n5       6390        5645\n\nd[d$intake.pre&gt;7000,]\n\n   intake.pre intake.post\n8        7515        5975\n9        7515        6790\n10       8230        6900\n11       8770        7335\n\nsel &lt;- d$intake.pre&gt;7000\nsel\n\n [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE\n\nd[sel,]\n\n   intake.pre intake.post\n8        7515        5975\n9        7515        6790\n10       8230        6900\n11       8770        7335\n\nd[1:2,]\n\n  intake.pre intake.post\n1       5260        3910\n2       5470        4220\n\nhead(d)\n\n  intake.pre intake.post\n1       5260        3910\n2       5470        4220\n3       5640        3885\n4       6180        5160\n5       6390        5645\n6       6515        4680\n\ntail(d)\n\n   intake.pre intake.post\n6        6515        4680\n7        6805        5265\n8        7515        5975\n9        7515        6790\n10       8230        6900\n11       8770        7335\n\n\nKnižnicu zavoláme príkazom library() a nainštalujeme pomocou install.package().\n\nlibrary(ISwR)\nenergy\n\n   expend stature\n1    9.21   obese\n2    7.53    lean\n3    7.48    lean\n4    8.08    lean\n5    8.09    lean\n6   10.15    lean\n7    8.40    lean\n8   10.88    lean\n9    6.13    lean\n10   7.90    lean\n11  11.51   obese\n12  12.79   obese\n13   7.05    lean\n14  11.85   obese\n15   9.97   obese\n16   7.48    lean\n17   8.79   obese\n18   9.69   obese\n19   9.68   obese\n20   7.58    lean\n21   9.19   obese\n22   8.11    lean\n\nexp.lean &lt;- energy$expend[energy$stature==\"lean\"]\nexp.obese &lt;- energy$expend[energy$stature==\"obese\"]\nl &lt;- split(energy$expend, energy$stature)\nl\n\n$lean\n [1]  7.53  7.48  8.08  8.09 10.15  8.40 10.88  6.13  7.90  7.05  7.48  7.58\n[13]  8.11\n\n$obese\n[1]  9.21 11.51 12.79 11.85  9.97  8.79  9.69  9.68  9.19\n\n\nFunkcie môžeme kombinovať a vnárať do seba.\n\n#combine functions rexp, mean, replicate\nreplicate(10,mean(rexp(20)))\n\n [1] 0.9279642 1.1570198 1.0283862 1.2529523 1.1194568 0.9850857 0.9847394\n [8] 1.0742094 1.0953533 1.0856272\n\nm &lt;- matrix(rnorm(12),4)\nm\n\n            [,1]        [,2]       [,3]\n[1,]  0.94520274  0.85443328  1.4717596\n[2,] -0.35871641  1.07142105  0.1983443\n[3,] -0.35199957 -0.00648084 -0.8156151\n[4,] -0.02176235 -0.29127936  0.9760840\n\n\nAk potrebujeme jednu funkciu aplikovať mnoho krát na rôzne podčasti objektu môžeme použiť lapply(),sapply(),apply() alebo tapply(), ktorých výstupom bude zoznam, vektor alebo tabuľka.\n\n#l as list\nlapply(thuesen, mean, na.rm=T)\n\n$blood.glucose\n[1] 10.3\n\n$short.velocity\n[1] 1.325652\n\n#s as simplify\nsapply(thuesen, mean, na.rm=T)\n\n blood.glucose short.velocity \n     10.300000       1.325652 \n\n#apply\napply(m, 2, min)\n\n[1] -0.3587164 -0.2912794 -0.8156151\n\n#t as table\ntapply(energy$expend, energy$stature, median)\n\n lean obese \n 7.90  9.69 \n\n\nFunkcie sort() a order() nám usporiadajú vektor alebo určia poradie jednotlivých elementov.\n\n#sort, order\nintake$post\n\n [1] 3910 4220 3885 5160 5645 4680 5265 5975 6790 6900 7335\n\nsort(intake$post)\n\n [1] 3885 3910 4220 4680 5160 5265 5645 5975 6790 6900 7335\n\norder(intake$post)\n\n [1]  3  1  2  6  4  7  5  8  9 10 11\n\no &lt;- order(intake$post)\nintake$post[o]\n\n [1] 3885 3910 4220 4680 5160 5265 5645 5975 6790 6900 7335\n\nintake$pre[o]\n\n [1] 5640 5260 5470 6515 6180 6805 6390 7515 7515 8230 8770\n\nintake.sorted &lt;- intake[o,] \nintake.sorted\n\n    pre post\n3  5640 3885\n1  5260 3910\n2  5470 4220\n6  6515 4680\n4  6180 5160\n7  6805 5265\n5  6390 5645\n8  7515 5975\n9  7515 6790\n10 8230 6900\n11 8770 7335\n\n\nR súbor z prednášky",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "intro.html#na-záver-úvodu",
    "href": "intro.html#na-záver-úvodu",
    "title": "1  Úvod do jazyka R",
    "section": "1.6 Na záver úvodu",
    "text": "1.6 Na záver úvodu\nAko ste si určite mohli všimnúť, pracovať s Rkom je relatívne priamočiare. Štruktúra syntaxe je intuitívna, len si na ňu treba zvyknúť, čo na začiatku môže byť prácne, ba priam nepríjemné. Každopádne na začiatku je oveľa rýchlejšie veci vyskúšať namiesto prácneho štúdia dokumentácie. Tým, že Rku budete venovať čas odstránite počiatočné bariéry a ukáže sa množstvo užitočných aplikácií. Rovnako sa zníži bariéra prístupu k iným programovacím jazykom.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "intro.html#cvičenia",
    "href": "intro.html#cvičenia",
    "title": "1  Úvod do jazyka R",
    "section": "1.7 Cvičenia",
    "text": "1.7 Cvičenia\n\nUvažujte nasledovné filmy s hodnoteniami a dĺžkou (v min).\n\nfilms &lt;- c(\"Terminator 3\", \"Titanic\", \"Matrix\", \"Love actually\", \"The Godfather\",\"12 Angry Men\",\"The Dark Knight\")\nscore &lt;- c(99,92,87,93,98,97,92)\ntime &lt;- c(109,194,136,135,175,96,152)\n\n\nZostrojte vektor own_score, ktorý bude obsahovať Vaše vlastné hodnotenie týchto filmov.\nZostrojte data.frame s názvom db, ktorý bude pozostávať z názvu filmu, skóre, vášho vlastného skóre ako aj dĺžky.\nVypíšte Vaše vlastné skóre pre filmy, ktoré sú dlhšie ako 2 hodiny.\nAký je priemer dĺžky filmu pre Vaše tri najneobľúbenejšie filmy?\nZobrazte Vaše vlastné hodnotenie own_score oproti daného hodnoteniu score.\nV rámci tejto vzorky filmov máte radi skôr dlhšie alebo kratšie filmy?\n\n\n\nNapíšte príkaz do jedného riadku, ktorého výsledkom je toto\n\n\n      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]\n [1,]    1    1    1    1    1    1    1    1    1\n [2,]    1    1    1    1    1    2    2    2    2\n [3,]    2    2    2    2    2    2    2    2    2\n [4,]    3    3    3    3    3    3    3    3    3\n [5,]    3    3    3    4    4    4    4    4    4\n [6,]    4    4    4    4    4    5    5    5    5\n [7,]    5    5    5    5    5    5    6    6    6\n [8,]    6    6    6    6    6    6    7    7    7\n [9,]    7    7    7    7    7    8    8    8    8\n[10,]    8    8    8    9    9    9    9    9    9\n\n\n\n\nNainštalujte a načítajte si knižnicu ggplot2movies, ktorá obsahuje hodnotenia zo stránky imdb.com do roku 2015. V datasete movies sa nachádza množstvo zaujímavých informácií. S týmito budeme teraz pracovať. O datasete si môžete prečítať napríklad tu https://cran.r-project.org/web/packages/ggplot2movies/ggplot2movies.pdf a tu https://rwebapps.shinyapps.io/movie-app/\n\nPozrite sa na sumárne štatistiky filmov (môžete použiť funkciu summary()). Ktorý žáner dominuje, čo sa podielu na trhu týka?\nAký je najstarší komediálny film?\nKtorý animovaný film, vydaný neskôr ako 1980, dlhší ako 30 minút má najlepší a ktorý najhorší rating?\nKtorý animovaný film s aspoň 1000 hlasmi, vydaný neskôr ako 1980, dlhší ako 30 minút má najlepší a ktorý najhorší rating?\nAko sa volá najhoršia romantická komédia minulého tisícročia?\nZostrojte zoznam 10 najhorších filmov s rozpočtom väčším ako 20 miliónov.\nKtorý žáner je najúspešnejší po roku 2000?\nStúpa počet recenzií v čase pre akčné filmy?\nPouźitím funkcie str_detect() z knižnice stringr zistite, ktorých filmov je viacej. Tých o Terminátorovi, Batmanovi alebo o Star Wars?\nPomocou funkcie pairs() zobrazte vzájomné grafy číselných premenných year, length a rating. Zopár filmov je podozrivo dlhých. Ktoré sú to?\nOpýtajte sa Vášho suseda/susedky nejakú zaujímavú otázku, ktorá sa dá týmto datasetom zodpovedať.\n\n\n\nPouvažujte nad výstupom tohoto príkazu\n\nsqrt(sqrt(9*(length(rep(seq(1,9,2)*2,2)+2)-1))) \n\nbez toho, aby ste si ho spustili.\n\n\n\n\nR súbor z cvičení z 22.9.2025",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Úvod do jazyka R</span>"
    ]
  },
  {
    "objectID": "structures.html",
    "href": "structures.html",
    "title": "2  Premenné a dátové štruktúry",
    "section": "",
    "text": "2.1 Typy premenných\nV tejto kapitole postupneme pokračujeme v spoznávaní Rka. Pozrieme sa na bežne používané objekty s ktorými budeme pracovať, či už premenné dátové štruktúry alebo iné užitočné funkcie.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#typy-premenných",
    "href": "structures.html#typy-premenných",
    "title": "2  Premenné a dátové štruktúry",
    "section": "",
    "text": "2.1.1 numeric\nObjekt tohoto typu číslo. Môžeme prealokovať pamäť a vytvoriť objekt typu numeric. Štandardne bude tento objekt nula alebo vektor núl.\n\n# create a vector of length 5 of type numeric\nx &lt;- numeric(5)\n# it will be filled with zeros\n\nĎalej sa môžeme opýtať či je daný objekt typu numeric pomocou is.numeric() Ak nie je, tak môžeme skonvertovať do numeric typu pomocou as.numeric(), pokiaľ sa to dá.\n\nis.numeric(x)\n\n[1] TRUE\n\ny &lt;- TRUE\nis.numeric(y)\n\n[1] FALSE\n\nz &lt;- as.numeric(y)\nis.numeric(z)\n\n[1] TRUE\n\n\n\n\n2.1.2 character\nSlová/texty sú typu character. Podobne ako pri iných typoch premenných, môžeme použiť funkcie character(), is.character() a as.character() na vytvorenie, overenie alebo konvertovanie.\n\nf &lt;- \"Hello\"\nis.character(f)\n\n[1] TRUE\n\n\n\n\n2.1.3 logical\nLogická (boolovská) premenná nadobúda hodnoty TRUE alebo FALSE. Akonáhle urobíme s logickou premennou nejakú aritmetickú operáciu, Rko ju automaticky skonvertuje na číselnú (numeric).\n\n2+2 &gt; 5\n\n[1] FALSE\n\n10+(2+2 &gt; 5)\n\n[1] 10\n\n\nLogické premenné sú tiež doležité na skúmanie podmnožín\n\nheight &lt;- c(1.75, 1.80, 1.65, 1.90, 1.74, 1.91)\nheight &gt; 1.70\n\n[1]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE\n\nind &lt;- (height &gt; 1.75)\nheight[ind]\n\n[1] 1.80 1.90 1.91\n\n\nFunkcia which() vráti indexy súradníc vektora typu logical, ktoré nadobúdajú hodnoty TRUE. Na 0-1 vektor typu numeric nefunguje.\n\nwhich(height &gt; 1.70)\n\n[1] 1 2 4 5 6\n\n\n\n\n2.1.4 factor\nFaktorová premenná (factor) je užitočná na prácu s informáciami, ktoré sú v nenumerickom tvare. Môžeme mať usporiadané faktory (silne nesúhlasím, nesúhlasím, nemám názor, súhlasím, silne súhlasím.) alebo neusporiadané faktory (modrá, žltá, zelená…).\n\ncarColors &lt;- c(\"red\",\"red\",\"blue\",\"yellow\",\"salmon\",\"white\",\"grapefruit\",\"white\",\"black\")\nfcarColors &lt;- as.factor(carColors)\nfcarColors\n\n[1] red        red        blue       yellow     salmon     white      grapefruit\n[8] white      black     \nLevels: black blue grapefruit red salmon white yellow\n\npain &lt;- c(0,3,2,2,1)\nfpain &lt;- factor(pain,levels=0:3, ordered = TRUE)\nlevels(fpain) &lt;- c(\"none\",\"mild\",\"medium\",\"severe\")\nfpain\n\n[1] none   severe medium medium mild  \nLevels: none &lt; mild &lt; medium &lt; severe\n\n\n\n\n2.1.5 Iné\nExistujú všelijaké iné typy premenných, napríklad complex pre komplexné čísla, integer pre celé čísla alebo napríklad date pre dátumy.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#typy-dátových-štruktúr",
    "href": "structures.html#typy-dátových-štruktúr",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.2 Typy dátových štruktúr",
    "text": "2.2 Typy dátových štruktúr\n\n2.2.1 vector\nVektor je skupina objektov rovnakého typu. Nemusí nutne ísť len o čísla.\n\n\n2.2.2 matrix\nMatica je tabuľka objektov rovnakého typu.\n\n\n2.2.3 array\nPole je skupina objektov rovnakého typu, môže mať aj viac ako 2 dimenzie.\n\n\n2.2.4 list\nZoznam sa používa na objekty, ktoré sú rôzneho typu.\n\n\n2.2.5 data.frame\nDátová tabuľka je jedným zo základných objektov, ktoré používa ako vstup mnoho súčastí R. Na rozdiel od matice môže mať viacej typov dát. Dátová tabuľka je v podstate špeciálnym typom zoznamu, kde komponenty musia byť vektory.\nNasledujúce užitočné funkcie umožňujú efektívnu prácu s objektom typu data.frame.\n\nhead() - vypíše hlavičku tabuľky, takže prvých 6 riadkov\ntail() - vypíše koniec tabuľky, takže posledných 6 riadkov\ndim() - dimenzie tabuľky\nnrow() - počet riadkov\nncol() - počet stĺpcov\nnames() - mená vektorov, ktoré tvoria dátovú tabuľku\nsapply(df,class) - funkcia, ktorá vypíše typ jednotlivých vektorov v rámci daného data.frame s názvom df",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#vlastné-funkcie",
    "href": "structures.html#vlastné-funkcie",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.3 Vlastné funkcie",
    "text": "2.3 Vlastné funkcie\n\n\n\n\n\nFunkcia.\n\n\n\n\nZadefinujeme si funkciu nasledovne.\n\nmyfunction &lt;- function(a, b, c=5){\n  x &lt;- a+b\n  return(x*c)\n}\n\nČo bude výsledkom myFunction(2,3) a myFunction(2,3,4) ?",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#for-cyklus",
    "href": "structures.html#for-cyklus",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.4 for cyklus",
    "text": "2.4 for cyklus\nNasledujúci kód sčíta všetky čísla od 1 po 1000\n\nx &lt;- 0\nfor(iNumber in 1:1000) {\n  x &lt;- x + iNumber\n}\nx\n\n[1] 500500\n\n\nIndex iNumber prechádza, cez všetky čísla vo vektore 1:1000 a vykoná všetky operácie, ktoré sú v kučeravých zátvorkách.\nPodobne môžeme prechádzať cez vektor iných objektov ako je číslo. Tu budeme prechádzať cez vektor textov.\n\npersons &lt;- c(\"Martin\", \"Elena\", \"Chryzogóm\", \"Lucia\")\nfor(iPerson in persons) {\n  print(iPerson)\n}\n\n[1] \"Martin\"\n[1] \"Elena\"\n[1] \"Chryzogóm\"\n[1] \"Lucia\"\n\n\nRovnaký výstup dostaneme, ak budeme prechádzať cez indexy.\n\npersons &lt;- c(\"Martin\", \"Elena\", \"Chryzogóm\", \"Lucia\")\nfor(iNumber in 1:4) {\n  print(persons[iNumber])\n}\n\n[1] \"Martin\"\n[1] \"Elena\"\n[1] \"Chryzogóm\"\n[1] \"Lucia\"",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#knižnice",
    "href": "structures.html#knižnice",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.5 Knižnice",
    "text": "2.5 Knižnice\nKnižnice (libraries) sú kolekciou rôznych funkcií. Niektoré knižnice sú vytvorené priamo tvorcami R, ako napríklad base, iné nadšencami, ako napríklad causalweight. Ak chceme používať príkazy z nejakej knižnice, musíme ju mať nainštalovanú a musíme ju zavolať. Napríklad populárna knižnica ggplot2 slúži na tvorbu vizualizácií. Najprv musíte spustiť príkaz install.packages(\"ggplot2\") a z online repozitára sa stiahne táto knižnica na Váš počítač.\n\nlibrary(ggplot2)\nggplot(diamonds) + geom_point(aes(x=carat, y=price, color=cut))\n\n\n\n\n\n\n\n\nAk do konzoly napíšeme ?ggplot ukáže sa nám podrobná dokumentácia. Väčšina knižníc má svoju vignette, kde je nárornou formou stručne vysvetlená základná funkcionalita danej knižnice.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#štandardy",
    "href": "structures.html#štandardy",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.6 Štandardy",
    "text": "2.6 Štandardy\n\n“Good coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread.”\n— Hadley Wickham\n\nJe dobrou praxou písať pekný kód. Čo to znamená? Napríklad:\n\nloadData.R - názov funkcie alebo skriptu - veľké písmeno na začiatku ďalšieho slova. Alebo load_data.R\n&lt;- - priradenie. Používajte namiesto =\nNie je dobré písať príliš dlhé riadky.\ngetConvReel_11 - dávajte zrozumiteľné názvy funkciám\nvyvarujte sa dvojitím záporom, sú nezrozumiteľné\nokolo = , +, -, &lt;- nechávajte medzeru, nech sa to lepšie číta\npíšte veľa komentárov (#najlepsie bez makcenov a dlznov) a odsadzujte slová\npíšte kód tak, aby ho vedel čítať niekto po vás s minimálnou námahou\n\nMnoho odporúčaní je tu: https://style.tidyverse.org a tu: https://google.github.io/styleguide/Rguide.html",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#časté-chyby",
    "href": "structures.html#časté-chyby",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.7 Časté chyby",
    "text": "2.7 Časté chyby\n\nNeporiadok v kóde - čítať neporiadny kód je bolesť. Niekedy je aj vlastný kód po pár mesiacoch úplne nečitateľný. Špeciálna bolesť je čítat cudzí neporiadny kód.\n(0.1 + 0.2) == 0.3 - treba si dávať pozor na to, ako počítač reprezentuje čísla.\nzlé ozátvorkovanie - viacej zátvoriek je skoro vždy lepšie. Keď sa neviete rozhodnúť č’i pridať zátvorku, pridajte ju. Sú lacné.\nchýbajúca knižnica - je dobrou praxou na začiatku programu inicializovať všetky knižnice, ktoré sú potrebné na spustenie.\nnekompatibilné objekty - veľmi často sa robia operácie s nekompatibilnými objektami. Pokiaľ Rko neviem automaticky skonvertovať objekty na kompatibilné, tak vyhlási chybu. Niekedy je však horšie keď chybu ani nevyhlási, niečo urobí a chyba sa môže ukázať na úplne inom mieste.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#demonštrácia-v-r",
    "href": "structures.html#demonštrácia-v-r",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.8 Demonštrácia v R",
    "text": "2.8 Demonštrácia v R\nNa začiatku musíme načítať knižnice, ktoré budeme potrebovať. Nejaké môžeme načítať aj neskôr,\n\n#This package contains the datasets used in ISwR book\nlibrary(ISwR)\n\n#load the package \"survival\"\n#you may need to install it first\n#install.packages(\"survival\")\nlibrary(survival)\n\n\nAttaching package: 'survival'\n\n\nThe following object is masked from 'package:ISwR':\n\n    lung\n\n\nDo premennej pridáme hodnotu použitím -&gt;. Rko automaticky vyhodnotí o aký objekt ide. Objekt f bude typu numeric a objekt g bude typu character.\n\nf &lt;- 14\ng &lt;- \"seven\"\n\nMôžeme sa mechanicky pozrieť, ktoré premenné máme v pamäti (funkcia ls()). Vymazať všetko v pamäti môžeme pomocou rm(list=ls()).\n\n#list all the variables in the memory\nls()\n\n [1] \"carColors\"  \"f\"          \"fcarColors\" \"fpain\"      \"g\"         \n [6] \"height\"     \"ind\"        \"iNumber\"    \"iPerson\"    \"myfunction\"\n[11] \"pain\"       \"persons\"    \"x\"          \"y\"          \"z\"         \n\n\nAk chceme pridať všetky premenné z nejakej dátovej tabuľky, použijeme attach().\n\n# thuesen is a name of a dataset in the ISwR package\n# it is not in the global environment\nthuesen\n\n   blood.glucose short.velocity\n1           15.3           1.76\n2           10.8           1.34\n3            8.1           1.27\n4           19.5           1.47\n5            7.2           1.27\n6            5.3           1.49\n7            9.3           1.31\n8           11.1           1.09\n9            7.5           1.18\n10          12.2           1.22\n11           6.7           1.25\n12           5.2           1.19\n13          19.0           1.95\n14          15.1           1.28\n15           6.7           1.52\n16           8.6             NA\n17           4.2           1.12\n18          10.3           1.37\n19          12.5           1.19\n20          16.1           1.05\n21          13.3           1.32\n22           4.9           1.03\n23           8.8           1.12\n24           9.5           1.70\n\n#it has to be called like this\nthuesen$blood.glucose\n\n [1] 15.3 10.8  8.1 19.5  7.2  5.3  9.3 11.1  7.5 12.2  6.7  5.2 19.0 15.1  6.7\n[16]  8.6  4.2 10.3 12.5 16.1 13.3  4.9  8.8  9.5\n\n#attach the whole dataset\nattach(thuesen)\n#and access is directly\nblood.glucose\n\n [1] 15.3 10.8  8.1 19.5  7.2  5.3  9.3 11.1  7.5 12.2  6.7  5.2 19.0 15.1  6.7\n[16]  8.6  4.2 10.3 12.5 16.1 13.3  4.9  8.8  9.5\n\n\nTakýmto spôsobom zadefinujeme novú funkciu.\n\nmyfunction &lt;- function(a, b, c=5){ \n  return(a*b*c)\n}\n\nmyfunction(1,2,4)\n\n[1] 8\n\nmyfunction(1,2)\n\n[1] 10\n\n\nFunkcie môžeme mať v rámci skriptu alebo ako separátne súbory typu subor.R. Pomocou setwd() nastavíme working directory. Ak chcete vedieť v ktorom adresári ste, použite getwd().\n\nsetwd(\"/Users/lukaslaffers/Dropbox/pravdepodobnost a statistika 2/ISwR/scripts\")\n\nsource(\"myfunction2.R\")\nmyfunction2(1,2,4)\n\nTu sú rôzne spôsoby ako vykresiť závislosť dvoch premenných. Funkcia with(table,fun) vyhodnotí fun na dátovej tabuľke table.\n\nattach(thuesen)\n\nThe following objects are masked from thuesen (pos = 3):\n\n    blood.glucose, short.velocity\n\nplot(blood.glucose, short.velocity)\n\n\n\n\n\n\n\nplot(thuesen$blood.glucose, thuesen$short.velocity)\n\n\n\n\n\n\n\nwith(thuesen, plot(blood.glucose, short.velocity))\n\n\n\n\n\n\n\n\nsubset umožnuje vytvoriť podmnožinu dátovej tabuľky.\n\n#choose a subset\nthue2 &lt;- subset(thuesen,blood.glucose&lt;7)\nthue2\n\n   blood.glucose short.velocity\n6            5.3           1.49\n11           6.7           1.25\n12           5.2           1.19\n15           6.7           1.52\n17           4.2           1.12\n22           4.9           1.03\n\n\nPomocou setwd() vieme pridať ďalšiu premennú do dátovej tabuľky, napríklad transformovaním existujúcich premenných.\n\nthue3 &lt;- transform(thuesen,log.gluc=log(blood.glucose))\nthue3\n\n   blood.glucose short.velocity log.gluc\n1           15.3           1.76 2.727853\n2           10.8           1.34 2.379546\n3            8.1           1.27 2.091864\n4           19.5           1.47 2.970414\n5            7.2           1.27 1.974081\n6            5.3           1.49 1.667707\n7            9.3           1.31 2.230014\n8           11.1           1.09 2.406945\n9            7.5           1.18 2.014903\n10          12.2           1.22 2.501436\n11           6.7           1.25 1.902108\n12           5.2           1.19 1.648659\n13          19.0           1.95 2.944439\n14          15.1           1.28 2.714695\n15           6.7           1.52 1.902108\n16           8.6             NA 2.151762\n17           4.2           1.12 1.435085\n18          10.3           1.37 2.332144\n19          12.5           1.19 2.525729\n20          16.1           1.05 2.778819\n21          13.3           1.32 2.587764\n22           4.9           1.03 1.589235\n23           8.8           1.12 2.174752\n24           9.5           1.70 2.251292\n\nthue2$log.gluc &lt;- log(thue2$blood.glucose)\n\nPodobne within() modifikuje dátovú tabuľku (narozdiel of with(), ktorá len vytvorí nový objekt).\n\nthue4 &lt;- within(thuesen,{\n  log.gluc &lt;- log(blood.glucose)\n  m &lt;- mean(log.gluc)\n  centered.log.gluc &lt;- log.gluc - m\n  rm(m)\n})\n\nthue4\n\n   blood.glucose short.velocity centered.log.gluc log.gluc\n1           15.3           1.76       0.481879807 2.727853\n2           10.8           1.34       0.133573113 2.379546\n3            8.1           1.27      -0.154108960 2.091864\n4           19.5           1.47       0.724441444 2.970414\n5            7.2           1.27      -0.271891996 1.974081\n6            5.3           1.49      -0.578266201 1.667707\n7            9.3           1.31      -0.015958621 2.230014\n8           11.1           1.09       0.160972087 2.406945\n9            7.5           1.18      -0.231070001 2.014903\n10          12.2           1.22       0.255462930 2.501436\n11           6.7           1.25      -0.343865495 1.902108\n12           5.2           1.19      -0.597314396 1.648659\n13          19.0           1.95       0.698465958 2.944439\n14          15.1           1.28       0.468721722 2.714695\n15           6.7           1.52      -0.343865495 1.902108\n16           8.6             NA      -0.094210818 2.151762\n17           4.2           1.12      -0.810888496 1.435085\n18          10.3           1.37       0.086170874 2.332144\n19          12.5           1.19       0.279755623 2.525729\n20          16.1           1.05       0.532846250 2.778819\n21          13.3           1.32       0.341791014 2.587764\n22           4.9           1.03      -0.656737817 1.589235\n23           8.8           1.12      -0.071221300 2.174752\n24           9.5           1.70       0.005318777 2.251292\n\n\nPri generovaní náhodných čísel (runif() generuje náhodné čísla rovnomerne medzi 0 a 1) je dobrým zvykom nastaviť seed generátora (pseudo)náhodných čísel. Takýmto spôsobom dostaneme všetci úplne totožné výsledky.\n\n#plotting\nset.seed(98453)\nx &lt;- runif(50,0,2)\ny &lt;- runif(50,0,2)\n\nNakreslíme a modifikujeme graf. Tu vidíme, že vyskúšaním hneď pochopíte, čo daná funkcia robí bez toho, aby ste čítali dokumentáciu.\n\nplot(x, y, main=\"Titulok\", sub=\"subtitle\",\n     xlab=\"x-label\", ylab=\"y-label\")\ntext(0.6,0.6,\"text at (0.6,0.6)\")\nabline(h=.6,v=.6)\n\nfor (side in 1:4){ \n  mtext(-1:4,side=side,at=.7,line=-1:4)\n}\n\nmtext(paste(\"side\",1:4), side=1:4, line=-1,font=2)\n\n\n\n\n\n\n\n\nPodobne tu.\n\n#empty figure\nplot(x, y, type=\"n\", xlab=\"\", ylab=\"\", axes=F)\n#add elements one by one\n#points\npoints(x,y)\naxis(1)\naxis(2,at=seq(0.2,1.8,0.2))\nbox()\ntitle(main=\"Main title\", sub=\"subtitle\",\n      xlab=\"x-label\", ylab=\"y-label\")\n\n\n\n\n\n\n\n\nTu sú rôzne varianty zobrazenia distribúcie\n\n#in order to reproduce the graph exactly\n# we need to fix the seed of the random number generator\nset.seed(1234) #make it happen....\nx &lt;- rnorm(100000)\n\nhist(x)\n\n\n\n\n\n\n\nhist(x,freq=F)\ncurve(dnorm(x),add=T)\n\n\n\n\n\n\n\nh &lt;- hist(x, plot=F)\nylim &lt;- range(0, h$density, dnorm(0))\nhist(x, freq=F, ylim=ylim)\ncurve(dnorm(x), add=T)  \n\n\n\n\n\n\n\n\n\nhist.with.normal &lt;- function(x, xlab=deparse(substitute(x)),...)\n{\n  h &lt;- hist(x, plot=F, ...)\n  s &lt;- sd(x)\n  m &lt;- mean(x)\n  ylim &lt;- range(0,h$density,dnorm(0,sd=s))\n  hist(x, freq=F, ylim=ylim, xlab=xlab, ...)\n  curve(dnorm(x,m,s), add=T)\n}\n\na &lt;- rnorm(100000)\nhist.with.normal(a)\n\n\n\n\n\n\n\n\nNaćítanie dát z tabuľky je zvyčajne prvým krokom akejkoľvek analýzy. Dáta prichádzajú v rôznych formách. Tu je zopár príkladov ako načítať dáta z rôznych typov súborov. Dôležité je, aby v adresári v ktorom sa nachádzame daný súbor aj naozaj bol.\n\n######################################\n#This part is not taken from ISwR book\n######################################\n\n#There are many different ways how can we load data to R\n# and many different formats of the data\n# Here we cover some of them:\n\n# xlsx\n# csv\n# dat\n# txt\n\n# remember to set the current directory using setwd()\n# You may check it using this command\ngetwd()\n\n[1] \"/Users/lukaslaffers/Library/CloudStorage/Dropbox/pravdepodobnost a statistika 2/PAS2q\"\n\nlibrary(readxl)\n#you may need to install it first\n#install.packages(\"survival\")\n\nNa otvorenie typu xlsx potrebujeme načítať novú knižnicu. Sú rôzne knižnice, ktoré toto vedia.\n\n#working with datasets\ndata_card &lt;- read_xlsx(\"card.xlsx\")\n# Data downloaded from https://davidcard.berkeley.edu/data_sets.html\n# from paper: \n# \"Using Geographic Variation in College Proximity to Estimate the Return to Schooling\". \n#   In L.N. Christofides, E.K. Grant, and R. Swidinsky, editors, Aspects of Labor Market \n#   Behaviour: Essays in Honour of John Vanderkamp. Toronto: University of Toronto Press, 1995.\n# Data also here: https://docs.google.com/spreadsheets/d/116KwP9SJUQ8LZHeIH-sTvlFFwCgkKIsz86exk1I7O1s/edit#gid=943363882\n\nCSV súbor je častokrát preferovaný, lebo jeho forma nezávisí na verzii MS Excel.\n\n#use read.csv to load comma-separated-value file\ndata_csv &lt;- read.csv(\"card.csv\")\n\nĎalších častým formátom je .dat.\n\n#we may save the dataset to a \".dat\"\nsave(data_card, file=\"card.dat\")\n#then load it using load\nload(\"card.dat\")\n\nNatívne podporovaný formát je .RData.\n\n#we may save the dataset to a \".RData\"\nsave(data_card, file=\"card.RData\")\n#then load it using load\nload(\"card.RData\")\n\nBežným je tiež .txt formát.\n\n#use read.table to load a txt file\ndata_txt &lt;- read.table(\"card.txt\")\n\nSúbor, ktorý sťahujeme môže byť aj na internete.\n\n#sometime the dataset is on the internet\n#data_card &lt;- read.table(\"https://lukaslaffers.github.io/files/card.txt\")\ndata_card &lt;- read.table(\"card.txt\")\n\nAlebo v nejakej konkrétnej Rkovej knižnici.\n\n#dataset may be already in some R-package\ndata(malaria, package=\"ISwR\")\n\nVždy sa pozeráme na sumár datasetu. Ten nás informuje o formátoch a charakteristikách jednotlivých premenných.\n\n#look at the dataset\nsummary(data_card)\n\n       id           nearc2           nearc4          nearc4a      \n Min.   :   2   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  \n 1st Qu.:1330   1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.0000  \n Median :2574   Median :0.0000   Median :1.0000   Median :0.0000  \n Mean   :2610   Mean   :0.4318   Mean   :0.6781   Mean   :0.4921  \n 3rd Qu.:3908   3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:1.0000  \n Max.   :5225   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  \n    nearc4b           ed76            ed66           age76      \n Min.   :0.000   Min.   : 0.00   Min.   : 0.00   Min.   :24.00  \n 1st Qu.:0.000   1st Qu.:12.00   1st Qu.: 9.00   1st Qu.:25.00  \n Median :0.000   Median :13.00   Median :11.00   Median :28.00  \n Mean   :0.186   Mean   :13.23   Mean   :10.74   Mean   :28.18  \n 3rd Qu.:0.000   3rd Qu.:16.00   3rd Qu.:12.00   3rd Qu.:31.00  \n Max.   :1.000   Max.   :18.00   Max.   :18.00   Max.   :34.00  \n     daded          nodaded           momed          nomomed      \n Min.   : 0.00   Min.   :0.0000   Min.   : 0.00   Min.   :0.0000  \n 1st Qu.: 8.00   1st Qu.:0.0000   1st Qu.: 8.00   1st Qu.:0.0000  \n Median : 9.94   Median :0.0000   Median :11.00   Median :0.0000  \n Mean   :10.00   Mean   :0.2242   Mean   :10.34   Mean   :0.1143  \n 3rd Qu.:12.00   3rd Qu.:0.0000   3rd Qu.:12.00   3rd Qu.:0.0000  \n Max.   :18.00   Max.   :1.0000   Max.   :18.00   Max.   :1.0000  \n     weight           momdad14         sinmom14          step14       \n Min.   :  75607   Min.   :0.0000   Min.   :0.0000   Min.   :0.00000  \n 1st Qu.: 123030   1st Qu.:1.0000   1st Qu.:0.0000   1st Qu.:0.00000  \n Median : 365200   Median :1.0000   Median :0.0000   Median :0.00000  \n Mean   : 320318   Mean   :0.7921   Mean   :0.1002   Mean   :0.03847  \n 3rd Qu.: 405452   3rd Qu.:1.0000   3rd Qu.:0.0000   3rd Qu.:0.00000  \n Max.   :1752340   Max.   :1.0000   Max.   :1.0000   Max.   :1.00000  \n     reg661            reg662          reg663          reg664       \n Min.   :0.00000   Min.   :0.000   Min.   :0.000   Min.   :0.00000  \n 1st Qu.:0.00000   1st Qu.:0.000   1st Qu.:0.000   1st Qu.:0.00000  \n Median :0.00000   Median :0.000   Median :0.000   Median :0.00000  \n Mean   :0.04456   Mean   :0.155   Mean   :0.194   Mean   :0.06919  \n 3rd Qu.:0.00000   3rd Qu.:0.000   3rd Qu.:0.000   3rd Qu.:0.00000  \n Max.   :1.00000   Max.   :1.000   Max.   :1.000   Max.   :1.00000  \n     reg665           reg666          reg667           reg668     \n Min.   :0.0000   Min.   :0.000   Min.   :0.0000   Min.   :0.000  \n 1st Qu.:0.0000   1st Qu.:0.000   1st Qu.:0.0000   1st Qu.:0.000  \n Median :0.0000   Median :0.000   Median :0.0000   Median :0.000  \n Mean   :0.2095   Mean   :0.093   Mean   :0.1102   Mean   :0.031  \n 3rd Qu.:0.0000   3rd Qu.:0.000   3rd Qu.:0.0000   3rd Qu.:0.000  \n Max.   :1.0000   Max.   :1.000   Max.   :1.0000   Max.   :1.000  \n     reg669           south66           work76          work78      \n Min.   :0.00000   Min.   :0.0000   Min.   :0.000   Min.   :0.0000  \n 1st Qu.:0.00000   1st Qu.:0.0000   1st Qu.:1.000   1st Qu.:0.0000  \n Median :0.00000   Median :0.0000   Median :1.000   Median :1.0000  \n Mean   :0.09355   Mean   :0.4127   Mean   :0.835   Mean   :0.7351  \n 3rd Qu.:0.00000   3rd Qu.:1.0000   3rd Qu.:1.000   3rd Qu.:1.0000  \n Max.   :1.00000   Max.   :1.0000   Max.   :1.000   Max.   :1.0000  \n   lwage76            lwage78              famed           black     \n Length:3613        Length:3613        Min.   :1.000   Min.   :0.00  \n Class :character   Class :character   1st Qu.:3.000   1st Qu.:0.00  \n Mode  :character   Mode  :character   Median :6.000   Median :0.00  \n                                       Mean   :5.913   Mean   :0.23  \n                                       3rd Qu.:8.000   3rd Qu.:0.00  \n                                       Max.   :9.000   Max.   :1.00  \n    smsa76r         smsa78r              reg76r          reg78r         \n Min.   :0.0000   Length:3613        Min.   :0.0000   Length:3613       \n 1st Qu.:0.0000   Class :character   1st Qu.:0.0000   Class :character  \n Median :1.0000   Mode  :character   Median :0.0000   Mode  :character  \n Mean   :0.6947                      Mean   :0.3997                     \n 3rd Qu.:1.0000                      3rd Qu.:1.0000                     \n Max.   :1.0000                      Max.   :1.0000                     \n    reg80r             smsa66r          wage76             wage78         \n Length:3613        Min.   :0.0000   Length:3613        Length:3613       \n Class :character   1st Qu.:0.0000   Class :character   Class :character  \n Mode  :character   Median :1.0000   Mode  :character   Mode  :character  \n                    Mean   :0.6427                                        \n                    3rd Qu.:1.0000                                        \n                    Max.   :1.0000                                        \n    wage80             noint78           noint80          enroll76      \n Length:3613        Min.   :0.00000   Min.   :0.0000   Min.   :0.00000  \n Class :character   1st Qu.:0.00000   1st Qu.:0.0000   1st Qu.:0.00000  \n Mode  :character   Median :0.00000   Median :0.0000   Median :0.00000  \n                    Mean   :0.08137   Mean   :0.1068   Mean   :0.09466  \n                    3rd Qu.:0.00000   3rd Qu.:0.0000   3rd Qu.:0.00000  \n                    Max.   :1.00000   Max.   :1.0000   Max.   :1.00000  \n   enroll78           enroll80             kww                 iq           \n Length:3613        Length:3613        Length:3613        Length:3613       \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n   marsta76           marsta78           marsta80           libcrd14        \n Length:3613        Length:3613        Length:3613        Length:3613       \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n\n\nVśimneme si, že premenná je typu faktor.\n\n#IQ is apparently not a text\ndata_card$iq[1:5]\n\n[1] \".\"   \"93\"  \"103\" \"88\"  \"108\"\n\n\nVieme ju skonvertovať na numerickú premennú tak, že ju najprv skonvertujeme na text.\n\n#we may recode it\ndata_card$iqn &lt;- as.numeric(as.character(data_card$iq))\n\nWarning: NAs introduced by coercion\n\ndata_card$wage78n &lt;- as.numeric(as.character(data_card$wage78))\n\nWarning: NAs introduced by coercion\n\n\nA nakresliť.\n\n#look at the association of IQ and wages\nwith(data_card,plot(iqn,wage78n))\n\n\n\n\n\n\n\n\nRovnako nakreslíme závislosť IQ a mzdy pre tých, ktorý zarábajú menej ako 2000.\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ lubridate 1.9.3     ✔ tibble    3.2.1\n✔ purrr     1.0.2     ✔ tidyr     1.3.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n#zoom for those who earned less than 2000\nwith(data_card %&gt;% filter(wage78n&lt;2000),plot(iqn,wage78n))\n\n\n\n\n\n\n\n\nKreslenie obrázkov a vizualizácia je zaujímavá kapitola sama o sebe.\n\n#or more fancy graph\nggplot(data=data_card %&gt;% filter(wage78n&lt;2000), aes(x = iqn, y = wage78n)) +\n  geom_point() +\n  geom_smooth(method=\"lm\", formula = y ~ x) +\n  geom_smooth(method=\"lm\", formula = y ~ x + I(x^2), col=\"red\")\n\nWarning: Removed 817 rows containing non-finite outside the scale range\n(`stat_smooth()`).\nRemoved 817 rows containing non-finite outside the scale range\n(`stat_smooth()`).\n\n\nWarning: Removed 817 rows containing missing values or values outside the scale range\n(`geom_point()`).",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "structures.html#cvičenia",
    "href": "structures.html#cvičenia",
    "title": "2  Premenné a dátové štruktúry",
    "section": "2.9 Cvičenia",
    "text": "2.9 Cvičenia\n\nCvičenie 2.1 Vráťme sa k príkladu\n\nheight &lt;- c(1.75, 1.80, 1.65, 1.90, 1.74, 1.91)\nind1 &lt;- (height &gt; 1.75)\nind2 &lt;- 1*ind1\n\nPodrobne vysvetlite, prečo height[ind1] a height[ind2] nedáva ten istý výstup.\n\n\nCvičenie 2.2 Viete vysvetliť tento zdanlivý paradox?\n\n(0.1 + 0.2) == 0.3\n\n[1] FALSE\n\n\n\n\nCvičenie 2.3 Poďme naspäť k cvičeniu 1.3 o filmoch.\nAký je rozpočet akčných filmov, vydaných po 1995?\nTu je pomôcka. Sú tu 4 rôzne spôsoby ako sa to dá robiť. Líšia sa najmä prehľadnosťou zápisu. Prehľadnejší kód znamená menší priestor pre chyby.\nSpôsob 1. Indexovaním. Indexy si uchovávame:\n\n#option 1\nind &lt;- movies$year &gt; 1995 & movies$Action==1\n#look at column called \"budget\"\nmovies[ind,\"budget\"]\n#or \n# \"budget\" is in the 4th column\nnames(movies)\n#look at the fourth column\nmovies[ind,4]\n\nSpôsob 2. Priamo indexovaním.\n\n#option 2 directly (less readable)\nmovies[movies$year &gt; 1995 & movies$Action==1,\"budget\"]\nmovies[movies$year &gt; 1995 & movies$Action==1,4]\n\nSpôsob 3. Pomocou funkcie with().\n\n#option 3 nicer\n# use function with, takes dataset as the first argument\nwith(movies, budget[year &gt; 1995 & Action==1])\n\nSpôsob 4. Pomocou knižnice dplyr\n\n#option 4 much nicer (use dplyr package)\nmovies %&gt;% \n  filter(year &gt; 1995, Action==1) %&gt;%\n  select(budget)\n\nVšimnite si, že posledný kód je oveľa čitateľnejší.\nTeraz splňte nasledovnú úlohu:\nUsporiadajte animované filmy s viac ako 1000 hodnoteniami, vydané po roku 1980, ktoré trvajú dlhšie ako 30 minút podľa hodnotenia od najlepšieho po najhorší.\n(Možno použiť funkcie filter(), arrange() a desc().)\n\n\nCvičenie 2.4 Vytvorte funkciu s menom bmi, ktorá dostane ako vstup výšku v cm a váhu v kg a jej výstupom bude BMI. Môžete uvažovať, že vstupy sú korektne zadané.\n\n\nCvičenie 2.5 Pomocou for cyklu zrátajte\n\\[\\begin{equation*}\n\\sum_{i=1}^{350}\\frac{i(i-1)}{i+2}\n\\end{equation*}\\]\na\n\\[\\begin{equation*}\n\\prod_{i=1}^{350}\\frac{i+1}{i+2}\n\\end{equation*}\\]\n\n\nCvičenie 2.6 Stiahnite si a načítajte dáta o kvalite červených vín. stadiaľto. Porozmýšľajte ako sú rôzne atribúty červeného vína asociované s jeho kvalitou (quality).\n\n\nCvičenie 2.7 Stiahnite si a načítajte dáta o výkone študentov na rôznych testoch. stadiaľto. Porozmýšľajte ako je vzdelanie rodičov asociované s akademickým výkonom v rôznych oblastiach (math.score, reading.score, writing.score).\n\n\n\nR súbor z cvičení z 29.9.2025",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Premenné a dátové štruktúry</span>"
    ]
  },
  {
    "objectID": "random.html",
    "href": "random.html",
    "title": "3  Náhodné čísla a simulácie",
    "section": "",
    "text": "3.1 (Pseudo)Náhodné čísla v počítači\nObrovskou výhodou počítačov je schopnosť simulovať náhodnosť.\nVeľa otázok je mimoriadne zložitých, častokrát kvôli tomu, že sa týkajú nejakého javu, ktorý je náhodný. Nevieme, aké bude zajtra počasie alebo ako dopadnú voľby. Náhodnosť je zväčša súčasťou daného procesu a nevieme sa jej zbaviť. Chceme ju spoznať, porozumieť jej. Na toto je vhodný mechanický nástroj. Pomocou počítača si veci vieme vyskúšať, môžeme simulovať rôzne scenáre toho, ako veci môžu dopadnúť. A výpočtová sila je stále a stále lacnejšia, transistory v procesoroch sa zmenšujú a dnešná moderná smart chladnička má väčšiu výpočtovú silu ako superpočítač v minulosti.\nV minulosti sme sa naučili ako kvantifikovať náhodnosť. Pomocou rôznych nástrojov niekedy vieme vypočítať pravdepodobnosť nejakej udalosti alebo charakteristiky nejakej náhodnej premennej. Príklady s ktorými sme sa doteraz stretali sú relatívne umelé. Na to aby sme vedeli vypočítať pravdepodobnosť udalosti pomocou ceruzky a papiera, potrebujeme aby bol daný problém dostatočne jednoduchý. A preto sme:\nTieto príklady sú ilustratívne a pomôžu nám uchopiť štruktúru niektorých jednoduchých typov náhodnosti. Akonáhle však ideme riešiť praktické problémy, veci sa veľmi rýchlo počítajú ťažšie.\nNa to aby sme vedeli generovať náhodné čísla, potrebujeme nejaký zdroj náhodnosti. Ten môže prísť z nejakého externého zdroja.1 Na počítači sa preto uspokojujeme so pseudonáhodnými číslami. Existujú deterministické procesy, ktoré generujú čísla, ktoré sú z praktického hľadiska náhodné. Tieto procesy sú rôzne a sú “rôzne kvalitné” generátory pseudonáhodných čísel. My budeme používať tú predvolenú metódu v Rku.\nPríkazom set.seed() zafixujeme generátor náhodných čísel a zabezpečíme tým reprodukovateľnosť našich výsledkov.\nset.seed(28394)\nKeď si teraz niekto nechá vygenerovať 10 náhodných čísel z intervalu \\([0,1],\\) ktoré sú rovnomerne rozdelené, tak dostane úplne tie isté čísla.\nrunif(10)\n\n [1] 0.1707599 0.1818867 0.7865318 0.5782902 0.9364266 0.9324842 0.1914957\n [8] 0.2923337 0.4330475 0.8927892\nAkonáhle si vygenerujeme novú desaticu čísel, tieto budú prirodzene iné.\nrunif(10)\n\n [1] 0.5294097 0.9021275 0.9895494 0.5304749 0.1230083 0.3572835 0.2611675\n [8] 0.3291930 0.3557725 0.7183207\nAle ak znovu zafixujeme seed náhodného generátora čísel, znova dostaneme tie isté čísla ako predtým.\nset.seed(28394)\nrunif(10)\n\n [1] 0.1707599 0.1818867 0.7865318 0.5782902 0.9364266 0.9324842 0.1914957\n [8] 0.2923337 0.4330475 0.8927892\nNa čo je toto užitočné? Umožní nám to jednoducho vytvárať reprodukovateľný kód, kde budeme generovať nejaké náhodné čísla. Každý kto si neskôr spustí našu simuláciu dostane tie isté výsledky. Potrebuje však zadať to isté číslo 28394.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "random.html#ako-to-funguje",
    "href": "random.html#ako-to-funguje",
    "title": "3  Náhodné čísla a simulácie",
    "section": "3.2 Ako to funguje",
    "text": "3.2 Ako to funguje\nZ teórie vieme, že sa (za určitých podmienok) aritmetický priemer vypočítaný z iid vzorky blíži ku skutočnému populačnému priemeru.2\nUvažujme udalosť \\(A.\\) Jej pravdepodobnosť označme \\(P(A).\\) Označme naviac funkciu \\(I(A),\\) ktorá nadobúda hodnotu 1 ak udalosť \\(A\\) nastala a hodnotu \\(0\\) ak nenastala.\n\\[\nI(A)=\n\\begin{cases}\n  1, & \\text{ak udalosť $A$ nastala},\\\\\n  0, & \\text{ak udalosť $A$ nenastala}.\n\\end{cases}\n\\]\nVieme, že \\(E[I(A)] = 1\\cdot P(A) + 0\\cdot P(A^C) = P(A).\\) Preto použitím ZVČ vieme, že ak máme \\(I_1, I_2,\\cdots,I_n\\) nezávislé realizácie \\(I(A),\\) potom\n\\[\\frac{I_1 + \\cdots + I_n}{n} \\rightarrow_P P(A),\\] kde symbol \\(\\rightarrow_P\\) označuje konvergenciu podľa pravdepodobnosti. Takže v skutočnosti len využívame frekventistickú interpretáciu pravdepodobnosti: \\[P(A) = \\frac{\\text{počet úspešných pokusov (teda udalosť $A$ nastane)}}{\\text{počet všetkých možných pokusov}}.\\]\n\nPríklad 3.2 Odhad čísla \\(\\pi\\) pomocou simulácie. Vieme, že obsah kruhu je \\(\\pi r^2.\\) Môžeme rovnomerne náhodne generovať čísla na intervale \\([0,1]\\) na oboch osiach a pozrieť sa, aká proporcia z nich spadne do kruhu.\n\npiApprox &lt;- function(n){\n  x &lt;- runif(n,-1,1)\n  y &lt;- runif(n,-1,1)\n  z &lt;- (x^2 + y^2 &lt; 1)\n  par(pty=\"s\")\n  plot(x,y,pch=20,main=paste(\"Pi approximation\",as.character(4*mean(z))))\n  lines(seq(-1,1,by=0.01),sqrt(1-seq(-1,1,by=0.01)^2))\n  lines(seq(-1,1,by=0.01),-sqrt(1-seq(-1,1,by=0.01)^2))\n  points(x[z],y[z],col=\"red\",pch=20)\n}\npiApprox(1000)\n\n\n\n\n\n\n\npiApprox(10000)\n\n\n\n\n\n\n\n\n\n\nPríklad 3.3 Zákon o veľkých číslach Aritmetický priemer z pozorovaní s rovnakou strednou hodnotou sa za určitých podmienok blíži ku skutočnému priemeru.\n\n#law of large numbers\nsimLLN &lt;- function(nSim,nSample){\n  barX &lt;- numeric(nSim) \n  for (iSim in 1:nSim){\n    X &lt;- rpois(nSample,3)\n    barX[iSim] &lt;- mean(X)\n  }\n  hist(barX,main=\"Demonstration of LLN\")\n}\nsimLLN(1000,100)\n\n\n\n\n\n\n\nsimLLN(10000,1000)\n\n\n\n\n\n\n\n\n\n\nPríklad 3.4 Centrálna limitná veta Aritmetický priemer z iid pozorovaní sa za určitých podmienok blíži k normálnemu rozdeleniu.\n\nsimCLT &lt;- function(nSim,nSample){\n  barX &lt;- numeric(nSim) \n  for (iSim in 1:nSim){\n    X &lt;- rpois(nSample,3)\n    barX[iSim] &lt;- mean(X)\n  }\n  trueMean &lt;- 3\n  trueSD &lt;- sqrt(3)\n  hist( sqrt(nSample)*(barX-trueMean)/trueSD,\n        xlab=\"Centered and Scaled Mean of IID vars\", prob=TRUE,\n        main=\"Demonstration of CLT\")\n  lines( seq(-3,3,by=0.01),dnorm(seq(-3,3,by=0.01)) )\n}\nsimCLT(1000,100)\n\n\n\n\n\n\n\nsimCLT(10000,1000)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "random.html#rôzne-typy-náhodných-premenných",
    "href": "random.html#rôzne-typy-náhodných-premenných",
    "title": "3  Náhodné čísla a simulácie",
    "section": "3.3 Rôzne typy náhodných premenných",
    "text": "3.3 Rôzne typy náhodných premenných\nRko má jednotnú syntax na prácu s rôznymi typmi náhodných premenných.\n\nrpois - nám vygeneruje \\(n\\) iid čísel z Poissonoveho rozdelenia s parametrom lambda\ndpois - pravdepodobnostná funkcia (v prípade spojitej náhodnej premennej by to bola funkcia hustoty pravdepodobnosti)\nppois - kumulatívna distribučná funkcia\nqpois - kvantil pravdepodobnostného rozdelenia (inverzná kumulatívna distribučná funkcia)\n\nPre iné náhodné premenné je syntax podobná:\n\nrunif, dunif, punif, qunif - Rovnomerné rozdelenie (diskrétne, spojité)\nrbinom, dbinom, pbinom, qbinom Binomické rozdelenie (a jeho špeciálny príklad Bernoulliho rozdelenie)\nrgeom, dgeom, pgeom, qgeom -Geometrické rozdelenie\nrhyper, dhyper, phyper, qhyper -Hypergeometrické rozdelenie\nrnbinom, dnbinom, pnbinom, qnbinom -Negatívne binomické rozdelenie\nrnorm, dnorm, pnorm, qnorm -Normálne rozdelenie\nrexp, dexp, pexp, qexp -Exponenciálne rozdelenie\nrchisq, dchisq, pchisq, qchisq -Chí-kvadrát rozdelenie\nrt, dt, pt, qt -Studentovo rozdelenie (t-rozdelenie)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "random.html#rovnomerné-rozdelenie-ako-základ",
    "href": "random.html#rovnomerné-rozdelenie-ako-základ",
    "title": "3  Náhodné čísla a simulácie",
    "section": "3.4 Rovnomerné rozdelenie ako základ",
    "text": "3.4 Rovnomerné rozdelenie ako základ\nAkonáhle máme generátor pseudonáhodných čísel, ktorý vie generovať rovnomerne náhodne na intervale \\([0,1]\\), pomocou neho vieme generovať akékoľvek iné pravdepodobnostné rozdelenie.\n\nPríklad 3.5 Skúsme simulovať hádzanie kockou ale len s pomocou funkcie runif(). Ak padne číslo väčšie ako 0.5, prehlásime to za hlavu.\n\nhodMincou &lt;- function(nThrows){\n  return(1*(runif(nThrows)&gt;0.5))\n}\nhodMincou(10)\n\n [1] 1 0 0 1 0 0 1 1 1 0\n\n\n\nMajme spojitú náhodnú premennú \\(X\\), ktorá má kumulatívnu distribučnú funkciu \\(F_X.\\) Označme symbolom \\(U\\) rovnomerne rozdelenú náhodnú premennú \\(U \\sim Unif[0,1].\\) Potom pre \\(Y = F_X^{-1}(U)\\) platí \\(Y \\sim F_X.\\)\nToto má obrovské praktické dôsledky. Akonáhle máme generátor pre \\(U\\), vieme si vygenerovať akúkoľvek spojitú náhodnú premennú. Stačí len pretransformovať \\(U.\\)\nPotom máme \\[P(Y \\leq y) = P(F_X^{-1}(U) \\leq y) = P(U \\leq F_X(y)) = F_U(F_X(y))=F_X(y)\\] kde posledná rovnosť plynie zo skutočnosti, že \\(U \\sim Unif[0,1]\\) a \\(F_X(y) \\in [0,1].\\) 3",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "random.html#náhodný-výber",
    "href": "random.html#náhodný-výber",
    "title": "3  Náhodné čísla a simulácie",
    "section": "3.5 Náhodný výber",
    "text": "3.5 Náhodný výber\nAk z nejakej množiny chceme náhodne vyberať objekty, použijeme funkciu sample(). Bez akýchkoľvek iných argumentov dostávame náhodnú permutáciu (cudzie slovo pre “poprehadzovanie”).\n\n#sampling\nnamesVec &lt;- c(\"Julia\",\"Martin\",\"Peter\",\"Stefan\",\"Robert\",\"Maria\",\"Zuzana\")\n#random permutation\nsample(namesVec)\n\n[1] \"Peter\"  \"Maria\"  \"Robert\" \"Stefan\" \"Martin\" \"Zuzana\" \"Julia\" \n\n\nDruhý argument hovorí o tom, koľko objektov máme vybrať, defaultne je to dĺžka vstupného vektora.\n\n#choose 3 names without replacement\nsample(namesVec,3)\n\n[1] \"Zuzana\" \"Stefan\" \"Robert\"\n\n\nTretí argument je, či je daný objekt môžeme po vybratí dať naspäť (replace=TRUE znamená, že áno, dáme naspäť).\n\n#choose 3 names WITH replacement\nsample(namesVec,3,replace=TRUE)\n\n[1] \"Stefan\" \"Maria\"  \"Maria\" \n\n\nPočet vybratých objektov môže byť väčší ako dĺžka vstupného vektora len ak je nastavené replace=TRUE\n\n#choose 10 names WITH replacement\nsample(namesVec,10,replace=TRUE)\n\n [1] \"Martin\" \"Peter\"  \"Robert\" \"Zuzana\" \"Robert\" \"Martin\" \"Peter\"  \"Martin\"\n [9] \"Julia\"  \"Martin\"\n\n\nSkúsme hodiť férovou mincou 100krát.\n\n#throw a fair coin 100 times\nsample(c(0,1),100,replace=TRUE)\n\n  [1] 1 1 1 1 0 0 0 0 1 1 1 0 1 0 0 1 1 1 0 0 1 0 1 1 0 1 1 0 1 1 1 0 0 0 0 0 1\n [38] 1 1 1 0 0 0 1 0 0 0 1 1 1 0 0 0 0 0 1 0 1 0 0 1 0 0 0 1 1 1 1 1 0 1 0 0 0\n [75] 0 1 0 0 1 0 0 0 0 1 0 1 1 1 0 1 1 1 1 0 0 0 1 0 1 1\n\n\nAlebo 20krát hodiť férovou kockou.\n\n#throw a fair dice 100 times\nsample(1:6,20,replace=TRUE)\n\n [1] 1 3 1 3 2 6 3 6 2 6 6 6 5 2 1 4 4 2 6 6\n\n\n\nPríklad 3.6 Hodili sme férovou kockou 6 krát a súčet je 30. Je to veľa?\nA vôbec, čo to vlastné znamená “veľa”?\n\n#We throw the dice 6 times and got 30 in sum together. Is it a lot?\n#Simulate\nsim3dices &lt;- function(nSim){\n  th &lt;- numeric(nSim)\n  for (iSim in 1:nSim){\n    th[iSim] &lt;- sum(sample(1:6,6,replace=TRUE))\n  }\n  return(th)\n}\nthrows &lt;- sim3dices(10000)\n#plot\nhist(throws)\n\n\n\n\n\n\n\n#check how many times we got 30 or more extreme observation\nmean(throws&gt;=30)\n\n[1] 0.0212\n\n\nMôžeme si simulovať hádzanie mnoho krát a skrátka sa pozrieť koľkokrát nastane ešte extrémnejšia udalosť. Na to, aby toto číslo bolo presné potrebujeme veľa simulácií.\n\n\nPríklad 3.7 Vyberte 100 náhodných animovaných filmov dlhších ako 60 minút a zobrazte vzťah medzi hodnotením a rozpočtom.\n\n#plot the relationship between budget and rating for 100 randomly selected\n# animation films that are longer than 60mins\nlibrary(ggplot2movies)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\ndd &lt;- movies %&gt;% filter(Animation==1,\n                        length&gt;60)\n\nnRows  &lt;- dim(dd)[1]\nidRows &lt;- sample(1:nRows,100)\ndd100  &lt;- dd[idRows,]\nwith(dd100,plot(budget,rating))",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "random.html#zhrnutie",
    "href": "random.html#zhrnutie",
    "title": "3  Náhodné čísla a simulácie",
    "section": "3.6 Zhrnutie",
    "text": "3.6 Zhrnutie\nRiešenie problémov pomocou simulácií je jednoduché a poľahky sa implementuje. Na druhej strane sú simulácie vždy špecifické pre dané konkrétne nastavenie tej ktorej simulácie. Je to použitie hrubej sily. Vidíme, ako to je ale nie prečo.\n\n\n\n\n\nCBA pre simulačný prístup",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "random.html#cvičenia",
    "href": "random.html#cvičenia",
    "title": "3  Náhodné čísla a simulácie",
    "section": "3.7 Cvičenia",
    "text": "3.7 Cvičenia\n\nCvičenie 3.1 Naprogramujte hod férovou kockou len s použitím funkcie runif(). Potom s ňou hoďte 100 krát a nakreslite histogram. Zabezpečte, aby váš kód bol reprodukovateľný.\n\n\nCvičenie 3.2 Použitím predošlej funkcie popíšte pravdepodobnostné správanie súčtu počtu bodíkov na troch nezávislých kockách. Zabezpečte, aby bol váš popis dostatočne presný.\n\n\nCvičenie 3.3 Podrobne vysvetlite, prečo nie je dobrým nápadom fixovať seed náhodného generátora vo vnútri funkcie.\n\n\nCvičenie 3.4 Majme balíček kariet hodnosti v poradí 2,3,4,5,6,7,8,9,10,J,Q,K,A a 4 rôzne farby. Vyberte z balíčka 5 kariet. Aká je šanca, že dostaneme postupku?\n\n\nCvičenie 3.5 Vyberte 200 náhodných akčných filmov starších ako 20 rokov a zobrazte vzťah medzi hodnotením a dĺžkou filmu. Vyberte rôzne vzorky a pozerajte sa, ako veľmi sa tento vzťah mení.\n\n\nCvičenie 3.6 Palicu rovnomerne náhodne zlomíme na dvoch miestach. Aká je šanca, že budeme vedieť z týchto troch kúskov urobiť trojuholník?\n\n\nCvičenie 3.7 Skúsení kartári poznajú hru Vojna. Porozmýšľajte, ako by ste overili akú veľkú výhodu Vám dáva skutočnosť, že máte v balíčku všetky 4 esá. Aké všetky komplikácie musíte riešiť. Navrhnite principiálny postup (nič neprogramujte), ako by ste to overili ak by ste mali neobmedzene veľa výpočtovej sily.\n\n\nCvičenie 3.8 Adam a Božena idú do streleckého súboja, Adam strieľa ako prvý a trafí s pravdepdodobnosťou 30%. Božena po ňom (ak sa netrafí) a triafa s pravdepobnosťou 35%. Kto má väčšiu šancu, že vyhrá? Aká by musela byť Boženina presnosť, aby bol súboj spravodlivý?\n\n\nCvičenie 3.9 Astrián sa má stretnúť s Barborou niekedy medzi 10 a 11tou. Ale nikto si nepamätá presne kedy. Obaja sú ochotní čakať 10 minút. Aká je šanca, že sa stretnú?\n\n\nCvičenie 3.10 Piati ľudia v porote majú nasledovné šance, že sa správne rozhodnú: 95%, 80%, 90%, 82%, 99%. O výsledku rozhodne väčšina. Aká je šanca, že sa celá porota zhodne na správnom výsledku?\n\n\nCvičenie 3.11 Aká, je šanca, medzi študentami absolovujúcimi tento kurz bude aspoň jedna dvojica s rovnakým dátumom narodenia?\nAká je pravdepodobnostná distribúcia počtu ľudí, ktorí zdieľajú narodeniny s niekým iným v skupine 25ľudí?\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n:::",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "random.html#footnotes",
    "href": "random.html#footnotes",
    "title": "3  Náhodné čísla a simulácie",
    "section": "",
    "text": "Napríklad môžeme merať náhodne fluktuujúce napätie na procesore, na to však potrebujem hardvér, ktorý nie je štandardnou súčasťou počítača.↩︎\niid - independently and identically distributed, teda pozorovania sú nezávislé a rovnako rozdelené↩︎\nPre všeobecnú náhodnú premennú je táto transformácia \\(Y=\\inf \\{x; F_X(x)\\geq U \\}\\)↩︎",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  },
  {
    "objectID": "recap.html",
    "href": "recap.html",
    "title": "5  Zopakovanie pojmov",
    "section": "",
    "text": "5.1 Diskrétne náhodné premenné\nNáhodná premenná je nástroj na kvantifikovanie náhodnosti. Aká je pravdepodobnosť, že nastane \\(X=1\\)?\nNuž, nevieme, lebo \\(X\\) je náhodná. Je to síce pravdivá ale neuspokojivá odpoveď. Chceli by sme vedieť s akou pravdepodobnosťou nastane alebo nenastane. Už zloženie toho slova naznačuje, že má ambíciu merať to ako veľmi je táto udalosť “podobná pravde”. Existuje základné rozdelenie náhodných premenných podľa toho, či je množina hodnôt, ktoré môžu nadobúdať diskrétna alebo spojitá.\nNáhodnú (diskrétnu aj spojitú) premennú môžeme charakterizovať kumulatívnou distribučnou funkciou. Distribučná funkcia náhodnej premennej \\(X\\) je funkcia \\(F: \\mathbb{R} \\rightarrow \\mathbb{R},\\) ktorá je definovaná nasledovne:\n\\[F_X(x) = P(X \\leq x).\\]\nNáhodná premenná je diskrétna ak nadobúda nanajvýš spočitateľne veľa hodnôt.",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Zopakovanie pojmov</span>"
    ]
  },
  {
    "objectID": "recap.html#diskrétne-náhodné-premenné",
    "href": "recap.html#diskrétne-náhodné-premenné",
    "title": "5  Zopakovanie pojmov",
    "section": "",
    "text": "5.1.1 Pravdepodobnostná funkcia\nFunkciu \\(p_X: \\mathcal{S}_X \\rightarrow [0,1]\\) definovanú nasledovne\n\\[p_X(x) = P(X=x)\\] nazývame pravdepodobnostná funkcia diskrétnej náhodnej premennej \\(X\\).\n\n\n5.1.2 Stredná hodnota\nStredná hodnota diskrétnej náhodnej premennej je zadefinovaná ako\n\\[\\text{E}[X] = \\sum_{x \\in \\mathcal{S}_X} x \\cdot p_X(x),\\] pokiaľ platí \\(\\sum_{x \\in \\mathcal{S}_X} |x| \\cdot p_X(x) &lt; \\infty.\\)\nTento online nástroj názorne ilustruje strednú hodnotu.\n\n\n5.1.3 Variancia\nVariancia diskrétnej náhodnej premennej je zadefinovaná ako\n\\[\\text{Var}[X] = E\\left[(X-\\text{E}[X])^2\\right].\\]\nSmerodajná odchýlka náhodnej premennej je odmocnina z jej variancie\n\\[\\text{sd}[X] = \\sqrt{\\text{Var}[X]}.\\]\n\nPríklad 5.1 Stredná hodnota, variancia a smerodajná odchýlka výsledku hodu neférovej mince.\n\\[\\begin{eqnarray*}\n\\text{E}[X] &=& 0 \\cdot 0.2 + 1 \\cdot 0.8 = 0.8,\\\\\nE[X^2] &=& 0^2 \\cdot 0.2 + 1^2 \\cdot 0.8 = 0.8,\\\\\n\\text{Var}[X] &=& E[X^2] - (\\text{E}[X])^2 = 0.8 - 0.8^2 = 0.16, \\\\\n\\text{sd}[X] &=& \\sqrt{\\text{Var}[X]} = \\sqrt{0.16} = 0.4.\n\\end{eqnarray*}\\]\n\nPre ilustráciu variancie môžete kliknúť sem\n\nPríklad 5.2 Hádžeme dvoma férovými kockami a máme náhodnu premennú súčet dvoch kociek \\(X\\).\n\n\nx &lt;- 0:12+1\nplot(x, cumsum(c(0,(1/36)*c(1,2,3,4,5,6,5,4,3,2,1),0)), type=\"s\",\n     xlab = expression(x),\n     ylab = expression(P(X &lt;= x)),\n     main = \"Kumulatívna distribučná funkcia: hod dvomi kockou\")\npoints(2:12,cumsum((1/36)*c(1,2,3,4,5,6,5,4,3,2,1)),pch=19)\npoints(2:12,cumsum(c(0,(1/36)*c(1,2,3,4,5,6,5,4,3,2))))\n\n\n\n\n\n\n\n\nExistujú rôzne diskrétne náhodné premenné, niektoré sú natoľko zaujímavé, že ich rozdeleniam dávame špeciálne mená (rovnomerné rozdelenie, Bernoulliho rozdelenie, binomické rozdelenie, Poissonovo rozdelenie, geometrické rozdelenie, hypergeometrické rozdelenie, negatívne binomické rozdelenie a mnoho iných)",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Zopakovanie pojmov</span>"
    ]
  },
  {
    "objectID": "recap.html#spojité-náhodné-premenné",
    "href": "recap.html#spojité-náhodné-premenné",
    "title": "5  Zopakovanie pojmov",
    "section": "5.2 Spojité náhodné premenné",
    "text": "5.2 Spojité náhodné premenné\nSpojitá náhodná premenná nadobúda hodnoty na množine, ktorá je spojitá, teda môže nadobúdať nespočitateľne veľa hodnôt.\n\n5.2.1 Funkcia hustoty\nNa popis náhodnosti môžeme stále používať kumulatívnu distribučnú funkciu ale namiesto pravdepodobnostnej funkcie budeme používať funkciu hustoty (alternatívne funkciu hustoty spojite rozdelenej náhodnej premennej.)\nHovoríme, že spojite rozdelená náhodná premenná \\(X\\) má funkciu hustoty \\(f_X(x),\\) kde \\(f_X: \\mathbb{R} \\rightarrow \\mathbb{R},\\) ak platí:\n\\[P(a \\leq X \\leq b) = P(X \\in [a,b]) = \\int_{a}^b f_X(x) dx\\]\n\npar(mfrow=c(1,1))\n\nset.seed(30)\nx1 &lt;- rnorm(10000,0,0.7)\nx2 &lt;- rnorm(10000,5,1.5)\nx3 &lt;- rnorm(10000,1,0.5)\ndens &lt;- density(c(x1,x2,x3))\n\nplot(dens$x, dens$y, type=\"l\",\n     xlab = expression(x),\n     ylab = expression(f[X](x)),\n     main = \"Funkcia hustoty\")\n\n\n\n\n\n\n\n\n\nff &lt;- function(x) sum(c(x1,x2,x3)&lt;x)/30000\nyy &lt;- sapply(dens$x,ff)\n\nplot(dens$x,yy,type=\"l\",\n     xlab = expression(t),\n     ylab = expression(P(X &lt;= t)),\n     main = \"Kumulatívna distribučná funkcia\")\n\n\n\n\n\n\n\n\nTento obrázok ilustruje \\(P(X \\in [2,6]) = P(2\\leq X \\leq 6) = \\int_{2}^6 f_X(x) dx = F_X(6) - F_X(2)\\):\n\nplot(dens$x, dens$y, type=\"l\",\n     xlab = expression(x),\n     ylab = expression(f[X](x)),\n     main = \"Funkcia hustoty\")\nvalue1 &lt;- 2\nvalue2 &lt;- 6\n\n# Lower and higher indices on the X-axis\nl &lt;- min(which(dens$x &gt;= value1))\nh &lt;- max(which(dens$x &lt; value2))\npolygon(c(dens$x[c(l, l:h, h)]),\n        c(0, dens$y[l:h], 0),\n        col = \"blue\")\n\n\n\n\n\n\n\nff &lt;- function(x) sum(c(x1,x2,x3)&lt;x)/30000\nyy &lt;- sapply(dens$x,ff)\n\nplot(dens$x,yy,type=\"l\",\n     xlab = expression(t),\n     ylab = expression(F[X](t) == P(X &lt;= t)),\n     main = \"Kumulatívna distribučná funkcia\")\npoints(value1,ff(value1),col=\"blue\")\npoints(value2,ff(value2),col=\"blue\")\narrows(x0=value2,y0=ff(value2),x1=value2,y1=ff(value1),col=\"blue\",code=3)\nabline(a=ff(value1),b=0,col=\"blue\")\nabline(a=ff(value2),b=0,col=\"blue\")\n\n\n\n\n\n\n\n\n\nPríklad 5.3 Uvažujme náhodnú premennú \\(X\\), ktorá modeluje IQ náhodne vybraného človeka z danej populácie. Táto náhodná premenná má nasledovnú funkciu hustoty \\(f_X(x) = \\frac{1}{15\\sqrt{2 \\pi}} e^{-\\frac{1}{2}\\frac{(x-100)^2}{15^2}}\\). Vypočítajte pravdepodobnosť, že náhodne vybraný človek z tejto populácie bude mať IQ väčšie ako 130.\n\\[\\begin{eqnarray*}\nP(X &gt; 130) &=& 1-P(X \\leq 130) =  1 - \\int_{-\\infty}^{130} f_X(x)dx \\\\\n&=&  1 - \\int_{-\\infty}^{130} \\frac{1}{15\\sqrt{2 \\pi}} e^{-\\frac{1}{2}\\frac{(x-100)^2}{15^2}} dx \\\\\n&=& \\cdots \\approx  1 -  0.9772 = 2.28\\%.\n\\end{eqnarray*}\\]\nTento integrál nemá analytické (“pekné”) riešenie a treba ho zrátať numericky pomocou počítačového programu.\nNasledujúci obrázok túto situáciu ilustruje\n\nx &lt;- seq(50,150,by=1)\ny &lt;- dnorm(x,100,15)\n\nplot(x, y, type=\"l\",\n     xlab = expression(x),\n     ylab = expression(f[X](x)),\n     main = \"Funkcia hustoty IQ\")\nvalue1 &lt;- 130\nvalue2 &lt;- 1000\n\n# Lower and higher indices on the X-axis\nl &lt;- min(which(x &gt;= value1))\nh &lt;- max(which(x &lt; value2))\npolygon(c(x[c(l, l:h, h)]),\n        c(0, y[l:h], 0),\n        col = \"red\")\n\n\n\n\n\n\n\n\n\n\n\n5.2.2 Stredná hodnota\nStredná hodnota spojite rozdelenej náhodnej premennej je\n\\[\\text{E}[X] = \\int_{-\\infty}^{\\infty} x f_X(x) dx,\\] ak \\(\\int_{-\\infty}^{\\infty} |x| f_X(x) dx &lt; \\infty.\\) Teda ide o hodnoty \\(x\\) váhované hustotou pravdepodobnosti \\(f_X(x).\\)\n\n\n5.2.3 Variancia\nVariancia hodnota spojite rozdelenej náhodnej premennej je\n\\[\\text{Var}[X] = \\text{E}[(X-\\text{E}[X])^2] = \\int_{-\\infty}^{\\infty} (x - \\text{E}(X))^2 f_X(x) dx,\\] ak \\(\\int_{-\\infty}^{\\infty} |x^2| f_X(x) dx &lt; \\infty.\\) Aj pre spojite rozdelenú náhodnú premennú platí \\(\\text{Var}[X] = \\text{E}[X^2] - (\\text{E}[X])^2.\\)\nSmerodajná odchýlka náhodnej premennej je (podobne ako pri diskrétnej náhodnej premennej) odmocnina z jej variancie\n\\[\\text{sd}[X] = \\sqrt{\\text{Var}[X]}.\\]\n\nPríklad 5.4 Majme náhodnú premennú \\(X\\), ktorá má nasledovnú funkciu hustoty \\(f_X(x) = \\frac{1}{2}e^{-x/2}\\) pre \\(x &gt; 0\\) inak \\(f_X(x)=0\\). Vypočítajte \\(\\text{Var}[X].\\)\n\\[\\begin{eqnarray*}\n\\text{E}[X] &=&\\int_{-\\infty}^{\\infty} x f_X(x) dx = \\int_{0}^{\\infty} x \\frac{1}{2}e^{-x/2} dx \\\\\n&=& \\left[x . \\left(-e^{-\\frac{x}{2}} \\right)\\right]^{\\infty}_0  - \\int_{0}^{\\infty} 1 . \\left(-e^{-\\frac{x}{2}} \\right) dx\\\\\n&=& 0 - 0 - \\left[2 e^{-\\frac{x}{2}} \\right]^{\\infty}_{0} = 0 - \\left(-2\\right) = 2 \\\\\n\\text{E}[X^2] &=& \\dots [\\text{dva krát per partes}] \\dots = 8 \\\\\n\\text{Var}[X] &=& \\text{E}[X^2] - \\left(\\text{E}[X]\\right)^2 = 8 - 2^2 = 4\n\\end{eqnarray*}\\]\n\n\n\n5.2.4 Kvantil\nMedián spojite rozdelenej náhodnej premennej \\(X\\), je taká hodnota \\(M\\), pre ktorú platí\n\\[P(X \\leq M)= P(X \\geq M) = 0.5.\\]\nMedián je taká hodnota, že napravo aj naľavo od nej je 50% pravdepodobnostnej masy.\nNižšie sú dáta vygenerované z tzv. lognormálneho rozdelenia (náhodná premenná \\(X\\) má lognormálne rozdelenie ak \\(\\log(X)\\) má normálne rozdelenie). Takéto rozdelenie je typické pre mzdy.\n\nx &lt;- seq(0,5,by=0.01)\ny &lt;- dlnorm(x, meanlog = 0, sdlog = 1, log = FALSE)\n\nplot(x, y, type=\"l\",\n     xlab = expression(x),\n     ylab = expression(f[X](x)),\n     ylim=c(0,1),\n     main = \"Funkcia hustoty, medián a stredná hodnota\")\nmm &lt;- exp(0.5)\nmed &lt;- qlnorm(0.5, meanlog = 0, sdlog = 1, lower.tail = TRUE, log.p = FALSE)\npoints(med,0,pch=19,col=\"red\")\nabline(v=med, col=\"red\", lty=2)\npoints(mm,0,pch=19,col=\"red\")\nabline(v=mm, col=\"red\")\n\n\n\n\n\n\n\n\nMedián je “hodnota v strede”. Na charakterizovanie pravdepodobnostnej distribúcie je častokrát zaujímavé pozrieť sa aj na kraje. Aspoň koľko zarába 5% najlepšie zarábajúcich? Aká je maximálna mzda 10% najhoršie zarábajúcich? Na toto odpovedá kvantil pravdepodobnostného rozdelenia.\n\\(p\\)-percentný kvantil pravdepodobnostného rozdelenia náhodnej premennej \\(X\\) je taká hodnota \\(Q_X(p)\\) pre ktorú platí\n\\[P(X \\leq Q_X(p)) = p.\\]\n\nplot(x, y, type=\"l\",\n     xlab = expression(x),\n     ylab = expression(f[X](x)),\n     ylim=c(0,1),\n     main = \"Funkcia hustoty, 10%ný a 90%ný kvantil\")\nmm &lt;- exp(0.5)\nq10 &lt;- qlnorm(0.1, meanlog = 0, sdlog = 1, lower.tail = TRUE, log.p = FALSE)\nq90 &lt;- qlnorm(0.9, meanlog = 0, sdlog = 1, lower.tail = TRUE, log.p = FALSE)\npoints(q10,0,pch=19,col=\"blue\")\nabline(v=q10, col=\"blue\", lty=2)\npoints(q90,0,pch=19,col=\"blue\")\nabline(v=q90, col=\"blue\", lty=2)\n\n\n\n\n\n\n\n\nPodobne ako pri diskrétnych náhodných premenných aj pri spojitých existujú rôzne. A niektoré sú natoľko zaujímavé, že ich rozdeleniam dávame špeciálne mená (rovnomerné rozdelenie, normálne rozdelenie, exponenciálne rozdelenie, chí-kvadrát rozdelenie, Studentovo rozdelenie a mnoho iných).",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Zopakovanie pojmov</span>"
    ]
  },
  {
    "objectID": "recap.html#demonštrácia-v-r",
    "href": "recap.html#demonštrácia-v-r",
    "title": "5  Zopakovanie pojmov",
    "section": "5.3 Demonštrácia v R",
    "text": "5.3 Demonštrácia v R\nVygenerujeme si pseudonáhodné čísla a zobrazíme spolu s histogramom.\n\nlibrary(ISwR)\n\n#set random seed\nset.seed(3214)\n\n#generate sample of size 50 from N(0,1)\nx &lt;- rnorm(50)\n\n#look at the histogram\nhist(x,freq=F)\nlines(seq(-3,3,0.01),dnorm(seq(-3,3,0.01)))\n\n\n\n\n\n\n\n\nVieme, že naša náhodná premenná má strednú hodnotu \\(0.\\) Ak by sme to nevedeli, mohli by sme ju odhadnúť pomocou aritmetického priemeru z našej iid vzorky na základe ZVČ\n\\[\\bar{X} = \\frac{\\sum_{i=1}^n X_i}{n}.\\]\n\n#sample mean\nmean(x)\n\n[1] 0.05538502\n\nsum(x)/length(x)\n\n[1] 0.05538502\n\n\nPodobne o variancii vieme, že je rovná 1. Mohli by sme ju odhadnúť na základe výberovej variancie\n\\[S^2 = \\frac{\\sum_{i=1}^n (X_i-\\bar{X})^2}{n-1}.\\] Všimnime si, že v menovateli je \\(n-1\\) a nie \\(n.\\) Pre veľké \\(n\\) je rozdiel zanedbateľný ale takto skonštruované \\(S^2\\) má tú výhodu, že je nevychýlené, teda \\(E[S^2] = Var(X).\\)\n\n#sample variance\nvar(x)\n\n[1] 1.36166\n\nsum((x-mean(x))^2)/(length(x)-1)\n\n[1] 1.36166\n\n#sample standard deviation\nsd(x)\n\n[1] 1.166902\n\nsqrt(sum((x-mean(x))^2)/(length(x)-1))\n\n[1] 1.166902\n\n\nPri výberovom mediáne (alebo výberovom p-percentnom kvantile) sa jednoducho pozrieme, že kde musíme rozseknúť usporiadané dáta tak, aby na jednej strane bola polovica a na druhej druhá polovica (alebo p% dát a (1-p)% dát). V prípade párneho počtu dátovej vzorky zoberieme priemer dvoch hodnôt.\n\n#sample median\nmedian(x)\n\n[1] 0.03214014\n\nsort(x)[round(length(x)/2)]\n\n[1] -0.04191173\n\n#quantile\nquantile(x)\n\n         0%         25%         50%         75%        100% \n-2.42931246 -0.64412779  0.03214014  0.85273497  2.37762984 \n\npvec &lt;- seq(0,1,0.1)\npvec\n\n [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0\n\n#look at different quantiles at once\nquantile(x,pvec)\n\n         0%         10%         20%         30%         40%         50% \n-2.42931246 -1.48084315 -1.09027299 -0.41158724 -0.29720847  0.03214014 \n        60%         70%         80%         90%        100% \n 0.32967235  0.72728231  0.91482027  1.64491004  2.37762984 \n\n\n\nPríklad 5.5 Simulačne odhadnite pravdepodobnosť \\(X \\in (-1.96,1.96)\\) pre \\(X \\sim N(0,1)\\).\n\nnSim &lt;- 1000000\nX &lt;- rnorm(nSim)\n1 - mean( (X &gt; -1.96) * (X &lt; 1.96) )\n\n[1] 0.050211",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Zopakovanie pojmov</span>"
    ]
  },
  {
    "objectID": "recap.html#cvičenia",
    "href": "recap.html#cvičenia",
    "title": "5  Zopakovanie pojmov",
    "section": "5.4 Cvičenia",
    "text": "5.4 Cvičenia\n\nCvičenie 5.1 Spočítajte varianciu náhodnej premennej \\(X \\sim Bin(10,0.25)\\) (súčet úspechov 10 nezávislých hodov neférovou mincou s pravdepodobnosťou hlavy 25%) a porovnajte so simuláciou.\n\n\nCvičenie 5.2 Spočítajte pravdepodobnosť toho, že počet zemetrasení \\(X \\sim Pois(2)\\) bude aspoň 3 a porovnajte so simuláciou.\n\n\nCvičenie 5.3 Spočítajte 95%ný kvantil \\(X \\sim N(3,4)\\) náhodnej premennej a porovnajte so simuláciou.\n\n\nCvičenie 5.4 Majme dve skupiny ľudí, ktorých IQ je charakterizované týmito rozdeleniami: \\(X_1 \\sim N(110,20^2)\\) a \\(X_2 \\sim N(120,5^2).\\) Prvá skupina má nižší priemer ale zasa vyššiu varianciu. Majme 10 ľudí z prvej skupiny a 5 ľudí z druhej skupiny. Odhadnite pravdepodobnosť, že človek z najvyšším IQ bude z druhej skupiny. Aká veľká by musela byť druhá skupina, aby bola táto pravdepodbnosť čo najbližšia 50%?\n\n\nCvičenie 5.5 Uvažujeme dva rôzne webshopy a ten istý produkt. Po istom čase pozbierali webshopy skúsenosti zákazníkov. V prvom bolo 24 z 25 ľudí spokojných, v druhom bolo 353 z 400 spokojných. Ľudia hodnotili produkt, nie webshop a produkt bol ten istý. Vieme, že šanca, že uvidíme aspoň 24 ľudí spokojných v prvom obchode je rovnaká ako to, že uvidíme aspoň 353 v druhom obchode. Aká je skutočná spokojnosť zákazníkov s týmto produktom?",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Zopakovanie pojmov</span>"
    ]
  },
  {
    "objectID": "depen.html",
    "href": "depen.html",
    "title": "6  Náhodné vektory a súvis medzi náhodnými premennými",
    "section": "",
    "text": "6.1 Závislosť náhodných premenných\nOdteraz budeme načas hovoriť o náhodnom vektore. Je to vektor náhodných premenných definovaných na rovnakom pravdepodobnostnom priestore. V tejto kapitole sme hovorili o dvojrozmernom náhodnom vektore, teraz to rozšírime a budeme hovoriť o \\(n\\)-rozmernom náhodnom vektore \\((X_1,X_2,\\dots,X_n)^T.\\)\nTento pojem kľúčový na pochopenie štatistického testovania hypotéz, o ktorom budeme hovoriť neskôr. Ide o triviálne rozšírenie dvojrozmerného náhodného vektora, ktorý sme opisovali skorej.\nZdružená kumulatívna distribučná funkcia \\(F_{X_1,X_2,\\dots,X_n}: \\mathbb{R}^n \\rightarrow [0,1]\\) náhodného vektora \\((X_1,X_2,\\dots,X_n)^T\\) je definovaná nasledovne:\nDiskrétne náhodné premenné\nAk sú časti náhodného vektora diskrétne rozdelené náhodné premenné, pravdepodobobnostné správanie popisujeme tiež združenou pravdepodobnostnou funkciou\nAby táto bola korektná, tak musí platiť\nSpojité náhodné premenné\nAk sú časti náhodného vektora spojite rozdelené, popisujeme pravdepodobnostné správanie pomocou združenej funkcie hustoty \\(f_{X_1,X_2,\\dots,X_n}(x_1,x_2,\\dots,x_n): \\mathbb{R}^n \\rightarrow \\mathbb{R}^{+},\\) ktorá spĺňa nasledovnú vlastnosť\nFunkcia hustoty musí spĺňať nasledovné vlastnosti\nVzťah medzi \\(f_{X_1,X_2,\\dots,X_n}\\) a \\(f_{X_1,X_2,\\dots,X_n}\\) je takýto:\n\\[F_{X_1,X_2,\\dots,X_n}(t_1, \\dots, t_n) = \\int_{-\\infty}^{t_1} \\dots \\int_{-\\infty}^{t_n} f_{X_1,X_2,\\dots,X_n}(x_1,x_2,\\dots,x_n) dx_1 \\dots dx_n\\] a\n\\[ f_{X_1,X_2,\\dots,X_n}(x_1,x_2,\\dots,x_n) = \\frac{\\partial^n}{\\partial x_1 \\dots \\partial x_n }F_{X_1,X_2,\\dots,X_n}(x_1,x_2,\\dots,x_n).\\]\nHovoríme, že náhodné premenné \\(X_1,X_2,\\dots,X_n\\) sú združene nezávislé, ak platí:\n\\[\\forall x_1 \\in \\mathcal{S}_{X_1}, \\dots, \\forall x_n \\in \\mathcal{S}_{X_n}:  p_{X_1,X_2,\\dots,X_n}(x_1,x_2,\\dots,x_n) = p_{X_1}(x_1) \\dots p_{X_n}(x_n),\\] ak sú diskrétne rozdelené a\n\\[\\forall x_1 \\in \\mathbb{R}, \\dots, \\forall x_n \\in \\mathbb{R}: f_{X_1,X_2,\\dots,X_n}(x_1,x_2,\\dots,x_n) = f_{X_1}(x_1) \\dots f_{X_n}(x_n).\\] ak sú spojite rozdelené.\nNezávislé náhodné premenné spolu vôbec nesúvisia. Preto informácia o správaní jednotlivých náhodných premenných je postačujúca na úplný popis celého pravdepodobnostného vektora.\nTeraz vieme, čo znamená keď sú náhodné premenné nezávislé. Keď sú dve, ale odteraz aj keď ich je viacej. Ak náhodné premenné nie sú nezávislé, mohli by sme chcieť merať ako veľmi sú závislé.\nJe veľa rôznych mier závislosti dvojíc náhodných premenných. Jednou z nich je korelácia, teda miera lineárnej závislosti.\nPripomeňme si ju:\nKovarianciou dvoch náhodných premenných \\(X_1, X_2\\) nazývame\n\\[\\text{Cov}[X_1,X_2] \\equiv \\text{E}[(X_1-\\text{E}[X_1])(X_2-\\text{E}[X_2])].\\]\nPre kovarianciu platí \\(\\text{Cov}[X_1,X_2] = \\text{E}[X_1 X_2] - \\text{E}[X_1]\\text{E}[X_2]\\) a \\(\\text{Cov}[X_i,X_i] = \\text{Var}[X_i].\\)\nKoreláciou (teda škálovanou kovarianciou) dvoch náhodných premenných nazývame\n\\[\\text{Corr}[X_1,X_2] \\equiv \\frac{\\text{Cov}[X_1,X_2]}{\\text{sd}[X_1] \\cdot \\text{sd}[X_2] } =  \\frac{ \\text{E}[(X_1-\\text{E}[X_1])(X_2-\\text{E}[X_2])]}{\\sqrt{\\text{E}[(X_1-\\text{E}[X_1])^2]}\\cdot\\sqrt{\\text{E}[(X_2-\\text{E}[X_2])^2]}}.\\]\nPre koreláciu platí:\nIlustratívny príklad s dinosaurom, kedy korelácia nedobre popisuje mieru závislosti, lebo závislosť nie je lineárna je tu.\nTu je Rkový kód, ktorý generuje dvojice dát s rôznymi závislosťami Takto vyzerá realizácia 100 náhodných vektorov \\((X,Y)\\) s rôznymi koreláciami.\npar(mfrow=c(2,3))\n\nlibrary(mvtnorm)\nset.seed(12922)\nrho &lt;- c(-0.9,-0.7,-0.6,-0.2,-0.1, 0, 0.15,0.3,0.4, 0.6,0.8,0.99)\nfor (iRho in 1:length(rho)){\n  x &lt;- rmvnorm(100,sigma=matrix(c(1,rho[iRho],rho[iRho],1),nrow=2))\n  plot(x[,1],x[,2],main=paste(\"Korelácia =\",rho[iRho]),xlab=\"X\",ylab=\"Y\")\n}\nKorelačná štruktúra náhodného vektora \\(X\\) je popísaná korelačnou maticou \\(\\text{Corr}[X]\\), ktorej \\(i,j\\)-ty prvok je daný \\(\\text{Corr}[X_i,X_j]\\):\n\\[{\\small \\text{Corr}[X] = \\begin{pmatrix}\n1 & \\text{Corr}[X_1, X_2] & \\cdots  & \\cdots & \\cdots  & \\text{Corr}[X_1, X_n]\\\\\n\\text{Corr}[X_2, X_1] & 1 & \\text{Corr}[X_2, X_3] & \\cdots & \\cdots & \\text{Corr}[X_2, X_n]\\\\\n\\text{Corr}[X_3, X_1] & \\text{Corr}[X_3, X_2]&  1 & \\text{Corr}[X_3, X_4] & \\cdots & \\text{Corr}[X_3, X_n]\\\\\n\\vdots & & \\ddots & \\ddots & &  \\vdots  \\\\\n\\vdots & & & \\ddots & \\ddots &   \\vdots  \\\\\n\\text{Corr}[X_n, X_1] & \\text{Corr}[X_n, X_2]& \\cdots & \\cdots & \\text{Corr}[X_n, X_{n-1}] & 1\n\\end{pmatrix}}\\]\nPodobne zadefinovaná je kovariančná matica \\(\\text{Var}[X]\\), ktorej \\(i,j\\)-ty prvok je daný \\(\\text{Cov}[X_i,X_j]\\).\n\\[{\\small \\text{Cov}[X] = \\begin{pmatrix}\n\\text{Var}[X_1] & \\text{Cov}[X_1, X_2] & \\cdots  & \\cdots & \\cdots  & \\text{Cov}[X_1, X_n]\\\\\n\\text{Cov}[X_2, X_1] & \\text{Var}[X_2] & \\text{Cov}[X_2, X_3] & \\cdots & \\cdots & \\text{Cov}[X_2, X_n]\\\\\n\\text{Cov}[X_3, X_1] & \\text{Cov}[X_3, X_2]&  \\text{Var}[X_3] & \\text{Cov}[X_3, X_4] & \\cdots & \\text{Cov}[X_3, X_n]\\\\\n\\vdots & & \\ddots & \\ddots & &  \\vdots  \\\\\n\\vdots & & & \\ddots & \\ddots &   \\vdots  \\\\\n\\text{Cov}[X_n, X_1] & \\text{Cov}[X_n, X_2]& \\cdots & \\cdots & \\text{Cov}[X_n, X_{n-1}] & \\text{Var}[X_n]\n\\end{pmatrix}}\\]\nTáto matica",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Náhodné vektory a súvis medzi náhodnými premennými</span>"
    ]
  },
  {
    "objectID": "depen.html#závislosť-náhodných-premenných",
    "href": "depen.html#závislosť-náhodných-premenných",
    "title": "6  Náhodné vektory a súvis medzi náhodnými premennými",
    "section": "",
    "text": "\\(-1 \\leq \\text{Corr}[X_1,X_2] \\leq 1\\), je bezrozmerná, t.j. nemá žiadne jednotky,\n\\(\\text{Corr}[X_1,X_2] = \\text{Corr}[X_2,X_1]\\) takže korelácia je symetrická,\n\\(\\text{Corr}[X_1,X_2] = \\pm 1 \\implies \\exists a,b \\in \\mathbf{R}: X_1 = aX_2+b\\), nadobúda hodnoty \\(\\pm 1\\) práve vtedy, keď je jedná náhodná premenná lineárnou funkciou druhej,\n\n\\(X_1\\) a \\(X_2\\) sú nezávislé \\(\\implies \\text{E}[X_1 X_2] = \\text{E}[X_1]\\text{E}[X_2] \\implies \\text{Corr}[X_1,X_2]=0\\)\n\n\n\n\n\n\n\n\n\n\nje symetrická (lebo \\(\\text{Cov}[X_i,X_j]=\\text{Cov}[X_j,X_j]\\)) a okrem toho\nje kladne semidefinitná, takže \\[a^T\\text{Var}[X]a \\geq 0,\\] pre akýkoľvek vektor \\(a \\in \\mathbb{R}^n.\\) Toto platí lebo \\(\\text{Var}[a^T X] = a^T\\text{Var}[X]a\\) a zároveň vieme, že \\(\\text{Var}[Z] \\geq 0\\) pre akúkoľvek náhodnú premennú a teda aj pre \\(Z=a^T X.\\)\n\n\nPríklad 6.2 Pozrime sa na korelácie rôznych premenných náhodnej podvzorky filmov z knižnice ggplot2movies.\n\nlibrary(ggplot2movies)\n\nset.seed(224)\nvars &lt;- c(\"year\",\"length\",\"budget\",\"rating\",\"votes\")\nind &lt;- sample(1:dim(movies)[1],1000)\ndata_sam &lt;- movies[ind,vars]\n\npairs(data_sam)\n\n\n\n\n\n\n\n\nAlebo krajší párový graf s využitím knižnice GGally.\n\noptions(warn = -1)\nlibrary(GGally)\n\nLoading required package: ggplot2\n\n\nRegistered S3 method overwritten by 'GGally':\n  method from   \n  +.gg   ggplot2\n\nggpairs(data_sam)\n\n\n\n\n\n\n\n\nKorelačné matice sa dajú rôzne zobraziť, aby odkomunikovali súvzťažnosť jednotlivých premenných. Tu sú nejaké príklady:\n\npar(mfrow=c(2,3))\nlibrary(corrplot)\n\ncorrplot 0.95 loaded\n\ncor_matrix &lt;- cor(data_sam,use=\"pairwise.complete.obs\")\ncorrplot(cor_matrix)\ncorrplot(cor_matrix, method = 'color', order = 'alphabet')\ncorrplot(cor_matrix, method = 'shade', order = 'AOE', diag = FALSE)\ncorrplot(cor_matrix, method = 'ellipse', order = 'AOE', type = 'upper')\ncorrplot.mixed(cor_matrix, order = 'AOE')\ncorrplot.mixed(cor_matrix, lower = 'shade', upper = 'pie', order = 'hclust')\n\n\n\n\n\n\n\n\n\n\nPríklad 6.3 Tu je situácia, keď je jedna premenná priamo lineárnou transformáciou druhej. Konkrétne \\(X_3 = 2-3X_2\\)\n\nset.seed(232)\nx1 &lt;- rnorm(100,20,1)\nx2 &lt;- rnorm(100,30,2)\nx3 &lt;- -3 * x2 + 2\ncor(cbind(x1,x2,x3))\n\n           x1         x2         x3\nx1  1.0000000 -0.1118414  0.1118414\nx2 -0.1118414  1.0000000 -1.0000000\nx3  0.1118414 -1.0000000  1.0000000\n\n\nTu vidíme, že \\(\\text{Corr}[X_1,X_2]=-1.\\)\nTeraz nech \\(X_3 = 2-3X_2^{1.1},\\) takže závislosť medzi \\(X_2\\) a \\(X_3\\) je “skoro” lineárna.\n\nx3 = -3 * x2^{1.1} + 2\ncor(cbind(x1,x2,x3))\n\n           x1         x2         x3\nx1  1.0000000 -0.1118414  0.1118155\nx2 -0.1118414  1.0000000 -0.9999870\nx3  0.1118155 -0.9999870  1.0000000\n\n\nTeraz vidíme, že \\(\\text{Corr}[X_1,X_2]\\) je “skoro” \\(-1\\).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Náhodné vektory a súvis medzi náhodnými premennými</span>"
    ]
  },
  {
    "objectID": "depen.html#korelácia-nie-je-kauzalita",
    "href": "depen.html#korelácia-nie-je-kauzalita",
    "title": "6  Náhodné vektory a súvis medzi náhodnými premennými",
    "section": "6.2 Korelácia nie je kauzalita",
    "text": "6.2 Korelácia nie je kauzalita\nToto ste počuli už mnohokrát.\nDoteraz sme nič nehovorili o tom, že čo je príčina, čo je následok, ako veci spolu kauzálne súvisia. A robili sme tak náročky. Pozrite sa na nasledujúci obrázok:\n\n\n\n\n\nKorelácia nie je to isté ako kauzalita. (zdroj: www.dreamstime.com)\n\n\n\n\nÚtoky žralokov sú veľmi silno korelované s objemom predanej zmrzliny. Ale neznamená to to, že jedno spôsobuje druhé. V tomto prípade majú obe premenné zjavne silnú časovú zložku. V lete je teplo, ľudia sa viacej kúpu a vtedy aj žraloky majú na koho útočiť. Na druhej strane v zime sa nám príliš nežiada studenej zmrzliny.\nNa idenfikovanie príčiny a dôsledku, na odlíšenie asociácie od kauzality potrebujeme nejaký zdroj náhody. Ako v prípade randomizovanej štúdie v medicíne. Náhodne rozdelíme pacientov/tky na tých, ktorí dostanú liek a tých ktorí dostanú placebo. Ak sú tieto vzorky naozaj podobné (a ak máme pacientov/tky dostatočne veľa, tak budú podobné), tak je to naozaj ten liek a nie niečo iné čo mení prognózu pacienta/tky.\nVo všeobecnosti je ťažké odlíšiť koreláciu od kauzality. Pozorované dáta, ktoré sú neexperimentálne, nás len málokedy informujú priamo o kauzálnom efekte. Zamyslite sa nad tým keď budete nabudúce pri rannej káve čítať noviny o tom, koľko káv denne Vám predĺži/skráti život.\n\nPríklad 6.4 Toto je obrovská otázka, ktorej sa venuje veľká časť ekonómie pracovného trhu (labor economics). V dátach vidíme, že vzdelaní ľudia zarábajú v priemere viacej. Znamená to, že absolovovanie vysokej školy zvýši Vašu mzdu?\n\n\nPríklad 6.5 Mať malé triedy je drahé. Plat učiteľa/ľky je tým najvýznamnejším nákladom pri vzdelávaní. Oplatí sa mať triedy kde bude menej žiakov/čok?\n\n\nPríklad 6.6 Niekedy nie sú experimentálne dáta dostupné z etických alebo iných príčin (nemôžem jednu skupinu náhodne vybraných ľudí prinútiť fajčiť, inej to zasa zakázať). Napriek tomu máme množstvo mechanizmov, ktorých pochopenie nám umožňuje porozumieť mechanizmu príčiny a následku napriek neexistencii experimentálnych dát. Dokonca Sir Ronald Fisher, jeden z najvýznamnejších štatistikov upozorňoval, že na základe korelácie nemožno odvodiť kauzálne závery. Dnes už je absolútny vedecký konsenzus o škodlivosti fajčenia. Napriek neexistencii experimentu. Mimochodom, Fisher bol tuhý fajčiar.\n\nZamyslite sa, prečo je náročné odpovedať na tieto otázky:\n\nOvplyvňuje vzdelanie rodičov vzdelanie deti?\nPredlžujú tri malé kávy denne život o 7%?\nJe Keto diéta lepšia ako vysokosacharidová, čo sa týka vytrvalostných šport?\nZvyšuje globalizácia životnú úroveň?\nPomáha chrániť vitamín C pred nachladnutím?\nSpôsobí zvýšenie dane z príjmu štátne príjmy alebo narastie objem čiernej práce?\nJe skríningové vyšetrenie vzácneho typu rakoviny vhodné?\nVedie polarizácia spoločnosti k nárastu preferencií politických strán ďalej od stredu?\nZvyšuje nedostatok spánku šancu Alzheimerovej choroby?\n\nTo, že je to náročné však neznamená, že to nie je možné. V mnohých situáciách experiment nie je možný a preto svoje porozumenie problému skladáme z veľkého množstva malých dielčích indícií.\n\n\n\n\n\n(zdroj: www.pixabay.com)",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Náhodné vektory a súvis medzi náhodnými premennými</span>"
    ]
  },
  {
    "objectID": "depen.html#cvičenia",
    "href": "depen.html#cvičenia",
    "title": "6  Náhodné vektory a súvis medzi náhodnými premennými",
    "section": "6.3 Cvičenia",
    "text": "6.3 Cvičenia\n\n\n\nCvičenie 6.1 Pozrite sa na korelačnú štruktúru premenných v nasledovnom dasete o autách.\n\ndata_car &lt;- read.csv(\"http://www.r-exercises.com/wp-content/uploads/2017/04/auto.csv\")\n\n\n\nCvičenie 6.2 Pomocou simulácie overte vzťah \\(\\text{Var}[a^T X] = a^T\\text{Var}[X]a\\) pre nejakú voľbu trojrozmerného náhodného vektora \\(X\\), ktorý vygenerujte s viacrozmerného normálneho rozdelenia pomocou funkcie rmvnorm z knižnice mvtnorm. Vyskúšajte rôzne trojrozmerné vektory \\(a\\).\n\n\nCvičenie 6.3 Nech \\(X_3 = 3X_1 + X_2,\\) kde \\(X_1 \\sim N(20,3^2)\\) a \\(X_2 \\sim N(30,6^2)\\) a zároveň \\(X_1\\) a \\(X_2\\) sú nezávislé.\n\nAká je variancia \\(X_3\\)?\nAká je kovariancia \\(X_2\\) a \\(X_3\\)?\nAká je korelácia \\(X_2\\) a \\(X_3\\)?\n\nPorovnajte teoretické hodnoty s tými, ktoré ste odhadli pomocou simulácií.\nPreskúmajte variabilitu Vašich odhadov. Aká počet simulácií je dostatočný na uspokojivú odpoveď (teoretické hodnoty sú dostatočne blízke tým, ktoré sú odhadnuté pomocou simulácií.)?\n\n\nCvičenie 6.4 Vhodne zobrazte korelačnú maticu premenných: koncentrácie ozónu, úrovne slnečného žiarenia, rýchlosti vetra a teploty z datasetu airquality z knižnice datasets.\n\n\nCvičenie 6.5 Dataset EuStockMarkets z knižnice datasets obsahuje denné dáta cien Európskych burzových indexov počas 90-tych rokov. Zobrazte ich do prehľadného grafu. Naviac zobrazte korelačnú štruktúru denných výnosov (výnos v dni \\(t\\) je definovaný ako \\(\\frac{p_{t}-p_{t-1}}{p_{t-1}},\\) kde \\(p_t\\) je cena cenného papiera na konci dňa \\(t\\).).\n\n\nCvičenie 6.6 Dataset USArrests z knižnice datasets má informácie o zatknutiach na 100’000 obyvateľov pre rôzne Americké štáty v roku 1973. Zobrazte korelačnú štruktúru týchto dát, pozrite sa ako sú asociované rôzne typy zatknutí s percentom ľudí žijúcich v mestách.\n\n\nCvičenie 6.7 V datasete mtcars z knižnice datasets sú informácie o 32 autách z roku 1974. Pozrite sa korelačnú štruktúru týchto premenných.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Náhodné vektory a súvis medzi náhodnými premennými</span>"
    ]
  },
  {
    "objectID": "visual.html",
    "href": "visual.html",
    "title": "7  Zobrazovanie dát",
    "section": "",
    "text": "7.1 Zlé vizualizácie\nVhodné zobrazenie dát je tak trochu umenie. Treba nájsť vhodný typ grafu, farieb, písiem na plynulé odkomunikovanie myšlienky. Čo umenie nie je, je urobiť zlú vizualizáciu.\nPri nasledujúcich obrázkov nebude príliš ťažké pochopiť, v čom sú problematické. V niektorých prípadoch ide o subjektívne hodnotenie.\nČastokrát proporcie nie sú zachované. Toto môže byť použité ako manipulatívna stratégia na demonštrovanie veľkého rastu.\nObrovský nárast?\nSpäťnásobila sa minimálna mzda medzi 2012 a 2017?\nKoláčové grafy sú notoricky problematické a snažíme sa im vyhýbať, najmä ak je kategórií viacej a proporcie sú náročné na porovnávanie. Špeciálne zlé sú vždy a všade 3D koláčové grafy. Tie nesmierne skresľujú porovnávanie.\nKoláčové grafy radšej nie.\nTrojrozmerné alebo aj dvojrozmerné piktogramy sú problematické tiež. Ak je ich úlohou oživiť prezentáciu, tomu sa dá porozumieť. Vyhýbame sa aj 3D prvkom.\nBolo predajov domov v 2001 dvakrát viacej, štyrikrát viacej alebo osemkrát toľko ako v roku 2000?\nZdroj: vlastná tvorba.\nNiekedy sú vizualizácie zlé lebo sú necitlivé, ako v týchto dvoch prípadoch.\nNaozaj to nešlo zobraziť nudnejšie?\n.\nEnergia využitá na tvorbu tejto prezentácie nebola múdra investícia.\nNiekedy príliš kreatívna ba priam manipulatívna transformácia vertikálnej osi chce pomôcť niečo odkomunikovať (napríklad nie príliš prudký nárast).\nČo je to na vertikálnej osi?",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Zobrazovanie dát</span>"
    ]
  },
  {
    "objectID": "visual.html#dobré-vizualizácie",
    "href": "visual.html#dobré-vizualizácie",
    "title": "7  Zobrazovanie dát",
    "section": "7.2 Dobré vizualizácie",
    "text": "7.2 Dobré vizualizácie\nDobrá vizualizácia je ako Rembrandtova kresba. Zaujme, odomunikuje emóciu, príbeh, vzbudí záujem a núti klásť otázky.\nPozrime sa na nasledovný obrázok.\n\n\n\n\n\n\n\n\n\nOkamžite si všimneme dominantné postavenie písmena n na pravej strane. Ktoré sú to tie krstné mená, ktoré končia na n? Prečo sa distribúcia tak zmenila? Človek má chuť okamžite hľadať, ktoré sú to mená(?) (John, Brandon, Ryan, Jonathan, Christian, Austin, Dylan, Ethan, Benjamin…). Tak či onak, tento obrázok je úspešný v tom, že zaujme.\nVšimnime si vzťah medzi výdavkami na zdravotnú starostlivosť a očaká vanou dĺžkou života.\n\n\n\n\n\n\n\n\n\nZvýraznené dve krajiny - USA a Mexiko sú susedné. Je okamžite zreteľné, že USA sú veľmi iné ako ostatné ekonomicky rozvinuté štáty. Namiesto sledovania čísel v tabuľkách máme túto informáciu okamžite.\nPodobným príkladom, z ktorého vyvstáva mnoho otázok je tento:\n\n\n\n\n\n\n\n\n\nUSA je ohromne iná krajina, čo sa týka zbraní. Veľmi veľmi iná. Grafické zobrazenie nám umožní tento rozdiel “pocítiť”, tým, že vidíme vzdialenosti. Porovnáme si najextrémnejšie protipóly v ostatku sveta - Filipíny a India. Vidíme ako sú vzdialené Rusko a Čína. Žiadne z týchto rozdielov ani zďaleka neobsiahnu rozdiel medzi USA a zvyškom sveta.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Zobrazovanie dát</span>"
    ]
  },
  {
    "objectID": "visual.html#vizualizácia-v-rku-ggplot2-knižnica",
    "href": "visual.html#vizualizácia-v-rku-ggplot2-knižnica",
    "title": "7  Zobrazovanie dát",
    "section": "7.3 Vizualizácia v Rku: ggplot2 knižnica",
    "text": "7.3 Vizualizácia v Rku: ggplot2 knižnica\nKnižnica ggplot2 je veľmi populárnym spôsobom na vytváranie vizualizácií. Má vnútornú logiku: každý objekt sa skladá z vrstiev, ktoré majú určité atribúty. Názov ggplot2 pochádza z “Grammar of Graphics”.\n\n7.3.1 Zobrazenie závislosti dvoch premenných\nZačnime príkladom, zobrazme si spotrebu aút (dataset mpg z knižnice ggplot2), konkrétne vzťah medzi diaľničným dojazdom v míľach hwy oproti objemu motora v litroch displ.\n\nlibrary(ggplot2)\n\nggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy))\n\n\n\n\n\n\n\n\nTento príkaz inicializuje grafické okno, dáta, teda parameter data vstupujú vo formáte data.frame. Funkcia geom_point() zobrazuje jednu vrstvu, konkrétne body. Táto potrebuje\n\ndata - tie sú už zadefinované globálne v rámci grafického okna ggplot\nmapping - musíme vedieť, ktoré premenné majú byť na osiach. Hodnota aes(x = displ, y = hwy) nastaví horizontálnu os na premennú displ a vertikálnu os na hwy\n\nV datasete máme informáciu aj o tom, v akej triede je auto (class). Túto informáciu môžeme zobraziť rôznymi spôsobmi: napríklad nastavením\n\nfarby (color)\npriesvitnosti (alpha)\ntvaru (shape)\n\nbodov.\nRovnaký výsledok dostaneme aj pomocou použitia pipeline-u %&gt;% z knižnice dplyr. Knižnica tidyverse rovno načíta ggplot2 aj dplyr.\n\nlibrary(tidyverse)\nmpg %&gt;%\n  ggplot() + \n    geom_point(mapping = aes(x = displ, y = hwy))\n\nGrafické parametre môžeme nastaviť aj nezávisle od hodnôt nejakej premennej. Tieto parametre sú nastavené špecificky pre vrstvu geom_point. Nižšie je príklad keď je skombinovaná jedna vrstva s druhou. V druhej vrstve je vybraný iný parameter data, konkrétne len tie autá, ktoré majú 4 valce. Pre viacero príkladov stačí keď do konzoly zadáte vignette(\"ggplot2-specs\").\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ lubridate 1.9.3     ✔ tibble    3.2.1\n✔ purrr     1.0.2     ✔ tidyr     1.3.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(cowplot)\n\n\nAttaching package: 'cowplot'\n\nThe following object is masked from 'package:lubridate':\n\n    stamp\n\ng1 &lt;- ggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy, color = class))\n\ng2 &lt;- ggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy, alpha = class))\n\ng3 &lt;- ggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy, shape = class))\n\ng4 &lt;- ggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy), \n             color = \"blue\",  alpha = 0.5, shape = 2) +\n  geom_point(data = mpg %&gt;% filter(cyl == 4),\n             mapping = aes(x = displ, y = hwy), \n             color = \"red\",  alpha = 0.3, shape = 1, \n             size = 4)\n\nplot_grid(g1, g2, g3, g4, ncol = 2, labels = \"AUTO\")\n\n\n\n\n\n\n\n\nMôžeme sa pozerať na závislosť premenných hwy a displ pre rôzne kombinácie typu pohonu drv (predný, zadný, 4x4) a počet valcov cyl.\n\nggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy)) + \n  facet_grid(~drv)\n\n\n\n\n\n\n\nggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy)) + \n  facet_grid(cyl ~ drv)\n\n\n\n\n\n\n\n\nParametre data a mapping môžu ísť priamo do ggplot objektu, takže ich netreba separátne volať pre rôzne vrstvy. Tu je navyše vrstva geom_smooth, ktorá vyhladí dáta - preloźí nimi aproximačnú krivku.\n\nggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + \n  geom_point() +\n  geom_smooth()\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nRko nás upozorní, ktorú vyhladzovaciu krivku použilo.\nNasledujúci kód uloží obrázok ako vo formáte pdf s danými veľkosťami.\n\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n7.3.2 Zobrazenie distribúcie premennej\nVygenerujme si dáta, ktore budeme zobrazovať (inšpirované nasledovných odkazom).\n\nset.seed(2930)\ndata_test &lt;- data.frame(\n              school=factor(rep(c(\"8r_gym\", \"4r_gym\"), each=40)),\n              score=round(c(rnorm(40, mean=75, sd=8), rnorm(40, mean=65, sd=5)))\n              )\n\nggplot(data = data_test, mapping = aes(x=score)) + \n  geom_histogram()\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\nTu si skúsime ponastavovať rôzne vlastnosti vrstvy geom_histogram. Vertikálnu čiaru pridáme pomocou geom_vline a odhad hustoty cez geom_density.\n\ng1 &lt;- ggplot(data = data_test, mapping = aes(x=score)) + \n        geom_histogram(binwidth=1, color=\"black\", fill=\"white\")\n\ng2 &lt;- ggplot(data = data_test, mapping = aes(x=score)) + \n        geom_histogram() +\n        geom_vline(aes(xintercept=mean(score)),\n            color=\"blue\", linetype=\"dashed\", size=1)\n  \ng3 &lt;- ggplot(data = data_test, mapping = aes(x=score)) + \n        geom_histogram(aes(y=..density..)) + \n        geom_density(alpha=.2, fill=\"red\") \n  \ng4 &lt;- ggplot(data = data_test, mapping = aes(x=score)) + \n        geom_histogram()\n        \n\nplot_grid(g1, g2, g3, g4, ncol = 2, labels = \"AUTO\")\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\nPozrite sa na tento kód a zhodnoťte, čo robí ten ktorý príkaz.\n\nlibrary(dplyr)\nmu &lt;- data_test %&gt;% group_by(school) %&gt;% summarise(group_means = mean(score))\n\nggplot(data_test, aes(x=score, color=school, fill=school)) +\ngeom_histogram(aes(y=..density..), position=\"identity\", alpha=0.5)+\ngeom_density(alpha=0.6)+\ngeom_vline(data=mu, aes(xintercept=group_means, color=school),\n           linetype=\"dashed\")+\nscale_color_manual(values=c(\"#999999\", \"#E69F00\", \"#56B4E9\"))+\nscale_fill_manual(values=c(\"#999999\", \"#E69F00\", \"#56B4E9\"))+\nlabs(title=\"Score histogram\",x=\"Score(points)\", y = \"Density\")+\ntheme_classic() +\ntheme(legend.position=\"bottom\")\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\nNa zobrazovanie distribúcie je užitočný aj boxplot. Nasledujúce obrázky (inšpirované týmto odkazom) sú vytvorené pomocou vrstiev geom_boxplot, geom_dotplot a geom_jitter.\n\ng1 &lt;- ggplot(data = data_test, mapping = aes(x = school, y = score)) + \n        geom_boxplot()\n\ng2 &lt;- g1 +\n        geom_dotplot(binaxis='y', stackdir='center', dotsize=1)\n\ng3 &lt;- g1 +\n        geom_jitter(shape=16, position=position_jitter(0.1))\n  \ng4 &lt;- ggplot(data = data_test, mapping = aes(x = school, y = score, color = school)) + \n        geom_boxplot() + \n        geom_jitter(shape=16, position=position_jitter(0.1))\n\ng5 &lt;- ggplot(data = data_test, mapping = aes(x = school, y = score, fill = school)) + \n        geom_boxplot() + \n        geom_jitter(shape=16, position=position_jitter(0.1))\n\ng6 &lt;- ggplot(data = data_test, mapping = aes(x = school, y = score, fill = school)) + \n        geom_boxplot() + \n        geom_jitter(shape=16, position=position_jitter(0.1)) +\n        scale_fill_grey() + \n        theme_classic()\n\nplot_grid(g1, g2, g3, g4, g5, g6, ncol = 2, labels = \"AUTO\")\n\nBin width defaults to 1/30 of the range of the data. Pick better value with\n`binwidth`.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Zobrazovanie dát</span>"
    ]
  },
  {
    "objectID": "visual.html#niektoré-princípy",
    "href": "visual.html#niektoré-princípy",
    "title": "7  Zobrazovanie dát",
    "section": "7.4 Niektoré princípy",
    "text": "7.4 Niektoré princípy\nIndividuálnym výstupom rozumieme na základe porovnávania podobných objektov.\nToto si vždy opakujeme, keď si nie sme nejakou voľbou istí. Toto je vynikajúca séria článkov od Lisy Charlotte Muth, odporúčam tiež prehľadový článok, knihu o prezentáciách a vizualizáciách od Jonathana Schwabisha.\n\nZvoľte správny typ grafu.\nSumárne štatistiky zavádzajú.\n\n\n\n\n\n\nTieto dátové vzorky majú rovnaké sumárne štatistiky.\n\n\n\n\n\nJe užitočné zobraziť surové dáta.\nDátový bod = jedna machuľa atramentu.\nĎalšie machule pridávame len ak nám pomôžu pochopiť niečo nové.\nVyužite moment prekvapenia vo svoj prospech.\nZvýraznite dôležité elementy grafu. Napríklad ten najdôležitejší dátový bod alebo podskupinu. Označovať môžete priamo v grafe aj textom.\nZjednodušujte. Vynechajte nepotrebné grafické elementy, menej je niekedy viacej.\nGraf by mal byť samovysvetľujúci, na jeho základné pochopenie by malo stačiť pozrieť sa na graf a príslušný popis.\nOznačenie osí musí byť zrozumiteľné. Prispôsobte tomu veľkosť a typ písma. V počítačovej podobe preferujeme písmo bez pätiek. V tlačenej podobne naopak pätkové písmo. Čísla sa lepšie porovnávajú ak sú tabulované (majú rovnakú šírku) a liniovité (majú rovnakú výšku).\nFarebné elementy lepšie vyniknú na sivom alebo (ako čistobielom) podklade. Bezpečnou voľbou na podklad je tiež teplá, veľmi svetlá a málo saturovaná farba. Farby sa zväčša používajú na vysvetľovanú premennú, nie na prediktory. Volíme menej farieb ak sa to dá, napríklad spojených niektorých kategórií a ideálne volíme farebnú škálu zrozumiteľnú aj pre čiastočne farboslepých. Farbám sa môžeme vyhnúť aj tak, že skupiny odlíšime symbolmi, vzormi alebo typom čiary. Rôzne mediá, inštitúcie alebo spoločnosti používajú fixné farebné palety aby bola prezentácia farebne jednotná.\n\n\n\n\n\n\nVybrať si vhodnú farebnú identitu je náročné. Zdroj: https://blog.datawrapper.de/colors-for-data-vis-style-guides/\n\n\n\n\n\nV prípade rôznych názorov je užitočné hľadať konsenzus v tíme.\n\nIndividuálnym výstupom rozumieme na základe porovnávania podobných objektov.\n\n\nNa tomto linku nájdete tiež časť Bc. práce Daniely Rušinovej, ktorá spracovala tému vizualizácie do prístupnej webstránky s mnohými príkladmi.\nKu každému príkladu je tiež R-kód.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Zobrazovanie dát</span>"
    ]
  },
  {
    "objectID": "visual.html#cvičenia",
    "href": "visual.html#cvičenia",
    "title": "7  Zobrazovanie dát",
    "section": "7.5 Cvičenia",
    "text": "7.5 Cvičenia\n\n\n\n\n\nCvičenie 7.1 Použite túto náhodnú podvzorku filmov z knižnice ggplot2movies.\n\nlibrary(ggplot2movies)\nlibrary(eatATA)\nset.seed(224)\nvars &lt;- c(\"year\",\"length\",\"budget\",\"rating\",\"votes\")\ncatVars &lt;- names(movies)[18:23]\nind &lt;- which(rowSums(movies[,18:23])==1)\nind2 &lt;- sample(ind,1000)\ndata_sam &lt;- movies[ind2,c(vars, catVars)]\ndata_sam &lt;- dummiesToFactor(data_sam, catVars, facVar = \"category\")\ndata_sam &lt;- data_sam %&gt;% mutate(era = as.factor(50*floor(data_sam$year/50)))\nlevels(data_sam$era) &lt;- c(\"1850-1899\", \"1900-1949\", \"1950-1999\", \"2000-\")\n\nČo presne sme tu urobili?\nTeraz zreprodukujte tieto grafy:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\nBin width defaults to 1/30 of the range of the data. Pick better value with\n`binwidth`.\n\n\n\n\n\n\n\n\n\n(Pri poslednom grafe potrebujete vytvoriť novú premennú.)",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Zobrazovanie dát</span>"
    ]
  },
  {
    "objectID": "visual.html#bonus",
    "href": "visual.html#bonus",
    "title": "7  Zobrazovanie dát",
    "section": "7.6 Bonus",
    "text": "7.6 Bonus\nDáta vedia rozprávať príbehy. Je dôležité pozerať sa na dáta z rôznych strán, uhlov, aby sme pochopili do hĺbky všetky skryté súvislosti v ich plnej rozmanitosti.",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Zobrazovanie dát</span>"
    ]
  },
  {
    "objectID": "ttest.html",
    "href": "ttest.html",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "",
    "text": "8.1 Jednovýberové testy\nMajme dve skupiny a chceli by sme vedieť, či sú tieto skupiny rôzne.\nMáme však v dispozícii len vzorku limitovanej veľkosti. Častokrát nás zaujíma, či sa tieto dve skupiny líšia v strednej hodnote. Nie je to samozrejme úplne to isté, ako to, že sú celé distribúcie týchto dvoch skupín rovnaké ale je to dobrý štart. A je to zaujímavé a zrozumiteľné.\nZačnime jednoduchým príkladom. Porovnajme dve vzorky náhodných premenných. Jedna náhodná premenná bude mať strednú hodnotu 1, druhá 1.2. \\(X_1 \\sim N(1,1)\\) a \\(X_2 \\sim N(1.2,1).\\)\nVygenerujme si vzorky veľkosti 30 a zakreslime:\nJe \\(n=30\\) pozorovaní dosť na to, aby sme rozlíšili medzi týmito dvomi vzorkami? Nezabúdajme, že v realite máme len jednu vzorku.\nSkúsme \\(n=300.\\)\nOK, lepšie.\nSkúsme teraz \\(n=10000.\\)\nVyskúšali sme si a dozvedeli sme sa jednu neprekvapivú vec. S rastúcim počtom pozorovaní vieme dobre odlíšiť aj malý rozdiel medzi premennými.\nV realite my samozrejme nevieme z akej distribúcie tie dve vzorky pochádzajú.\nTeraz budeme mať len jednu vzorku pozorovaní. Náhodnú iid vzorku veľkosti \\(n\\).",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#jedno",
    "href": "ttest.html#jedno",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "",
    "text": "8.1.1 Test na základe normálnej aproximácie (Z-test)\nZačneme najjednoduchším prípadom. Prepokladajme, že naše pozorovania pochádzajú z normálneho rozdelenia s neznámou strednou hodnotou a s neznámou varianciou. Nech ide o zmenu výsledku na teste. Študent absolvuje test na začiatku semestra a potom (podobný) test na konci semestra. A chceli by sme vedieť či sa výsledky zlepšili. Teda, že či sa študenti niečo naučili.\n\nset.seed(437)\ndata_test &lt;- data.frame(cas=factor(rep(c(\"pred\", \"po\"), each=30)),\n                        test= c(rnorm(30, mean=50, sd=10), \n                                 rnorm(30, mean=65, sd=5))\n                          )\n\nzmena &lt;- data_test$test[which(data_test$cas==\"po\")] - data_test$test[which(data_test$cas==\"pred\")]\n\nggplot(data=as.data.frame(zmena),aes(x=zmena)) +\n  geom_histogram(aes(y=..density..), position=\"identity\", \n                   alpha=0.5,\n                   bins=30)+\n    geom_density(alpha=0.6)\n\n\n\n\n\n\n\nmean(zmena)\n\n[1] 18.25302\n\n\nVäčšina študentov sa zlepšila ale nájdu sa aj takí, ktorí sa dokonca zhoršili, konkrétne traja. Priemerné zlepšenie je \\(18.25\\).\nChceli by sme vedieť či je stredná hodnota väčšia ako \\(15\\) alebo nie. Nuž vidíme, že v našom prípade je o \\(3.25\\) viacej. Ako veľmi si ale môžeme byť tým istí?\nNa to aby sme to vedeli posúdiť potrebujeme nejakým spôsobom odhadnúť ako veľa je variability v tom čísle \\(18.25,\\) ako blízko by sme očakávali, že má byť k čislu 15. Ako sme videli, čím viacej máme pozorovaní tým menej neistoty je v tom, ako ďaleko je tento aritmetický priemer (18.25) od skutočného populačného priemeru (15). Zo sekcie o zákone o veľkých čislach vieme, že\nAk \\(X_1, X_2, X_3, \\dots {\\text{iid} }, \\text{E}[X_1] = \\mu, \\text{Var}[X_1] = \\sigma^2 \\implies \\bar{X}_n \\equiv \\frac{X_1 + X_2 + \\dots + X_n}{n} \\rightarrow_D N(\\mu, \\frac{\\sigma^2}{n}),\\)\npokiaľ \\(X_1, X_2,...\\) sú združene nezávislé a rovnako rozdelené (iid = independent and identically distributed) náhodné premenné.\nTakže vidíme, že variancia nášho odhadu klesá proporionálne veľkosti dátovej vzorky \\(n.\\)\nZ tohoto máme, že \\[\\sqrt{n}(\\bar{X}_n - \\mu) \\rightarrow_D N(0,\\sigma^2),\\] takže \\[\\sqrt{n}\\frac{\\bar{X}_n - \\mu}{\\sigma} \\rightarrow_D N(0,1).\\] Čo nám z toho vyplýva? Nuž, že vieme čosi povedať o pravdepodobnostnom správaní priemeru, za predpokladu, že vieme strednú hodnotu \\(\\mu\\) a varianciu \\(\\sigma^2.\\) A čo s tou smerodajnou odchýlkou \\(\\sigma\\)? Vieme ju odhadnúť pomocou výberovej smerodajnej odchýlky \\(S,\\) ktorá je odmocninou z výberovej variancie \\(S^2\\):\n\\[S^2 = \\frac{\\sum_{i=1}^n(X_i - \\bar{X}_n)^2}{n-1}.\\] Vieme, že \\(S^2 \\rightarrow_P \\sigma^2,\\) kde symbol \\(\\rightarrow_P\\) označuje konvergenciu podľa pravdepodobnosti. Preto\n\\[Z \\equiv \\sqrt{n}\\frac{\\bar{X}_n - \\mu}{S} \\rightarrow_D N(0,1).\\]\n\n( S2 &lt;- sum((zmena-mean(zmena))^2/(length(zmena)-1)) )\n\n[1] 154.5722\n\nvar(zmena) \n\n[1] 154.5722\n\nsqrt(var(zmena))\n\n[1] 12.43271\n\n\nČo sme sa dozvedeli? Ak by bola stredná hodnota \\(\\mu\\) skutočne rovná 15, potom by \\(Z\\) mala byť (približne) \\(N(0,1)\\) rozdelená.\nV našom prípade máme len jednu realizáciu \\(Z\\), a to konkrétne \\[\\sqrt{30}\\frac{18.25-15}{12.43} = 1.43.\\] Ako veľmi je táto jedna hodnota 1.43 kompatibilná s normálnym rozdelením? Pozrime sa na obrázok.\n\nx  &lt;- seq(-3,3,by=0.1)\nfx &lt;- dnorm(x)\ndf &lt;- data.frame(x=x,y=fx)\nggplot(df,aes(x,y)) +\n  geom_line() +\n  geom_vline(xintercept=1.43, col = \"red\") +\n  theme_classic()+\n  labs(y=\"hustota N(0,1)\")\n\n\n\n\n\n\n\n\nAko to kvantifikovať? No môžeme spočítať pravdepodobnosť ešte extrémnejšej situácie. To je oblasť vyšrafovaná nižšie:\n\n\n\n\n\n\n\n\n\nA je rovná \\[\\int_{1.43}^{\\infty} \\phi(x) dx = 1-\\Phi(1.43) = 0.076,\\] kde\n\n1 - pnorm(1.43)\n\n[1] 0.07635851\n\n\n\\(\\phi(x) = \\frac{1}{2\\pi}e^{-\\frac{x^2}{2}},\\) takže funkcia hustoty normovaného normálneho rozdelenia.\nTo znamená, že ak by sme opakovali takýto pokus\n\nzozbierali 30 iid pozorovaní\nskutočná stredná hodnota bola \\(\\mu = 15\\)\nspočítali sme \\(S^2\\) a následne \\(Z = \\sqrt{n}\\frac{\\bar{X}_n - \\mu}{S}\\)\n\nTak takéto \\(Z\\) by malo normálne rozdelenie a hodnotu väčšiu ako 1.43 by sme dostali zhruba v \\(7.6\\%\\) prípadov. Je to veľa, je to málo? To záleží od toho ako veľmi ste ochotní sa mýliť. Každopádne je to číslo zrozumiteľné a hovorí nám to ako veľmi je číslo \\(\\mu = 15\\) kompatibilné s našimi dátami. Tomuto hovoríme jednostranný test nulovej hypotézy \\(\\mu=15\\) voči alternatíve \\(\\mu &gt; 15\\) na základe normálnej aproximácie. Hodnota 0.076 sa nazýva p-hodnota tohoto testu.\nMohli by sme uvažovať extrémnosť situácie oboma smermi. Takže by sme pripúšťali, že študenti sa môžu zlepšiť aj menej ako o 15 bodov. V tom prípade by sme kvantifikovali kompatibilnosť 1.43 s dátami takto:\n\n\n\n\n\n\n\n\n\nKedže distribúcia normovanej normálnej náhodnej premennej je symetrická, dostávame \\[\\int_{-\\infty}^{-1.43} \\phi(x) dx + \\int_{1.43}^{\\infty} \\phi(x) dx = \\Phi(-1.43) + 1-\\Phi(1.43)= 2(1-\\Phi(1.43)) = 2 \\cdot 0.076 = 0.152.\\] Tomuto hovoríme obojstranný test nulovej hypotézy \\(\\mu=15\\) voči alternatíve \\(\\mu \\neq 15\\) na základe normálnej aproximácie. Hodnota 0.152 sa nazýva p-hodnota tohoto testu.\n \nAko to funguje v praxi? Tu je vysvetlenie spolu so slovníkom:\n\nZvolím si nulovú hypotézu, ktorú chcem otestovať (napr. \\(\\mu=15\\)). K nej si zvolím alternatívnu hypotézu (napr. \\(\\mu &gt; 15\\)).\nZvolím si hladinu významnosti \\(\\alpha\\). Napríklad \\(\\alpha = 0.05.\\) To znamená, že si poviem, ako veľmi som ochotný sa mýliť v zmysle, že zamietnem pravdivú hypotézu.\nAk je moja p-hodnota testu menšia ako hladina významnosti \\(\\alpha,\\) potom zamietam nulovú hypotézu. To znamnená, že vzhľadom na moju fixnú ochotu mýliť sa, je hodnota testovacej štatistiky príliš extrémna na to, aby bola kompatibilná s mojou hypotézou.\nAk je moja p-hodnota testu väčšia ako hladina významnosti \\(\\alpha,\\) potom nezamietam nulovú hypotézu. {} Znamená to, že nemám dosť dôkazov na to, aby som ju zamietol, vzhľadom na to, koľko som ochotný sa mýliť.\nNáhodnú premennú \\(Z\\) nazývame testovacia štatistika a takú hodnotu \\(c\\), že platí \\(P(Z &gt; c) = \\alpha\\) v prípade jednostranného testu a \\(P(|Z| &gt; c) = \\alpha\\) v prípade obojstranného testu, nazývame kritická hodnota testu. Napríklad kritická hodnota obojstranného testu na hladine významnosti \\(0.05\\) je \\(1.96,\\) lebo \\(P(|Z|&gt;1.96)=0.05.\\)\n\n \nV Rku zbehneme test veľmi jednoducho.\n\n\n\n    One-sample z-Test\n\ndata:  zmena\nz = 1.4331, p-value = 0.07591\nalternative hypothesis: true mean is greater than 15\n95 percent confidence interval:\n 14.51938       NA\nsample estimates:\nmean of x \n 18.25302 \n\n\n\n8.1.1.1 Intuícia\nTakže ešte raz. Predstavme si, že testovacia štatistika bude obrovská a p-hodnota veľmi veľmi malá.\n\nAk by platila nulová hypotéza, tak by som naozaj neočakával takú veľkú hodnotu testovacej štatistiky.\nAkože áno, môže to nastať ale šanca je veľmi malá.\nNiečo asi nie je v poriadku.\nAk verím ostatným modelovým predpokladom, tak jediné čo mi zostáva je, že asi tá nulová hypotéza predsalen neplatí.\nSprávnu nulovú hypotézu môžem zamietať \\(100\\alpha\\%\\) krát, tak ak mi vychádza p-hodnota, že to čo vidím nastáva raz za milión pokusov (p-hodnota je 0.000001), tak je naozaj asi rozumné zamietnuť túto nulovú hypotézu.\nKaždopádne nezabúdam, že toto všetko rozhodovanie je na základe jednej jedinej realizácie testovacej štatistiky. Nuž ale nič lepšie nemám.\n\n\n\n\n8.1.2 T-test\nV prípade, že \\(X_1, X_2, X_3, \\dots\\) nielenže sú iid, ale ak sú dokonca aj normálne rozdelené, takže ak \\(X_1 \\sim N(\\mu,\\sigma^2),\\) potom môžeme naše výsledky spresniť, budeme môcť presne popísať pravdepodobnostné správanie testovacej štatistiky. Predtým sme využili, že \\(Z \\rightarrow_D N(0,1).\\) No ale čo ak máme len málo pozorovaní? Vtedy nemôžeme použiť asymptotickú aproximáciu, tá funguje len ak máme dostatočne veľa pozorovaní, teda ak \\(n\\) je dostatočne veľké.\nKeď sú však \\(X_1 \\sim N(\\mu,\\sigma^2)\\) (kedže postupnosť \\(X_1, X_2,X_3,\\dots\\) je iid, tak aj \\(X_i \\sim N(\\mu,\\sigma^2)\\) pre \\(i = 1,2,3,\\dots.\\)), tak potom priamo vieme rozdelenie náhodnej premennej \\(\\sqrt{n}\\frac{\\bar{X}_n - \\mu}{S}\\), ktorú teraz premenujeme na T.\n\\[T \\equiv \\sqrt{n}\\frac{\\bar{X}_n - \\mu}{S} \\sim t_{n-1}\\] To preto lebo má t-rozdelenie s \\(n-1\\) stupňami voľnosti.\nPre dostatočne veľký počet pozorovaní je len maličký rozdiel medzi \\(t-\\)rozdelením a \\(N(0,1)\\) rozdelením.\n\n\n\n\n\n\n\n\n\nMôžeme ísť naspäť k nášmu príkladu so študentami a pozrieť sa na porovnanie medzi testom na základe normálnej aproximácie a t-testom. Priblížime na relevantnú oblasť, aby sme to vedeli porovnať.\n\n\n\n\n\n\n\n\n\nP-hodnota testu je iná, je to 0.0817, takže t-rozdelenie prisudzuje chvostom väčšiu váhu.\n\n1 - pt(1.43,df=29)\n\n[1] 0.08170164\n\n\nV praxi je to však veľmi jednoduché, stačí takýto príkaz a nemusíme nič počítať sami.\n\nt.test(zmena, alternative=\"greater\",mu=15)\n\n\n    One Sample t-test\n\ndata:  zmena\nt = 1.4331, df = 29, p-value = 0.08126\nalternative hypothesis: true mean is greater than 15\n95 percent confidence interval:\n 14.39619      Inf\nsample estimates:\nmean of x \n 18.25302",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#dvojvýberové-testy",
    "href": "ttest.html#dvojvýberové-testy",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.2 Dvojvýberové testy",
    "text": "8.2 Dvojvýberové testy\nMyšlienka ostáva tá istá. Jediné, čo sa mení, je testovacia štatistika.\nTeraz budeme mať dve rôzne vzorky z dvoch distribúcií. A budeme testovať rozdiel ich stredných hodnôt. Najčastejšie testujeme, či je rozdiel nula alebo nie.\nUvažujme dve vzorky \\(X_1, X_2, X_3, \\dots, X_{n_{x}}\\) a \\(Y_1, Y_2, Y_3, \\dots Y_{n_{y}}\\), veľkostí \\(n_x\\) a \\(n_y.\\)\nT-testy, ktoré tu prezentujeme sa dajú nahradiť Z-testami, v prípade, že je dátová vzorka dostatočne veľká je skreslenie minimálne.\n\n8.2.1 Rovnaká variancia\nNech \\[X_1 \\sim N(\\mu_x,\\sigma^2)\\] \\[Y_1 \\sim N(\\mu_y,\\sigma^2)\\] a majme dve iid vzorky.\nAk majú spoločnú rovnakú varianciu, tak ju môžeme odhadnúť spolu \\[S^2 = \\frac{(n_x-1)S^2_x + (n_y - 1)S^2_y}{(n_x-1) + (n_y-1)}\\] teda vážený priemer výberových variancií \\(X\\) a \\(Y.\\)\nNáhodná premenná\n\\[T \\equiv \\frac{(\\bar{X} - \\bar{Y}) - (\\mu_x - \\mu_y)}{S \\sqrt{\\frac{1}{n_x} + \\frac{1}{n_y}}} \\sim t_{n_x + n_y - 2}\\] Takže máme rozdelenie testovacej štatistiky.\n\nMajú staršie auta iný diaľničný dojazd? Pozrime sa osobitne na diaľničný a mestský dojazd. Tu je syntax ako to urobíme v Rku.\n\nt.test(mpg$hwy[mpg$year&gt;=2004],mpg$hwy[mpg$year&lt;2004],var.equal=TRUE)\n\n\n    Two Sample t-test\n\ndata:  mpg$hwy[mpg$year &gt;= 2004] and mpg$hwy[mpg$year &lt; 2004]\nt = 0.032864, df = 232, p-value = 0.9738\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n -1.511559  1.562841\nsample estimates:\nmean of x mean of y \n 23.45299  23.42735 \n\nt.test(hwy ~ (year&lt;2004), data=mpg ,var.equal=TRUE)\n\n\n    Two Sample t-test\n\ndata:  hwy by year &lt; 2004\nt = 0.032864, df = 232, p-value = 0.9738\nalternative hypothesis: true difference in means between group FALSE and group TRUE is not equal to 0\n95 percent confidence interval:\n -1.511559  1.562841\nsample estimates:\nmean in group FALSE  mean in group TRUE \n           23.45299            23.42735 \n\nt.test(mpg$cty[mpg$year&gt;=2004],mpg$cty[mpg$year&lt;2004],var.equal=TRUE)\n\n\n    Two Sample t-test\n\ndata:  mpg$cty[mpg$year &gt;= 2004] and mpg$cty[mpg$year &lt; 2004]\nt = -0.5675, df = 232, p-value = 0.5709\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n -1.414159  0.781680\nsample estimates:\nmean of x mean of y \n 16.70085  17.01709 \n\nt.test(cty ~ (year&lt;2004), data=mpg ,var.equal=TRUE)\n\n\n    Two Sample t-test\n\ndata:  cty by year &lt; 2004\nt = -0.5675, df = 232, p-value = 0.5709\nalternative hypothesis: true difference in means between group FALSE and group TRUE is not equal to 0\n95 percent confidence interval:\n -1.414159  0.781680\nsample estimates:\nmean in group FALSE  mean in group TRUE \n           16.70085            17.01709 \n\n\nNič tomu nenasvedčuje.\nAko to reportovať a zobraziť? Je užitočné tieto dáta aj zobraziť\n\nt &lt;- t.test(hwy ~ (year&lt;2004), data=mpg,var.equal=TRUE)\n\nmpg$vek &lt;- factor(mpg$year&lt;2004,labels=c(\"mladšie\",\"starśie\"))\n\nlibrary(tidyverse)\nset.seed(753)\nggplot(data=mpg,aes(x=vek,y=hwy,fill=vek)) +\n  geom_boxplot(width=0.2,\n               outlier.shape = NA)+\n  geom_jitter(aes(x=vek,y=hwy),\n              width=0.2,\n              color=\"grey60\") + \n  labs(title=paste0(\"Diaľničný dojazd (p = \",\n                    as.character(round(t$p.value,3)),\")\"),\n       y=\"Dojazd\",x =\"Vek auta\")+\n  theme_classic()\n\n\n\n\n\n\n\n\nNa základe dvojvýberového t-testu s rovnakými varianciami nevieme na hladine významnosti 5% zamietnuť, že priemerný diaľničný dojazd mladších aút je iný ako starších aút. Hodnota testovacej štatistiky je 0.032864 čomu zodpovedá p-hodnota 0.973.\n\nt2 &lt;- t.test(cty ~ (year&lt;2004), data=mpg ,var.equal=TRUE)\n\nlibrary(tidyverse)\nset.seed(753)\nggplot(data=mpg,aes(x=vek,y=cty,fill=vek)) +\n  geom_boxplot(width=0.2,\n               outlier.shape = NA)+\n  geom_jitter(aes(x=vek,y=cty),\n              width=0.2,\n              color=\"grey60\") + \n  labs(title=paste0(\"Dojazd v meste (p = \",\n                    as.character(round(t2$p.value,3)),\")\"),\n       y=\"Dojazd\",x =\"Vek auta\")+\n  theme_classic()\n\n\n\n\n\n\n\n\nNa základe dvojvýberového t-testu s rovnakými varianciami nevieme na hladine významnosti 5% zamietnuť, že priemerný dojazd v meste mladších aút je iný ako starších aút. Hodnota testovacej štatistiky je -0.5675 čomu zodpovedá p-hodnota 0.571.\n\n\n\n8.2.2 Rôzna variancia\nNech \\[X_1 \\sim N(\\mu_x,\\sigma_x^2)\\] \\[Y_1 \\sim N(\\mu_y,\\sigma_y^2)\\] teda uvažujeme, že majú rôzne variancie.\nNáhodná premenná\n\\[T \\equiv \\frac{(\\bar{X} - \\bar{Y}) - (\\mu_x - \\mu_y)}{\\sqrt{\\frac{s^2_x}{n_x} + \\frac{s^2_y}{n_y}}} \\sim t_{df}\\] má približné t-rozdelenie s\n\\[df = \\frac{\\left(\\frac{s^2_x}{n_x}+\\frac{s^2_y}{n_y} \\right)^2}{\\frac{\\left(\\frac{s^2_x}{n_x}\\right)^2}{n_x-1} + \\frac{\\left(\\frac{s^2_y}{n_y}\\right)^2}{n_y-1}}.\\] stupňami voľnosti.\nTestu založenému na tejto testovacej štatistike hovoríme Welchov test.\nVybrať test s rovnakými varianciami alebo rôznymi varianciami?\nZáleží. Ak máme dobrý dôvod si myslieť, že variancie sú rovnaké, tak je rozumné túto informáciu využiť a použiť efektívnejší test, teda test, ktorý bude častejšie zamietať nesprávnu nulovú hypotézu. Na druhej strane ak nevieme, či sú variancie rovnaké, čo je v reálnych situáciách väčšinou, tak je lepšie a opatrnejšie použiť robustnejší test, ktorý umožňuje rôzne variancie. Áno, budeme menej efektívny v prípade, že variancie sú rovnaké ale aspoň nezaložíme naše testovanie na nepravdivej štatistike, ak by variancie boli nerovnaké. Väčšinou preto vyberáme Welchov test.\nVráťme sa k dátam o výsledkoch testov.\n\nset.seed(2930)\ndata_test8r &lt;- data.frame(\n              school=factor(rep(c(\"8r_gym\", \"4r_gym\"), each=40)),\n              score=round(c(rnorm(40, mean=75, sd=8), rnorm(40, mean=65, sd=5)))\n              )\n\nPripomeňme si, že takto vyzerala ich distribúcia.\n\n\n\n\n\n\n\n\n\nZnovu existujú dva rôzne spôsoby (syntaxe) ako spustiť tento test, ktoré dávajú identické výsledky.\n\n(t_test &lt;- t.test(score ~ school, data=data_test8r))\n\n\n    Welch Two Sample t-test\n\ndata:  score by school\nt = -6.7799, df = 61.971, p-value = 5.173e-09\nalternative hypothesis: true difference in means between group 4r_gym and group 8r_gym is not equal to 0\n95 percent confidence interval:\n -12.074404  -6.575596\nsample estimates:\nmean in group 4r_gym mean in group 8r_gym \n              66.150               75.475 \n\nt.test(data_test8r$score[data_test8r$school==\"4r_gym\"],data_test8r$score[data_test8r$school==\"8r_gym\"])\n\n\n    Welch Two Sample t-test\n\ndata:  data_test8r$score[data_test8r$school == \"4r_gym\"] and data_test8r$score[data_test8r$school == \"8r_gym\"]\nt = -6.7799, df = 61.971, p-value = 5.173e-09\nalternative hypothesis: true difference in means is not equal to 0\n95 percent confidence interval:\n -12.074404  -6.575596\nsample estimates:\nmean of x mean of y \n   66.150    75.475 \n\nset.seed(753)\nggplot(data=data_test8r,aes(x=school,y=score,fill=school)) +\n  geom_boxplot(width=0.2,\n               outlier.shape = NA)+\n  geom_jitter(aes(x=school,y=score),\n              width=0.2,\n              color=\"grey60\") + \n  labs(title=paste0(\"Akademický výkon (p = \",\n                    as.character(round(t_test$p.value,3)),\")\"),\n       y=\"Score(points)\",x =\"Typ školy\")+\n  theme_classic()\n\n\n\n\n\n\n\n\nNa základe dvojvýberového t-testu s rôznymi varianciami (Welchov test) na hladine významnosti 5% zamietame, že priemerný výsledok na testoch 4ročných gymnázií je iný ako 8ročných gymnázií. Hodnota testovacej štatistiky je -6.78 čomu zodpovedá p-hodnota \\(5.17 \\cdot 10^{-9}\\). Takže veľmi silne zamietame nulovú hypotézu, že sú tieto školy rovnaké, čo sa týka priemerných výsledkov testov.\n\n\n8.2.3 Párové testy\nPárový test nie je nič iné ako jednovýberový test aplikovaný na premennú \\(X - Y,\\) keď \\(n_x = n_y.\\) Príklad, ktorý sme v sekcii používali (zlepšenie) bol presne taký istý.\nPárový test so sebou nesie samozrejme viacej informácie ako obyčajný (nepárový) dvojvýberový test.\n\nt.test(test ~ cas, data=data_test, mu=15)\n\n\n    Welch Two Sample t-test\n\ndata:  test by cas\nt = 1.5229, df = 42.651, p-value = 0.1352\nalternative hypothesis: true difference in means between group po and group pred is not equal to 15\n95 percent confidence interval:\n 13.94414 22.56190\nsample estimates:\n  mean in group po mean in group pred \n          64.87932           46.62629 \n\n#t.test(test ~ cas, paired=TRUE,data=data_test, mu=15)\nt.test(data_test$test[data_test$cas==\"pred\"],data_test$test[data_test$cas==\"po\"], paired=TRUE,data=data_test, mu=15)\n\n\n    Paired t-test\n\ndata:  data_test$test[data_test$cas == \"pred\"] and data_test$test[data_test$cas == \"po\"]\nt = -14.65, df = 29, p-value = 6.17e-15\nalternative hypothesis: true mean difference is not equal to 15\n95 percent confidence interval:\n -22.89547 -13.61057\nsample estimates:\nmean difference \n      -18.25302 \n\nt.test(zmena, mu=15)\n\n\n    One Sample t-test\n\ndata:  zmena\nt = 1.4331, df = 29, p-value = 0.1625\nalternative hypothesis: true mean is not equal to 15\n95 percent confidence interval:\n 13.61057 22.89547\nsample estimates:\nmean of x \n 18.25302 \n\n\nObyčajný nepárový test ignoruje informáciu, že dané testy boli písané tými istými ľuďmi.\nPozrime sa na klasický prípad Studenta, podľa, ktorého je t-test označovaný aj ako Studentov t-test. Zaoberal sa o koľko viacej ľudia spali keď užívali rôzne lieky.\n\n\n\n    Paired t-test\n\ndata:  sleep$extra[sleep$group == 1] and sleep$extra[sleep$group == 2]\nt = -4.0621, df = 9, p-value = 0.002833\nalternative hypothesis: true mean difference is not equal to 0\n95 percent confidence interval:\n -2.4598858 -0.7001142\nsample estimates:\nmean difference \n          -1.58 \n\n\n\n\n\n\n\n\n\nNa základe párového t-testu na hladine významnosti 5% zamietame, že priemerné predĺženie spánku je rovnaké pri užívaní rôznych liekov. Hodnota testovacej štatistiky je -4.062 čomu zodpovedá p-hodnota 0.0028. Všimnime si, že teraz dáva zmysel spojiť jednotlivé merania toho istého subjektu čiarou - párový test totiž berie túto informáciu do úvahy.\nPoznamenajme, že ak by sme ignorovali informáciu, že ide o párové dáta, na hladine významnosti 5% by sme ju ani nevedeli zamietnuť(!)\n\n\n\n    Welch Two Sample t-test\n\ndata:  extra by group\nt = -1.8608, df = 17.776, p-value = 0.07939\nalternative hypothesis: true difference in means between group 1 and group 2 is not equal to 0\n95 percent confidence interval:\n -3.3654832  0.2054832\nsample estimates:\nmean in group 1 mean in group 2 \n           0.75            2.33",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#porovnanie-stredných-hodnôt-viacerých-vzoriek-anova",
    "href": "ttest.html#porovnanie-stredných-hodnôt-viacerých-vzoriek-anova",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.3 Porovnanie stredných hodnôt viacerých vzoriek (ANOVA)",
    "text": "8.3 Porovnanie stredných hodnôt viacerých vzoriek (ANOVA)\nMôžeme chcieť otestovať rovnosť stredných hodnôt vo viacerých ako v dvoch skupinách. Napríklad ak by sme testovali ako dobre fungujú 4 rôzne liečby.\nZa týmto účelom používame test ANOVA (analysis of variance). Jeho predpokladmi sú rovnaké variancie, normalita a nezávislosť vzoriek.\nMajte teraz \\(k\\) rôznych skupín s veľkosťami dátových vzoriek \\(n_1, n_2, \\cdots n_k\\). Nulová hypotéza, ktorá nás zaujíma je \\[H_0: \\mu_{Y_1} = \\mu_{Y_2} = \\cdots \\mu_{Y_k}\\] Testovacia štatistika má nasledovný tvar:\n\\[F = \\sum_{j=1}^k n_j \\frac{(\\bar Y_{j} - \\bar{Y})^2}{k-1} \\sim F_{k-1,n-k}\\] kde \\(n = n_1 + \\cdots n_k\\) a \\(\\bar{Y}\\) je celkový priemer.\nTu je implementácia testu, kde sa pozeráme, či je diaľničný dojazd rôzny cez rôzne kategórie aút (7 kategórií: minivan, compact, subcompact, midsize, suv, 2seater, pickup).\n\nanova_model &lt;- aov(hwy ~ class, data = mpg)\nsummary(anova_model)\n\n             Df Sum Sq Mean Sq F value Pr(&gt;F)    \nclass         6   5683   947.2   83.39 &lt;2e-16 ***\nResiduals   227   2578    11.4                   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nP-hodnota testu je veľmi malá a zamietame nulovú hypotézu, že rôzne kategórie áut majú rovnaký priemerný diaľničný dojazd (čo zasa asi nie je až také prekvapivé).",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#konfidenčný-interval",
    "href": "ttest.html#konfidenčný-interval",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.4 Konfidenčný interval",
    "text": "8.4 Konfidenčný interval\nDoteraz sme používali p-hodnotu na kvantifikáciu toho, ako veľmi je nulová hypotéza kompatibilná s našou dátovou vzorkou. Iný, alternatívny pohľad na kvantifikovanie neistoty je pozrieť sa na množinu všetkých tých hodnôt, ktoré by neboli bývali zamietnuté pri nejakej fixnej hladine významnosti.\nVezmime si napríklad jednovýberový T-test. T-štatistika \\(T \\equiv \\sqrt{n}\\frac{\\bar{X}_n - \\mu}{S}\\) má \\(t_{n-1}\\) rozdelenie, takže\n\\[P\\left(t^{(\\alpha/2)}_{n-1} \\leq T \\leq t^{(1-\\alpha/2)}_{n-1}\\right) = P\\left(t^{(\\alpha/2)}_{n-1} \\leq \\sqrt{n}\\frac{\\bar{X}_n - \\mu}{S} \\leq t^{(1-\\alpha/2)}_{n-1}\\right) = 1-\\alpha,\\] kde \\(t^{(\\alpha)}_{n-1}\\) označuje \\(100(\\alpha/2)\\%\\)-ný kvantil T-rozdelenia s \\(n-1\\) stupňami voľnosti. Nakoľko je T-rozdelenie symetrické, máme \\(t^{(\\alpha/2)}_{n-1} = - t^{(1-\\alpha/2)}_{n-1}.\\) Teda:\n\\[P\\left(-t^{(1-\\alpha/2)}_{n-1} \\leq \\sqrt{n}\\frac{\\bar{X}_n - \\mu}{S} \\leq t^{(1-\\alpha/2)}_{n-1}\\right) = 1-\\alpha,\\] Ak je naša dátová vzorka veľkosti \\(n=10\\), a hladina významnosti \\(5\\%\\) potom máme \\(t_9^{0.975} = 2.262.\\)\nNulovú hypotézu zamietame vždy ak \\(\\bar{X}_n &gt; \\mu + t^{(1-\\alpha/2)}_{n-1} \\frac{S}{\\sqrt{n}}\\) alebo \\(\\bar{X}_n &lt; \\mu - t^{(1-\\alpha/2)}_{n-1} \\frac{S}{\\sqrt{n}}.\\) Nižšie sú zobrazené hodnoty \\(t^{(0.025)}_{9}\\) a \\(t^{(0.975)}_{9},\\) súčet obsahov týchto dvoch modrých plôch dáva \\(0.05\\).\n\n\n\n\n\n\n\n\n\nTeraz môžeme zadefinovať \\((1-\\alpha)100\\%\\)ný konfidenčný interval pre odhad strednej hodnoty ako množinu všetkých parametrov \\(\\mu\\), ktoré by neboli zamietnuté štatistickým testom na hladine významnosti \\(\\alpha.\\)\n\\[CI^{(1-\\alpha)} = \\left[\\bar{X}_n - t^{(1-\\alpha/2)}_{n-1} \\frac{S}{\\sqrt{n}},\\bar{X}_n + t^{(1-\\alpha/2)}_{n-1} \\frac{S}{\\sqrt{n}} \\right].\\]\nJe dôležité si uvedomiť, že konfidenčný interval je náhodný interval. Náhodnosť plynie z \\(\\bar{X}_n\\) a \\(S\\), ktoré sú náhodné premenné. To znamená, že jedna dátová vzorka nám dá len jednu realizáciu \\(CI^{(1-\\alpha)}.\\) Jeho interpretácia je taká, že ak by sme dostali 100 náhodných vzoriek z modelu, tak tento náhodný interval by ho pokryl približne 5 krát.\nPozrime sa na to na nasledujúcej simulácii (ktorú si urobíme ako cvičenie):\n\n\n\n\n\n\n\n\n\nPozorujeme, že spomedzi 100 simulácií \\(95\\%\\)ný konfidenčný interval pokryl skutočnú hodnotu 94 krát, zatiaľčo \\(90\\%\\)ný konfidenčný interval pokryl túto hodnotu 89 krát. Ak by sme mali týcho simulácii viacej, tento pomer by sa blížil k \\(95\\%\\) a \\(90\\%\\).",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#testovanie-podielu",
    "href": "ttest.html#testovanie-podielu",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.5 Testovanie podielu",
    "text": "8.5 Testovanie podielu\nNiekedy sme v situácii, že potrebujeme skúmať rozdiely medzi skupinami a premenná, ktorú sledujeme je binárna - áno/nie.\n\nNiečo nastalo/nenastalo\nProdukt bol zakúpený\nPacient sa vyzdravil do 2 týždňov\n\n\n8.5.1 Testovanie podielu pre jednu skupinu\nPredstavme si nasledovnú situáciu. Zo vzorky \\(n=1024\\) respondentov získa v prieskume volebných preferencií určitá strana \\(6.152\\%\\) (63 hlasov). Zaujíma ju, či sa dostane do parlamentu, teda, či prekročí hranicu \\(5\\%\\).\nUvažujme, že počet respondentov, ktorí odpovedali, že by ju volili je rozdelený binomicky s neznámou pravdepodobnosťou \\(p\\):\n\\[Y \\sim Bin(n,p)\\].\nAkonáhle je \\(n\\) dostatočne veľké, tak máme\n\\[Z \\equiv \\frac{Y - np}{\\sqrt{n p (1-p)}} \\rightarrow_D N(0,1).\\]\nToto platí kvôli Zákonu o veľkých číslach (\\(Y = X_1 + \\dots + X_n,\\) kde \\(X_i \\sim Bern(p)\\)) a skutočnosti, že \\(\\text{E}[Y] = np\\) a \\(\\text{Var}[Y] = np(1-p).\\)\nV našom prípade\n\\[\\frac{53 - 51.2}{\\sqrt{1024 \\cdot 0.05 \\cdot 0.95}} \\approx 1.692\\] Porovnáme túto hodnotu s \\(95\\%\\)ným kvantilom normálneho rozdelenia, ktorý je 1.645, takže zamietli by sme nulovú hypotézu toho, že \\(p=0.05\\) v prospech jednostrannej hypotézy, že \\(p&gt;0.05\\) na hladine významnosti \\(5\\%.\\)\nAko vyzerá obojstranný konfidenčný interval?\n\\[P\\left(-z^{(1-\\alpha/2)} \\leq Z \\leq z^{(1-\\alpha/2)}_{n-1}\\right) = P\\left(-z^{(1-\\alpha/2)} \\leq \\frac{Y - np}{\\sqrt{n p (1-p)}}  \\leq z^{(1-\\alpha/2)}\\right) \\approx 1-\\alpha,\\] Teraz z praktických dôvodov nahradíme neznáme \\(p\\) v menovateli jeho odhadom \\(\\hat p = Y/n\\) (v našom prípade \\(6.152\\%\\)) Aproximatívna rovnosť \\(\\approx\\) teraz bude mať dva zdroje chyby - \\(\\frac{Y - np}{\\sqrt{n p (1-p)}}\\) je totiž len približne normálne rozdelené a naviac menovateľ \\(\\sqrt{n \\hat p (1- \\hat p)}\\) je len približne smerodajnou odchýlkou \\(Y.\\)\n\\[P\\left(-z^{(1-\\alpha/2)} \\leq \\frac{Y - np}{\\sqrt{n \\hat p (1- \\hat p)}}  \\leq z^{(1-\\alpha/2)}\\right) \\approx 1-\\alpha.\\]\nV tejto zátvorke potrebuje popreusporiadať objekty tak, aby sme osamostatnili \\(p\\).\n\\[\\begin{eqnarray*}\n\nP\\left(-z^{(1-\\alpha/2)} \\leq \\frac{Y - np}{\\sqrt{n \\hat p (1- \\hat p)}}  \\leq z^{(1-\\alpha/2)}\\right) &=& 1-\\alpha, \\\\\nP\\left(-z^{(1-\\alpha/2)}\\sqrt{n \\hat p (1- \\hat p)} \\leq  Y - np \\leq z^{(1-\\alpha/2)}\\sqrt{n \\hat p (1- \\hat p)}\\right) &=& 1-\\alpha, \\\\\nP\\left(Y + z^{(1-\\alpha/2)}\\sqrt{n \\hat p (1- \\hat p)} \\geq  np  \\geq Y - z^{(1-\\alpha/2)}\\sqrt{n \\hat p (1- \\hat p)}\\right) &=& 1-\\alpha,\\\\\nP\\left(\\frac{Y}{n} + z^{(1-\\alpha/2)}\\sqrt{\\frac{1}{n} \\hat p (1- \\hat p)} \\geq  p  \\geq \\frac{Y}{n} - z^{(1-\\alpha/2)}\\sqrt{\\frac{1}{n} \\hat p (1- \\hat p)}\\right) &=& 1-\\alpha,\\\\\nP\\left(\\hat p - z^{(1-\\alpha/2)}\\sqrt{\\frac{1}{n} \\hat p (1- \\hat p)} \\leq  p  \\leq \\hat p + z^{(1-\\alpha/2)}\\sqrt{\\frac{1}{n} \\hat p (1- \\hat p)}\\right) &=& 1-\\alpha,\n\\end{eqnarray*}\\]\nTakže konfidenčný interval dostávame nasledovný:\n\\[CI^{(1-\\alpha)} = \\left[\\hat p - z^{(1-\\alpha/2)}\\sqrt{\\frac{\\hat p (1- \\hat p)}{n}},\\hat p + z^{(1-\\alpha/2)}\\sqrt{\\frac{\\hat p (1- \\hat p)}{n} } \\right].\\] Pozrime sa na nasledovnú tlačovú správu o volebnom prieskume jednej slovenskej prieskumnej agentúry.\n\n\n\n\n\nPrieskum volebných preferencií z februára 2022.\n\n\n\n\nPoďme sa pozrieť hneď na prvý riadok. Z 1003 respondentov \\(65.2\\%\\) respondentov označilo stranu, to jest 654. Z nich \\(18.5\\%\\) zodpovedá 121 respondentov. \\(95\\%\\)ný interval spoľahlivosti je preto:\n\nhatp &lt;- 121/654\nc_low  &lt;- hatp - qnorm(0.975)*sqrt(hatp*(1-hatp)/654)\nc_high &lt;- hatp + qnorm(0.975)*sqrt(hatp*(1-hatp)/654)\n\nround(c(c_low, c_high),3)\n\n[1] 0.155 0.215\n\n\nTest, ktorý berie do úvahy skutočnosť, že binomicky rozdelená premenná nie je spojitá, je implementovaný pomocou\n\nprop.test(121,654)\n\n\n    1-sample proportions test with continuity correction\n\ndata:  121 out of 654, null probability 0.5\nX-squared = 258.29, df = 1, p-value &lt; 2.2e-16\nalternative hypothesis: true p is not equal to 0.5\n95 percent confidence interval:\n 0.1564114 0.2173919\nsample estimates:\n        p \n0.1850153 \n\n\na verzia vhodná na malé dátové vzorky (presný test)\n\nbinom.test(121,654)\n\n\n    Exact binomial test\n\ndata:  121 and 654\nnumber of successes = 121, number of trials = 654, p-value &lt; 2.2e-16\nalternative hypothesis: true probability of success is not equal to 0.5\n95 percent confidence interval:\n 0.1559671 0.2169387\nsample estimates:\nprobability of success \n             0.1850153 \n\n\nZ praktického hľadiska medzi nimi väčšinou nie je veľký rozdiel. Extenzívne porovnanie kvality rôznych testov je napríklad tu.\nPoďme sa bližšie pozrieť pod kapotu prop.test s parametrom correct=FALSE. Budeme mechanicky meniť pravdepodobnosť testu a ukladať si p-hodnotu.\n\nprop.test(121,654,p=0.2,correct=FALSE)\n\n\n    1-sample proportions test without continuity correction\n\ndata:  121 out of 654, null probability 0.2\nX-squared = 0.91781, df = 1, p-value = 0.338\nalternative hypothesis: true p is not equal to 0.2\n95 percent confidence interval:\n 0.1571244 0.2165849\nsample estimates:\n        p \n0.1850153 \n\nU &lt;- (121 - 654*0.2)/sqrt(654*0.2*(1-0.2))\n2*(1 - pnorm(abs(U)))\n\n[1] 0.3380497\n\nprop.test(121,654,correct=FALSE)\n\n\n    1-sample proportions test without continuity correction\n\ndata:  121 out of 654, null probability 0.5\nX-squared = 259.55, df = 1, p-value &lt; 2.2e-16\nalternative hypothesis: true p is not equal to 0.5\n95 percent confidence interval:\n 0.1571244 0.2165849\nsample estimates:\n        p \n0.1850153 \n\np_vec &lt;- seq(0.14,0.22,by=0.00001)\nnp &lt;- length(p_vec)\npval_vec &lt;- numeric(np)\nfor (ip in 1:np){\n  pval_vec[ip] &lt;- prop.test(121,654,p=p_vec[ip],correct=FALSE)$p.value\n}\nrange(p_vec[which(pval_vec&gt;0.05)])\n\n[1] 0.15713 0.21658\n\n\nTeraz vidíme, že funkcia prop.test implementuje nasledovný konfidenčný interval,\n\\[P\\left(-z^{(1-\\alpha/2)} \\leq \\frac{Y - np}{\\sqrt{n  p (1- p)}}  \\leq z^{(1-\\alpha/2)}\\right) \\approx 1-\\alpha,\\] rozdielom je, že v menovateli nie je aproximácia.\nA teraz sa pozrime na exaktný test binom.test. Tento test nerobí vôbec žiadnu aproximáciu normálnym rozdelením.\n\n# exact - based on binomial distribution\nbinom.test(121,654,0.2,alternative=\"two.sided\")\n\n\n    Exact binomial test\n\ndata:  121 and 654\nnumber of successes = 121, number of trials = 654, p-value = 0.3533\nalternative hypothesis: true probability of success is not equal to 0.2\n95 percent confidence interval:\n 0.1559671 0.2169387\nsample estimates:\nprobability of success \n             0.1850153 \n\n#more extreme number than 121?\nplot(80:170,dbinom(80:170, 654, p=0.2))\npoints(121,dbinom(121, 654, p=0.2),col=\"red\")\nabline(h=dbinom(121, 654, p=0.2),col=\"red\")\npoints(80:121,dbinom(80:121, 654, p=0.2),col=\"green\")\npoints(141:170,dbinom(141:170, 654, p=0.2),col=\"green\")\n\n\n\n\n\n\n\nsum(dbinom(0:121,654,0.2))+sum(dbinom(141:654,654,0.2))\n\n[1] 0.3532905\n\n\nZa predpokladu nulovej hypotézy priamo vieme rozdelenie. Sčítame pravdepodobnosti ešte extrémnejšej udalosti.\n\n\n8.5.2 Testovanie rovnosti podielov pre dve skupiny\nTestovacia štatistika, ktorá testuje nulovú hypotézu, že proporcie v dvoch vzorkách veľkosti \\(n_1\\) a \\(n_2\\) sú rovnaké, má nasledovnú formu:\n\\[Z \\equiv \\frac{\\hat p_1 - \\hat p_2 }{\\sqrt{ \\hat p (1 - \\hat p) \\left(\\frac{1}{n_1} + \\frac{1}{n_2}\\right) }} \\rightarrow_D N(0,1),\\]\nkde \\(\\hat p_1 = Y_1/n_1, \\hat p_2 = Y_2/n_2, \\hat p = \\frac{Y_1 + Y_2}{n_1 + n_2}.\\)\n\nChceli by sme porovnať efekt dvoch jedov na hmyz. V prvej skupine sme namerali, že 28 z 90 hmyzov zahynulo. V druhej skupine to bolo 8 zo 60. Hodnota \\(Z\\) štatistiky je\n\nhatp1 &lt;- 28/90\nhatp2 &lt;- 8/60\nhatp &lt;- (28+8)/(90+60)\n\n( Z &lt;- (hatp1-hatp2)/sqrt(hatp*(1-hatp)*(1/90 + 1/60)) )\n\n[1] 2.497562\n\n\na kritická hodnota obojstranného 95\\(\\%\\) testu je\n\nqnorm(0.975)\n\n[1] 1.959964\n\n\ntakže zamietame nulovú hypotézu, že dva insekticídy sú rovnaké. P-hodnota obojstranného testu je\n\n2*(1-pnorm(abs(Z)))\n\n[1] 0.01250505\n\n\nIný spôsob na základe inej testovacej štatistiky s korekciou na spojitosť je\n\nprop.test(c(28,8),c(90,60))\n\n\n    2-sample test for equality of proportions with continuity correction\n\ndata:  c(28, 8) out of c(90, 60)\nX-squared = 5.3012, df = 1, p-value = 0.02131\nalternative hypothesis: two.sided\n95 percent confidence interval:\n 0.03525685 0.32029870\nsample estimates:\n   prop 1    prop 2 \n0.3111111 0.1333333",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#kontigenčné-tabuľky",
    "href": "ttest.html#kontigenčné-tabuľky",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.6 Kontigenčné tabuľky",
    "text": "8.6 Kontigenčné tabuľky\nZačnime príkladom. Chceli by sme vedieť či súvisí farba očí s farbou vlasov. Máme odpozorovanú vzorku 592 ĺudí v rôznych kategóriách. Neexistuje žiadne prirodzené číselné usporiadanie farieb, ide o kategorickú premennú.\n\n\n\n\n\n\n\n\n\nVidíme, že máme 20 modrokých ľudí s čiernymi vlasmi ale 68 ľudí s hnedými očami (20 ľudí má orieškovú farbu očí - pozn. ja som tie farby nevymýšľal.).\n\n\n\n\n\n\n\n\n\nModrookých a hnedookých ľudí je podobne veľa, okolo 37\\(\\%\\). Predstavme si teraz situáciu, že vieme, len proporcie po stĺpcoch, že nevieme aká je súvzťažnosť medzi farbou očí a vlasov.\n\n\n\n\n\n\n\n\n\nAk, by bola farba vlasov a očí nezávislá, potom by sme vedeli aká je proporcia jednotlivých kombinácií. Napríklad hnedovlasých ľudí s orieškovými očami by malo byť \\(0.483*0.157=0.0759.\\)\n\n\n\n\n\n\n\n\n\nTakže by sme očakávali, že za predpokladu nezávislosti by ich malo byť zhruba \\(44.9\\).\n\n\n\n\n\n\n\n\n\nTeraz môžeme testovaciu štatistiku založiť na tom, že očakávaná tabuľka za predpokladu nezávislosti by mala byť blízka tej pozorovanej. Ak budú rozdiely veľmi veľké, zamietame nulovú hypotézu nezávislosti.\n\n\n\n\n\n\n\n\n\nTestovacia štatistika má nasledovnú formu:\n\\[ C = \\sum_i \\frac{(O_i - E_i)^2}{E_i} \\sim \\chi^2_{m}, \\] kde\n\n\\(i\\) je skupina (napríklad kombinácia farby vlasov a očí)\n\\(O_i\\) je počet pozorovaní v skupine \\(i\\)\n\\(E_i\\) je počet očakávaných pozorovaní v skupine \\(i\\) za platnosti nezávislosti\n\\(m\\) označuje počet stupňov voľnosti. Je to \\(m = (c_1 - 1)(c_2-1)\\) kde \\(c_1\\) je počet kategórii prvej kategorickej premennej a \\(c_2\\) je počet kategórii druhej kategorickej premennej. (V našom prípade \\(c_1 = c_2 = 4\\) a preto \\(m = (4-1)(4-1)=9.\\))\n\nTu je mechanická implementácia v R ako aj výsledok za použitia funkcie chisq.test.\n\nlibrary(faraway)\n\n\nhaireye\n\n     y   eye  hair\n1    5 green BLACK\n2   29 green BROWN\n3   14 green   RED\n4   16 green BLOND\n5   15 hazel BLACK\n6   54 hazel BROWN\n7   14 hazel   RED\n8   10 hazel BLOND\n9   20  blue BLACK\n10  84  blue BROWN\n11  17  blue   RED\n12  94  blue BLOND\n13  68 brown BLACK\n14 119 brown BROWN\n15  26 brown   RED\n16   7 brown BLOND\n\n(ct &lt;- xtabs(y ~ hair + eye, haireye))\n\n       eye\nhair    green hazel blue brown\n  BLACK     5    15   20    68\n  BROWN    29    54   84   119\n  RED      14    14   17    26\n  BLOND    16    10   94     7\n\nsummary(ct)\n\nCall: xtabs(formula = y ~ hair + eye, data = haireye)\nNumber of cases in table: 592 \nNumber of factors: 2 \nTest for independence of all factors:\n    Chisq = 138.29, df = 9, p-value = 2.325e-25\n\nplot(0:250,dchisq(0:250,df=9),type=\"l\")\n\n\n\n\n\n\n\nh &lt;- margin.table(ct,1)/sum(margin.table(ct,1))\ne &lt;- margin.table(ct,2)/sum(margin.table(ct,2))\n\n#table under independency\nindTable &lt;- h %*% t(e)\nsum(indTable)\n\n[1] 1\n\nN &lt;- sum(ct)\n\nsum( (ct - indTable*N)^2/(indTable*N) ) \n\n[1] 138.2898\n\nmosaicplot(ct)\n\n\n\n\n\n\n\nchisq.test(ct)\n\n\n    Pearson's Chi-squared test\n\ndata:  ct\nX-squared = 138.29, df = 9, p-value &lt; 2.2e-16\n\n\nJe neprekvapivé, že v tomto prípade veľmi silno zamietame nulovú hypotézu o tom, že farba očí a vlasov je nezávislá.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#zopár-poznámok-na-záver.",
    "href": "ttest.html#zopár-poznámok-na-záver.",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.7 Zopár poznámok na záver.",
    "text": "8.7 Zopár poznámok na záver.\n\nV praxi je užitočné zobraziť dáta. Vždy.\nV drvivej väčšine prípadov robíme test s nerovnakými varianciami. Málokedy máme dôvod uvažovať, že vzorky majú rovnakú varianciu.\nNa to, ako veĺmi popisuje normálne rozdelenie naše vzorky môžeme pomôcť vizualizačné nástroje. Ak aj nie sú normálne, vďaka centrálnej limitnej vete budú pre rastúcu dátovú vzorku naše štatistiky aspoň asymptoticky t alebo normálne rozdelené.\nNa veľmi malé dátové vzorky sa niekedy používajú aj neparametrické testy. Tieto nespomíname v tomto kurze.\nJe zvyklosťou používať hladinu významnosti 5%. Ale to je všetko, je to zvyk. Nie sú žiadne teoretické dôvody, prečo je toto menej vhodné číslo ako 1% alebo 11.343%.\nP-hodnoty sú častokrát dezinterpretované. P-hodnota hovorí, že\n\nza platnosti nulovej hypotézy (napríklad \\(\\mu=3\\))\nza platnosti modelových predpokladov (napr. rovnaká variancia)\naká by bola šanca, že uvidíme ešte extrémnejší výsledok ako ten čo pozorujeme, ak by sme opakovali zber dát mnohokrát. No ale toto je problém lebo my máme len jednu vzorku.\n\nOkrem štatistickej významnosti sa treba pozerať aj na reálnu hodnotu rozdielu. Ak budeme mať dostatočne veľa dát, tak vždy zamietneme nulovú hypotézu, že stredné hodnoty dvoch vzoriek sú rovnaké. Ale ak je rozdiel v dojazde na nádrž auta 0.3km alebo ak je rozdiel v ročnej mzde 4.50eur, tak tento hoc aj štatisticky významný rozdiel nie je zaujímavý.\nExistuje dosť veľká skupina ľudí, ktorá považuje tento spôsob uvažovania (štatistické testovanie hypotéz) za neužitočný. (Toto môžeme byť aj my ale najprv tomu budeme musieť do hĺbky porozumieť)\nŠtatistické testovanie hypotéz môže vzbudiť dojem vedeckosti. Nie je však o nič vedeckejšie ako zobraziť dáta vhodnou vizualizáciou. Na testovanie sa pozeráme ako na ďalší nástroj, ktorého ambíciou je byť užitočné. To, že niečo zamietneme alebo nezamietneme neznamená, že to je alebo nie je pravda. Testovanie nám umožňuje systematizovať naše rozhodovanie a kvantifikovať intuíciu, ktorú nadobudneme pozeraním sa na surové dáta.",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#prehľad",
    "href": "ttest.html#prehľad",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.8 Prehľad",
    "text": "8.8 Prehľad\n\n\n\n\n\n\n\n\n\n\n\n\n\nPoužitie\nTest\nTestovacia štatistika\nHypotéza\nV Rku\nPoznámky\n\n\n\n\nStredná hodnota je rovná číslu \\(\\mu\\)\nZ-Test\n(Z= N(0,1))\n(H_0): \\(\\mu_X = \\mu\\)\nBSDA::z.test()\nVyžaduje známe \\(\\sigma\\)\n\n\n\nT-Test\n(T= t_{n})\n(H_0): \\(\\mu_X = \\mu\\)\nt.test()\nPoužíva odhadnuté \\(\\sigma\\)\n\n\nPorovnanie stredných hodnôt dvoch vzoriek\nT-Test\n(T t_{n_x + n_y - 2})\n(H_0): \\(\\mu_X = \\mu_Y\\)\nt.test(,var.equal=TRUE)\n(S) je odhadom (_X = _Y)\n\n\n\n(Welchov) T-Test\n(T t_{df})\n(H_0): \\(\\mu_X = \\mu_Y\\)\nt.test(,var.equal=FALSE)\nPribližný test\n\n\n\nPárový T-Test\n(T t_{n-1})\n(H_0): \\(\\mu_X - \\mu_Y = 0\\)\nt.test(,paired=TRUE)\n(n_X = n_Y)\n\n\nPorovnanie stredných hodnôt viacerých vzoriek\nANOVA\n(F = *{j=1}^k n_j* F{k-1,n-k})\n(H_0): \\(\\mu_{Y_1} = \\mu_{Y_2} = \\cdots \\mu_{Y_k}\\)\naov()\n\n\n\nTestovanie podielu pre jednu skupinu\nZ-test\n(Z _D N(0,1) )\n(H_0): \\(p_Y = p\\)\nz.test()\nVeľká vzorka\n\n\n\nChí-Kvadrát test\n(^2_1 )\n(H_0): \\(p_Y = p\\)\nprop.test()\nNa základe kont. tabuľky\n\n\n\nBinomický test\n(Y Binom(n,p) )\n(H_0): \\(p_Y = p\\)\nbinom.test()\nExaktný test - pre malé vzorky\n\n\nTestovanie rovnosti podielov pre dve skupiny\nZ-test\n(Z _D N(0,1) )\n(H_0): \\(p_1 = p_2\\)\nmechanicky\n(p) je odhad proporcie z oboch vzoriek naraz\n\n\n\nChí-Kvadrát test\n(^2_1 )\n(H_0): \\(p_1 = p_2\\)\nprop.test()\nNa základe kont. tabuľky.\n\n\nAsociácia medzi kategorickými premennými\nChí-Kvadrát test\n(C = _i ^2_m )\n(H_0): X a Y sú nezávislé\nchisq.test()\n(m = (c_1 - 1)(c_2-1))\n\n\n\n\n\n8.9 Cvičenia\n\n\n\n\n\n\nCvičenie 8.1 Využite dáta EuStockMarkets z knižnice datasets a porovnajte priemerné denné výnosy nemeckého DAX a britského FTSE. Využijete párový alebo nepárový test? Dáta zobrazte.\n\n\nCvičenie 8.2 Z datasetu USArrests porovnajte úrovne rôznych zločinov podľa toho, či žije v mestách veľa ľudí. Dáta zobrazte.\n\n\nCvičenie 8.3 V datasete airquality sú informácie o kvalite vzduchu. Otestujte jednostrannú hypotézu, či je rýchlosť vetra väčšia ako 11 míľ za hodinu. Podporte tento výsledok aj vizuálne. Porovnajte T-test so Z-testom.\n\n\nCvičenie 8.4 Z datasetu movies z knižnice ggplot2movies otestuje hypotézu, že vo filmoch vydaných po roku 2000 (vrátane) sú komédie kratšie ako akčné filmy. Filmy vhodne zobrazte (napríklad ak je priveľa dát na zobrazenie všetkých filmov, môžete zobraziť aspoň náhodnú podvzorku).\n\n\nCvičenie 8.5 V datasete energy z knižnice ISwR je 24-hodinový energetický výdaj v MJ pre 22 pacientiek. Porovnajte a zobrazte energetický výdaj pre obézne a neobézne pacientky. Ešte predtým ako urobíte nejaký test dáta zobrazte. Aký výsledok očakávate? Je v tomto prípade test užitočný?\n\n\nCvičenie 8.6 V datasete stroke z knižnice ISwR sú informácie o 829 pacientoch z Tartu medzi 1991-1993, ktorí mali porážku. Porovnajte sumárne štatistiky medzi pacientami, ktorí umreli a ktorí prežili (v prípade kategorických premenných sa pozrite na proporcie). V ktorých premenných nachádzate signifikantné rozdiely? Hint: pomôžte si funkciou st z knižnice vtable. Vaše zistenia interpretujte.\n\n\nCvičenie 8.7 Zreprodukujte obrázok zo simulácie konfidenčných intervalov. Nastavte set.seed(29), zvoľte \\(n=10\\) a generujte vzorky z rozdelenia \\(N(2,1).\\)\n\n\nCvičenie 8.8 Mechanicky zreprodukujte konfidenčné intervaly z tohoto prieskumu.\n\n\nCvičenie 8.9 Tento prieskum neobsahuje kvantifikáciu neistoty pomocou konfidenčných intervalov. Doplňte informáciu o konfidenčných intervaloch na slajd na strane 8 (prieskum volebných preferencií). Je rozdiel v proporcii hlasujúcich pre 2 strany, ktoré získali \\(5\\%\\) a \\(4.7\\%\\) štatisticky významný?\n\n\nCvičenie 8.10 Z knižnice ISLR máme v datasete Wage informácie o mzdách. Vytvorte kategorickú premennú, či je daná mzda nad alebo pod mediánom. Pozrite sa ako táto kategorická premenná suvisí so vzdelaním a s rasou.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n–&gt;\n\n–&gt;\n\n–&gt;\n\n–&gt;\n\n–&gt;\n\n–&gt;",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "ttest.html#cvičenia",
    "href": "ttest.html#cvičenia",
    "title": "8  Štatistické testovanie hypotéz",
    "section": "8.9 Cvičenia",
    "text": "8.9 Cvičenia\n\n\n\n\n\n\nCvičenie 8.1 Využite dáta EuStockMarkets z knižnice datasets a porovnajte priemerné denné výnosy nemeckého DAX a britského FTSE. Využijete párový alebo nepárový test? Dáta zobrazte.\n\n\nCvičenie 8.2 Z datasetu USArrests porovnajte úrovne rôznych zločinov podľa toho, či žije v mestách veľa ľudí. Dáta zobrazte.\n\n\nCvičenie 8.3 V datasete airquality sú informácie o kvalite vzduchu. Otestujte jednostrannú hypotézu, či je rýchlosť vetra väčšia ako 11 míľ za hodinu. Podporte tento výsledok aj vizuálne. Porovnajte T-test so Z-testom.\n\n\nCvičenie 8.4 Z datasetu movies z knižnice ggplot2movies otestuje hypotézu, že vo filmoch vydaných po roku 2000 (vrátane) sú komédie kratšie ako akčné filmy. Filmy vhodne zobrazte (napríklad ak je priveľa dát na zobrazenie všetkých filmov, môžete zobraziť aspoň náhodnú podvzorku).\n\n\nCvičenie 8.5 V datasete energy z knižnice ISwR je 24-hodinový energetický výdaj v MJ pre 22 pacientiek. Porovnajte a zobrazte energetický výdaj pre obézne a neobézne pacientky. Ešte predtým ako urobíte nejaký test dáta zobrazte. Aký výsledok očakávate? Je v tomto prípade test užitočný?\n\n\nCvičenie 8.6 V datasete stroke z knižnice ISwR sú informácie o 829 pacientoch z Tartu medzi 1991-1993, ktorí mali porážku. Porovnajte sumárne štatistiky medzi pacientami, ktorí umreli a ktorí prežili (v prípade kategorických premenných sa pozrite na proporcie). V ktorých premenných nachádzate signifikantné rozdiely? Hint: pomôžte si funkciou st z knižnice vtable. Vaše zistenia interpretujte.\n\n\nCvičenie 8.7 Zreprodukujte obrázok zo simulácie konfidenčných intervalov. Nastavte set.seed(29), zvoľte \\(n=10\\) a generujte vzorky z rozdelenia \\(N(2,1).\\)\n\n\nCvičenie 8.8 Mechanicky zreprodukujte konfidenčné intervaly z tohoto prieskumu.\n\n\nCvičenie 8.9 Tento prieskum neobsahuje kvantifikáciu neistoty pomocou konfidenčných intervalov. Doplňte informáciu o konfidenčných intervaloch na slajd na strane 8 (prieskum volebných preferencií). Je rozdiel v proporcii hlasujúcich pre 2 strany, ktoré získali \\(5\\%\\) a \\(4.7\\%\\) štatisticky významný?\n\n\nCvičenie 8.10 Z knižnice ISLR máme v datasete Wage informácie o mzdách. Vytvorte kategorickú premennú, či je daná mzda nad alebo pod mediánom. Pozrite sa ako táto kategorická premenná suvisí so vzdelaním a s rasou.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n–&gt;\n\n–&gt;\n\n–&gt;\n\n–&gt;\n\n–&gt;\n\n–&gt;",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Štatistické testovanie hypotéz</span>"
    ]
  },
  {
    "objectID": "reg.html",
    "href": "reg.html",
    "title": "9  Úvod do lineárnej regresie",
    "section": "",
    "text": "9.1 Lineárny regresný model\nDoteraz sme sa naučili načítať dataset, zobraziť dáta, vypočítať a zobraziť korelácie a otestovať či je medzi nejakými skupinami významný rozdiel. Teraz sa budeme viacej venovať súvzťažnosti rôznych premenných.\nZačnime príkladom. Majme informácie o tom, koľko hodín sa študenti pripravujú na test a ich výsledku na teste.\nPozorujeme pozitívnu závislosť, čo nie je prekvapivé. Miera ich lineárnej súvzťažnosti, teda korelácia, je rovná \\(91.8\\%\\), takže veľmi vysoká.\nMožno by sme chceli nejakým spôsobom popísať, ako presne rastie výsledok testu s úsilím, meraným počtom hodín strávených štúdiom, kvantifikovať túto závislosť.\nUvažujme situáciu, že absolútne nepripravený študent uhádne \\(40\\%\\) a potom každá strávená hodina učenia mu zvýši očakávaný výsledok o 1 percentuálny bod.\nNie je to úplne nemysliteľné ale keď sa zahľadím na dáta spolu s touto modrou čiarou, tak vidíme, že fituje len nedobre. Ak by sme si mysleli, že nepripravený študent uhádne 50% na teste a každá hodina štúdia navýši očakávaný výsledok o 0.8 percentuálneho bodu, potom by to vyzeralo nasledovne:\nTáto priamka oveľa lepšie fituje dáta. Avšak asi by sme potrebovali nejaký systematickejší spôsob ako zvoliť tú priamku, ktorá najlepšie fituje dáta. Slovo “najlepšie” implikuje, že potrebujeme mať merateľné kritérium, ktoré bude posudzovať kvalitu fitu. Jedným takýmto kritériom je napríklad suma štovrcov vertikálnych vzdialeností.\nSpomedzi všetkých možných priamiek, je práve táto ktorá minimializuje sumu štvorcov vertikálnych výchyliek. Budeme používať nasledovné značenie:\nNájdenie najlepšej priamky v zmysle vedie na takýto optimializačný problém. \\[(\\hat \\beta_0, \\hat \\beta_1) = \\arg \\min_{(\\beta_0, \\beta_1)} \\sum_{i=1}^{n} \\Big(y_i - (\\beta_0 + \\beta_1 x_i) \\Big)^2.\\] Na výpočet sme použili funkciu lm a naše odhady \\((\\hat \\beta_0, \\hat \\beta_1)\\) neznámych parametrov \\((\\beta_0, \\beta_1)\\) sú \\(46.52\\) a \\(1.12.\\) Číslo \\(46.52\\) je výška v ktorej pretína čierna priamka os y a číslo \\(1.12\\) je smernica tejto priamky, teda ako rýchlo rastie.\nEšte predtým, ako sa zavŕtame do detailov, uvedomme si nasledovné skutočnosti\nParametre minimalizujúce sumu štvorcov (a teda maximalizujú fit) sa v tomto prípade dajú spočítať aj analyticky - teda existuje explicitný vzťah do ktorého dosadíme hodnoty \\(x_i, y_i\\) a rovno priamo dostaneme \\((\\hat \\beta_0, \\hat \\beta_1).\\) Toto je užitočné lebo sa ani nemusíme spoliehať na numerické algoritmy.\nVzťah pre \\((\\hat \\beta_0, \\hat \\beta_1)\\) vyzerá nasledovne:\n\\[\\hat \\beta_1 = \\frac{\\sum_{i=1}^n (y_i-\\bar{y})(x_i - \\bar{x}) }{\\sum_{i=1}^n (x_i-\\bar{x})^2} \\]\n\\[\\hat \\beta_0 = \\bar y - \\hat \\beta_1 \\bar x.\\]\nMôžeme sa na problém pozrieť nasledovne. Predpokladajme, že skutočné \\(y_i\\) a \\(x_i\\) sú v nasledujúcom vzťahu\n\\[y_i = \\beta_0 + \\beta_1 x_i + \\epsilon_i,\\] kde \\(\\epsilon_i\\) označuje aproximačnú chybu. Takto rozdelíme variabilitu v \\(y_i\\) na systematickú časť (\\(\\beta_0 + \\beta_1 x_i\\)) a nesystematickú časť (\\(\\epsilon_i\\)). Pomocou nášho odhadu \\((\\hat \\beta_0, \\hat \\beta_1)\\) neznámych parametrov \\((\\beta_0, \\beta_1)\\) teda dostávame odhad \\(\\hat \\epsilon_i = y_i - (\\hat \\beta_0 + \\hat \\beta_1 x_i)\\) skutočných aproximačných chýb \\(\\epsilon_i\\), ktoré sú nepozorované.\nToto je samozrejme nejaké zjednodušenie. Nemusíme veriť, že je to presne tak, robíme to preto, aby sme systematizovali kvantifikáciu vzťahu medzi dvomi veličinami. Ak predpokláme o chybách, že sú rozdelené normálne\n\\[\\epsilon_i \\sim N(0, \\sigma^2),\\] tak potom vieme odvodiť aj pravdepodobnostné správanie samotných odhadov \\((\\hat \\beta_0, \\hat \\beta_1),\\) ktoré majú taktiež normálne rozdelenie a sú centrované okolo skutočných hodnôt \\((\\beta_0,\\beta_1).\\)",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#maticová-notácia",
    "href": "reg.html#maticová-notácia",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.2 Maticová notácia",
    "text": "9.2 Maticová notácia\nAk rovnice \\(y_i = \\beta_0 + \\beta_1 x_i + \\epsilon_i\\) napíšeme pod seba \\(i = 1,2,\\dots,n,\\) dostaneme\n\\[ \\begin{pmatrix}y_1 \\\\ y_2 \\\\ \\vdots \\\\ y_n \\end{pmatrix} = \\begin{pmatrix}1 & x_1 \\\\1 & x_2 \\\\ \\vdots& \\vdots \\\\ 1 & x_n \\end{pmatrix} \\begin{pmatrix}\\beta_0 \\\\ \\beta_1 \\end{pmatrix} + \\begin{pmatrix}\\epsilon_1 \\\\ \\epsilon_2 \\\\ \\vdots \\\\ \\epsilon_n \\end{pmatrix}\\] alebo skrátene len \\[y = X\\beta + \\epsilon.\\]\nOdhad minimalizujúci súčet štvorcov odchýlok je v maticovom zápise nasledovný:\n\\[\\hat \\beta = (X^T X)^{-1} X^T y\\]\nAk uvažujeme, že \\(\\epsilon_i \\sim N(0, \\sigma^2)\\) potom \\(\\epsilon \\sim N(0, \\sigma^2I_n),\\) kde \\(I_n\\) označuje \\(n \\times n\\) maticu identity (diagonálnu maticu s jednotkami na diagonále a nulami inde).\n\\[\\begin{eqnarray*}\n\\hat \\beta &=& (X^T X)^{-1} X^T y \\\\\n&=& (X^T X)^{-1} X^T (X\\beta + \\epsilon) \\\\\n&=& \\beta + (X^T X)^{-1} X^T\\epsilon\n\\end{eqnarray*}\\]\nPreto\n\\[\\begin{eqnarray*}\n\\hat \\beta &\\sim& N(\\beta, (X^T X)^{-1} X^T Var[\\epsilon] X (X^T X)^{-1}  )\\\\\n        &\\sim& N(\\beta, (X^T X)^{-1} X^T \\sigma^2I_n X (X^T X)^{-1}  )\\\\\n        &\\sim& N(\\beta, \\sigma^2 (X^T X)^{-1} X^T X (X^T X)^{-1}  )\\\\\n        &\\sim& N(\\beta, \\sigma^2 (X^T X)^{-1}).\n\\end{eqnarray*}\\]\nTeda my úplne presne vieme aké má pravdepodobnostné rozdelenie. Až na varianciu chýb \\(\\sigma^2\\). Tú nevieme a znova len budeme musieť odhadnúť. Dobrým odhadom (nevychýleným) je\n\\[\\hat \\sigma^2 = \\sum_{i=1}^n  \\frac{\\hat \\epsilon_i^2}{n-k} = \\sum_{i=1}^n  \\frac{ \\left(y_i - (\\beta_0 + \\beta_1 x_i)\\right)^2}{n-k},\\] kde \\(k\\) je počet parametrov v modeli (v našom prípade 2).\nTento odhad variancie chýb použijeme na odhad kovariančnej matice \\(\\hat \\beta\\):\n\\[\\hat Var[\\hat \\beta] = \\hat Var\\left[\\begin{pmatrix}\\hat \\beta_0 \\\\ \\hat \\beta_1 \\end{pmatrix}\\right] = \\hat \\sigma^2 (X^T X)^{-1}.\\] Diagonálne elementy \\(2 \\times 2\\) matice \\(Var[\\hat \\beta]\\) sú \\(Var\\left[\\hat \\beta_0\\right]\\) a \\(Var\\left[\\hat \\beta_1\\right].\\) Podobne diagonálne členy odhadu (symetrickej) matice \\(\\hat [\\hat \\beta]\\) sú \\(\\hat Var\\left[\\hat \\beta_0\\right]\\) a \\(\\hat Var\\left[\\hat \\beta_1\\right]\\), mimo diagonály sú \\(\\hat Cov\\left[\\hat \\beta_0,\\hat \\beta_1\\right]\\).",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#názvoslovie",
    "href": "reg.html#názvoslovie",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.3 Názvoslovie",
    "text": "9.3 Názvoslovie\nPripomeňme si, čo je čo. V matematike je pekným zvykom rozumieť, čo ktoré objekty označujú.\n\n\\(x_4\\) je náhodná premenná, ide o náhodnú premennú \\(x\\) nameranú pre štvrté pozorovanie,\n\\(y_7\\) je náhodná premenná, ide o náhodnú premennú \\(y\\) nameranú pre siedme pozorovanie,\n\\(\\epsilon_2\\) je náhodná premenná, realizáciu tejto náhodnej premennej druhéhp pozorovania nepozorujeme,\n\\(\\bar x\\) je náhodná premenná (lebo je to funkcia iných náhodných premenných),\n\\(\\bar y\\) je náhodná premenná (lebo je to funkcia iných náhodných premenných),\n\\(\\beta_0\\) je číslo. Fixné ale nám neznáme. Hovorí o priesečníku (s osou \\(y\\)) neznámej ale fixnej priamky \\(\\beta_0 + \\beta_1 x\\),\n\\(\\hat \\beta_0\\) je náhodná premenná. Je funkciou iných náhodných premenných a odhaduje nám neznáme číslo \\(\\beta_0\\),\n\\(\\beta_1\\) je číslo. Fixné ale nám neznáme. Hovorí o smernici neznámej ale fixnej priamky \\(\\beta_0 + \\beta_1 x\\),\n\\(\\hat \\beta_1\\) je náhodná premenná. Je funkciou iných náhodných premenných a odhaduje nám neznáme číslo \\(\\beta_1\\),\n\\(y\\) je vektor náhodných premenných,\n\\(X\\) je matica náhodných premenných, ktorá sa skladá z dvoch stĺpcov: jednotiek a vektora náhodných premenných \\(x_1\\) až \\(x_n\\),\n\\(\\beta\\) je fixný ale nám neznámy \\(2 \\times 1\\) vektor,\n\\(\\hat \\beta\\) je náhodný vektor,\n\\(\\sigma^2\\) je fixné ale nám neznáme číslo. Je to variancia chýb \\(\\epsilon_i\\). Uvažujeme, že sú rovnaké pre všetky \\(i=1,\\dots,n,\\)\n\\(\\hat \\sigma^2\\) je náhodná premenná. Je to odhad nám neznámej hodnoty \\(\\sigma^2\\),\n\\(Var\\left[\\hat \\beta\\right] = \\sigma^2 (X^T X)^{-1}\\) je kovariančná matica náhodného vektora \\(\\hat \\beta\\),\n\\(\\hat Var\\left[\\hat \\beta\\right] = \\hat \\sigma^2 (X^T X)^{-1}\\) je odhad kovariančnej matice náhodného vektora \\(\\hat \\beta\\).",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#ako-na-to",
    "href": "reg.html#ako-na-to",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.4 Ako na to",
    "text": "9.4 Ako na to\nČiaru minimalizujúcu fit v zmysle najmenších štvorcov odchýlok dostaneme aj použitím funkcie geom_smooth možnosťou method=\"lm\" a formula = \"y~x\" ako je uvedené nižšie.\n\nlibrary(tidyverse)\ndf &lt;- data.frame(hours = hoursLearned, \n                 score = testScore)\n\nggplot(data=df, aes(x=hours,y=score)) +\n  geom_point()+\n  geom_smooth(method=\"lm\",\n              formula = \"y~x\",\n              se=FALSE)\n\n\n\n\n\n\n\n\nAk chceme detailné informácie o krivke, použijeme funkciu lm a summary.\n\nlmod &lt;- lm(testScore ~ hoursLearned)\nsummary(lmod)\n\n\nCall:\nlm(formula = testScore ~ hoursLearned)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-10.2990  -2.2503  -0.8337   1.9847  12.0375 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   46.5193     3.6968  12.584 1.49e-06 ***\nhoursLearned   1.1195     0.1712   6.538 0.000181 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6.246 on 8 degrees of freedom\nMultiple R-squared:  0.8424,    Adjusted R-squared:  0.8226 \nF-statistic: 42.75 on 1 and 8 DF,  p-value: 0.0001807\n\n\nJe tu veľa informácií. Všetky tieto čísla si dopodrobna rozoberieme.\n\n\n\n\n\nRegresná tabuľka\n\n\n\n\n\nParameter formula nám hovorí akou rovnicou aproximujeme \\(y_i\\) pomocou \\(x_i\\).\nResiduals označujú charakteristiky distribúcie odhadovaných chýb, takže hodnoty \\(\\hat \\epsilon_i\\).\nV tabuľke koeficientov je prvý riadok o odhade \\(\\hat \\beta_0\\) a druhý riadok o odhade \\(\\hat \\beta_1\\).\nPrvý stĺpec sú samotné hodnoty odhadov, v druhom sú odhady smerodajných odchýlok odhadov, nazývané aj štandardné chyby (v angl. Standard errors).\nV treťom stĺpci sú testovacie štatistiky, ktoré testujú hypotézu \\(H_0: \\beta_0 = 0\\) a \\(H_0: \\beta_1 = 0\\) a v poslednom stĺpci sú príslušné p-hodnoty týchto testov (viac o testovacích štatistikách neskôr).\n\nPokračujeme ďalej:\n\n\n\n\n\nRegresná tabuľka\n\n\n\n\n\nV tabuľke máme aj reziduálnu štandardnú chybu, čo je odhad smerodajnej odchýlky reziduí \\(\\hat{sd}[\\hat \\epsilon]\\),\nPočet stupňov voľnosti je počet pozorovaní mínus počet parametrov v modeli,\n\\(R^2\\) je číslo medzi 0 a 1, ktoré vyjadruje kvalitu fitu. Hodnota 0 znamená, že \\(x\\) neposkytuje žiadnu užitočnú informáciu na fitovanie \\(y\\) (pomocou lineárneho modelu), hodnota 1 znamená, že \\(x\\) perfektne predikuje \\(y\\) (pomocou lineárneho modelu),\nF štatistika testuje významnosť regresie, teda v tomto prípade porovnáva modely \\(y_i = \\beta_0 + \\beta_1 x_i + \\epsilon_i,\\) a \\(y_i = \\beta_0 + \\epsilon_i,\\) takže v tomto prípade testuje \\(H_0: \\beta_1 = 0.\\) (Všimnime si, že p-hodnota je rovnaká ako v riadku pri \\(\\hat \\beta_1\\), až na zaokrúhlenie).",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#geometria-najmenších-štvorcov",
    "href": "reg.html#geometria-najmenších-štvorcov",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.5 Geometria najmenších štvorcov",
    "text": "9.5 Geometria najmenších štvorcov\nMetóda, ktorá nastavuje parametre neznámej priamky tak, že minimalizuje sumu štvorcov má zaujimavú geometrickú interpretáciu.\nIde totiž o projekciu.\n \nSnažíme sa projektovať vektor \\(y = (y_1, y_2, \\dots, y_n)^T\\) do podpriestoru generovaného konštantných jednotiek \\((1,1,\\cdots,1)^T\\) a \\(x = (x_1, x_2, \\dots, x_n)^T\\).\n\n\n\n\n\nGeometria najmenších štvorcov\n\n\n\n\nObrázok ukazuje geometriu najmenších štvorcov. Každý vektor (šípka) reprezentuje bod v n-rozmernom priestore. Vektor \\(y\\) sa nenachádza v priestore generovanom vektorom konštantných jednotiek a \\(x\\). Metóda najmenších štvorcov projektu vektor \\(y\\) do tohoto podpriestoru, teda hľadá minimálnu vzdialenosť červeného vektora \\(\\hat \\epsilon\\) v zmysle euklidovskej vzdialenosti (to je taká tá obyčajná na akú sme zvyknú v našom 3D svete a meriame ju pravítkom). Takže tu máme viacerozmernú verziu Pytagorovho trojuholníka.\nMiera (lineárneho) fitu je popísaná nasledujúcim vzťahom:\n\\[R^2 = 1- \\frac{\\sum (y_i - \\hat y_i )^2}{\\sum (y_i - \\bar y)^2} = 1- \\frac{{RSS}}{{TSS}} =  \\frac{ESS}{{TSS}} = \\frac{\\sum (\\bar y - \\hat y_i )^2}{\\sum (y_i - \\bar y)^2},\\] kde používame nasledovné značenie\n\nRSS - reziduálna suma štvorcov (residual sum of squares),\nESS - vysvetlená suma štvorcov (explained sum of squares),\nTSS - celková suma štvorcov (total sum of squares).\n\nNejde v podstate o nič iné ako odhad lineárnej súvzťažnosti medzi \\(y\\) a odhadovaných \\(\\hat y\\): \\[R^2 = \\left(\\hat{cor}(\\hat y, y)\\right)^2 = \\frac{\\sum (\\bar y - \\hat y_i )^2}{\\sum (y_i - \\bar y_i)^2}.\\]\nHodnota \\(R^2\\) nám teda hovorí o miere lineárnej súvzťažnosti medzi fitovanými hodnotami \\(\\hat y\\) a skutočnými hodnotami \\(y\\). Toto však môže byť matúce, ak medzi dvomi premennými nie je lineárny vzťah. (Tuto ide o menej zábavnú verziu datasetov s dinosaurom.)\n\n\n\n\n\nVeľmi rôzne dáta vedú na rovnaké miery fitu \\(R^2\\). (Zdroj: Faraway, Julian J. Linear models with R. Chapman and Hall/CRC, 2004.)\n\n\n\n\nAle to je tak vždy, keď sa komplexnú informáciu snažím skomprimovať do jedného čísla, svet je totiž rozmanitý.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#konfidenčné-intervaly",
    "href": "reg.html#konfidenčné-intervaly",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.6 Konfidenčné intervaly",
    "text": "9.6 Konfidenčné intervaly\nChceli by sme kvantifikovať neistotu spojenú s odhadom budúcich hodnôt. Ako veľmi si môžeme byť istí tým, že študent učiaci sa 20 hodín bude mať očakávaný počet bodov práve \\(\\hat \\beta_0 + \\hat \\beta_1 20 = 46.52 + 1.12 \\cdot 20 = 68.92\\)?\nNakoľko vieme kvantifikovať neistotu spojenú s \\(\\hat \\beta_0\\) a \\(\\hat \\beta_1\\), môžeme použiť na \\(\\hat \\beta_0 + \\hat \\beta_1 x\\) pre akékoľvek číslo \\(x\\).\nStredná hodnota pre modelovanú premennú ak by \\(x\\) nadobúdalo hodnotu \\(x_0\\) je \\[\\hat y_0 = \\hat \\beta_0 + \\hat \\beta_1 x_0 =  (1, x_0) \\begin{pmatrix} \\hat \\beta_0 \\\\ \\hat \\beta_1 \\end{pmatrix}\\]\nZatiaľčo budúca hodnota je \\[y_0 = \\hat y_0 + \\epsilon_0\\]\n\n\\(95\\%\\)ný konfidenčný interval pre strednú hodnotu \\(\\hat y_0 \\pm t_{n-p}^{(\\alpha/2)} \\hat \\sigma \\sqrt{ (1, x_0) (X^T X)^{-1}(1, x_0)^T}\\)\n\\(95\\%\\)ný predičný interval pre budúcu hodnotu \\(\\hat y_0 \\pm t_{n-p}^{(\\alpha/2)} \\hat \\sigma \\sqrt{1 + (1, x_0) (X^T X)^{-1}(1, x_0)^T}\\)\n\nTen druhý interval je širší, lebo v sebe zahŕňa aj informáciu o buducej chybe \\(\\epsilon_0\\)\n\\[\\begin{eqnarray*}\nvar(\\hat y_0 + \\epsilon_0) &=& var(\\hat y_0)+ var(\\epsilon_0) \\\\\n&=&  (1, x_0) (X^T X)^{-1}(1, x_0)^T \\sigma^2 + \\sigma^2 \\\\\n&=& \\big({\\color{green}1 +} (1, x_0) (X^T X)^{-1}(1, x_0)^T\\big) \\sigma^2\n\\end{eqnarray*}\\]\n\n\n\n\n\nKonfidenčné a predikčné intervaly.\n\n\n\n\nPredikčné intervaly nie sú v ggplot2 natívne, preto si ich musíme dorobiť mechanicky.\n\nlmod &lt;- lm(score ~ hours, data=df)\n\npi95 &lt;- predict(lmod, interval=\"prediction\")\n\nWarning in predict.lm(lmod, interval = \"prediction\"): predictions on current data refer to _future_ responses\n\ndf2      &lt;- cbind(df, pi95)\n\nggplot(data=df2, aes(x=hours,y=score)) +\n  geom_point()+\n  geom_smooth(method=\"lm\",\n              formula = \"y~x\",\n              se=TRUE) + \n  geom_line(aes(y=lwr), color = \"red\", linetype = \"dashed\")+\n  geom_line(aes(y=upr), color = \"red\", linetype = \"dashed\")",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#viacrozmerná-lineárna-regresia",
    "href": "reg.html#viacrozmerná-lineárna-regresia",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.7 Viacrozmerná lineárna regresia",
    "text": "9.7 Viacrozmerná lineárna regresia\nDoteraz nám lineárna regresia slúžila na modelovanie vzťahu medzi dvomi veličinami. Častokrát však chceme použiť mnoho rôznych faktorov na predikovanie nejakej premennej. Napríklad\n\nrôzne vlastnosti ojazdeného auta môžu determinovať jeho trhovú cenu,\nrôzne vlastnosti absolventa budú terminovať jeho mzdu o 10 rokov,\nrôzne vlastnosti filmu môžu determinovať jeho obľúbenosť alebo zisk, ktorý vygeneruje.\n\nZačneme triviálnym rozšírením nášho modelu. Teraz nebudeme mať len jeden prediktor \\(x\\) ale mnoho. Model bude vyzerať nasledovne:\n\\[y_i = \\beta_0 + \\beta_1 x_{i1} + \\beta_2 x_{i2} + \\dots + \\beta_p x_{ip} + \\epsilon_{i}\\]\n\n\n\n\n\nVizualizácia lineárnej regresie, vľavo sa použitím len jednej vysvetľovacej premennej, vpravo dvomi. (Zdroj: Faraway, Julian J. Linear models with R. Chapman and Hall/CRC, 2004.)\n\n\n\n\nMaticová notácia nám ostáva, len musíme predefinovať maticu \\(X\\):\n\\[ \\begin{pmatrix}y_1 \\\\ y_2 \\\\ \\vdots \\\\ y_n \\end{pmatrix} = \\begin{pmatrix}1 & x_{11} & x_{12} & \\dots & x_{1n} \\\\1 & x_{21} & x_{22} & \\dots & x_{2n} \\\\ \\vdots& \\vdots& \\vdots & \\vdots & \\vdots \\\\ 1 & x_{n1} & x_{n2} & \\dots & x_{1n} \\end{pmatrix} \\begin{pmatrix}\\beta_0 \\\\ \\beta_1 \\\\ \\beta_2\\\\ \\vdots \\\\ \\beta_p \\end{pmatrix} + \\begin{pmatrix}\\epsilon_1 \\\\ \\epsilon_2 \\\\ \\vdots \\\\ \\epsilon_n \\end{pmatrix}\\] alebo skrátene len \\[y = X\\beta + \\epsilon.\\]\nPreto bude zápis odhadu minimalizujúceho súčet štvorcov odchýlok v maticovom zápise rovnaký ako predtým:\n\\[\\hat \\beta = (X^T X)^{-1} X^T y\\] Demonštrujeme si to na príklade. Chceli by sme vysvetlovať tržby na základe objemu peňazí investovaného do rôzneho typu reklamy (facebook, youtube, noviny).\n\nlibrary(datarium)\ndata(\"marketing\", package = \"datarium\")\n#let us try to explain sales with ads on both youtube and facebook\nsummary(marketing)\n\n    youtube          facebook       newspaper          sales      \n Min.   :  0.84   Min.   : 0.00   Min.   :  0.36   Min.   : 1.92  \n 1st Qu.: 89.25   1st Qu.:11.97   1st Qu.: 15.30   1st Qu.:12.45  \n Median :179.70   Median :27.48   Median : 30.90   Median :15.48  \n Mean   :176.45   Mean   :27.92   Mean   : 36.66   Mean   :16.83  \n 3rd Qu.:262.59   3rd Qu.:43.83   3rd Qu.: 54.12   3rd Qu.:20.88  \n Max.   :355.68   Max.   :59.52   Max.   :136.80   Max.   :32.40  \n\nlmod &lt;- lm(sales ~ youtube+facebook + newspaper,data=marketing)\nsummary(lmod)\n\n\nCall:\nlm(formula = sales ~ youtube + facebook + newspaper, data = marketing)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-10.5932  -1.0690   0.2902   1.4272   3.3951 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  3.526667   0.374290   9.422   &lt;2e-16 ***\nyoutube      0.045765   0.001395  32.809   &lt;2e-16 ***\nfacebook     0.188530   0.008611  21.893   &lt;2e-16 ***\nnewspaper   -0.001037   0.005871  -0.177     0.86    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.023 on 196 degrees of freedom\nMultiple R-squared:  0.8972,    Adjusted R-squared:  0.8956 \nF-statistic: 570.3 on 3 and 196 DF,  p-value: &lt; 2.2e-16\n\n\nMôžeme si všimnúť, že tržby sú pozitívne asociované s nákladami na reklamu na Youtube a Facebooku a príslušné koeficienty sú štatisticky významné. Reklama v novinách je len veľmi málo asociovaná s tržbami, dokonca negatívne ale jej koeficient nie je štatisticky významný. A táto negatívna parciálna asociácia je tam aj napriek tomu, že samotná korelácia medzi reklamou v novinách a tržbami je pozitívna. Môže to byť napríklad tým, že keď firmy inzerujú na Facebooku, tak inzerujú aj v novinách ale v skutočnosti je ta tá Facebooková reklama, ktorá zaberá. Každopádne teraz skúmame len asociácie. Nevieme, prečo v skutočnosti tržby rastú.\n\nlibrary(corrplot)\ncorrplot(cor(marketing), type = \"upper\", order = \"hclust\", \n         tl.col = \"black\", tl.srt = 45)\n\n\n\n\n\n\n\n\nTeraz si zobrazme asociáciu medzi tržbami a štatisticky významými prediktormi (youtube, facebook), spolu s odhadnutou regresnou plochou.\n\n# we will follow https://rpubs.com/pjozefek/576206\n# and modify it for our purposes\nattach(marketing)\n\ny &lt;- sales\nx1 &lt;- facebook\nx2 &lt;- youtube\n\nlmodM &lt;- lm(y ~ x1 + x2)\nsummary(lmodM)\n\n\nCall:\nlm(formula = y ~ x1 + x2)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-10.5572  -1.0502   0.2906   1.4049   3.3994 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  3.50532    0.35339   9.919   &lt;2e-16 ***\nx1           0.18799    0.00804  23.382   &lt;2e-16 ***\nx2           0.04575    0.00139  32.909   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.018 on 197 degrees of freedom\nMultiple R-squared:  0.8972,    Adjusted R-squared:  0.8962 \nF-statistic: 859.6 on 2 and 197 DF,  p-value: &lt; 2.2e-16\n\nlibrary(plot3D)\ngrid.lines = 20\nx1.pred &lt;- seq(min(x1), max(x1), length.out = grid.lines)\nx2.pred &lt;- seq(min(x2), max(x2), length.out = grid.lines)\nx1x2 &lt;- expand.grid( x1 = x1.pred, x2 = x2.pred)\ny.pred &lt;- matrix(predict(lmodM, newdata = x1x2), \n                 nrow = grid.lines, ncol = grid.lines)\n\n# create the fitted points for droplines to the surface\nfitpoints &lt;- predict(lmodM)\n\n# scatter plot with regression plane\nscatter3D(x1, x2, y, pch = 19, cex = 1,colvar = NULL, col=\"red\", \n          theta = -130, phi = 20, bty=\"b\",\n          xlab = \"youtube\", ylab = \"facebook\", zlab = \"sales\",  \n          surf = list(x = x1.pred, y = x2.pred, z = y.pred,  \n                      facets = TRUE, fit = fitpoints, \n                      col=ramp.col (col = c(\"dodgerblue3\",\"seagreen2\"), \n                                    n = 300, alpha=0.9), border=\"black\"), \n          main = \"Marketing\")",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#nelineárne-vzťahy-a-lineárna-regresia",
    "href": "reg.html#nelineárne-vzťahy-a-lineárna-regresia",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.8 Nelineárne vzťahy a lineárna regresia",
    "text": "9.8 Nelineárne vzťahy a lineárna regresia\nNiekedy je závislosť medzi dvomi premennými zjavne nelineárna. Ak sa nazdávame, že by bola vhodne modelovaná kvadratickou funkciou, potom by sme chceli fitovať nasledovný model.\n\\[y_i = \\beta_0 + \\beta_1 x_i + \\beta_2 x^2_i + \\epsilon_i,\\] Takýto model odhadneme nasledovne (dva spôsoby).\n\nmarketing$youtube2 &lt;- (marketing$youtube)^2\n\n#lmodq &lt;- lm(sales ~ youtube + youtube2, data=marketing)\n#summary(lmod)\n\nlmodq2 &lt;- lm(sales ~ youtube + I(youtube^2), data=marketing)\nsummary(lmodq2)\n\n\nCall:\nlm(formula = sales ~ youtube + I(youtube^2), data = marketing)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-9.2213 -2.1412 -0.1874  2.4106  9.0117 \n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   7.337e+00  7.911e-01   9.275  &lt; 2e-16 ***\nyoutube       6.727e-02  1.059e-02   6.349 1.46e-09 ***\nI(youtube^2) -5.706e-05  2.965e-05  -1.924   0.0557 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.884 on 197 degrees of freedom\nMultiple R-squared:  0.619, Adjusted R-squared:  0.6152 \nF-statistic: 160.1 on 2 and 197 DF,  p-value: &lt; 2.2e-16\n\n\nZo sumárnej tabuľky vidime, že kvadratický člen má pridružený p-hodnotu tesne nad \\(5\\%\\). Na tomto obrázku to môžeme porovnať vizuálne.\n\nggplot(data=marketing, aes(x=youtube, y=sales)) +\n  geom_point() + \n  geom_smooth(method=\"lm\",formula=\"y ~ x\") + \n  geom_smooth(method=\"lm\",formula=\"y ~ x + I(x^2)\",col=\"red\")\n\n\n\n\n\n\n\n\nTeraz môžeme tieto myšlienky nakombinovať. Uvažujme, nech je závislosť v premennej youtube kvadratická a nech je v premennej facebook lineárna:\n\\[sales_i = \\beta_0 + \\beta_1 youtube_i + \\beta_2 youtube^2_i + \\beta_3 facebook_i  + \\epsilon_i,\\]\n\nlmod_yt2 &lt;- lm(sales ~ youtube + I(youtube^2) + facebook, data=marketing)\nsummary(lmod_yt2)\n\n\nCall:\nlm(formula = sales ~ youtube + I(youtube^2) + facebook, data = marketing)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-8.8632 -1.0586 -0.0598  1.1536  4.2870 \n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   1.545e+00  4.306e-01   3.588 0.000421 ***\nyoutube       7.844e-02  4.985e-03  15.736  &lt; 2e-16 ***\nI(youtube^2) -9.465e-05  1.397e-05  -6.775 1.42e-10 ***\nfacebook      1.930e-01  7.293e-03  26.465  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.821 on 196 degrees of freedom\nMultiple R-squared:  0.9167,    Adjusted R-squared:  0.9154 \nF-statistic:   719 on 3 and 196 DF,  p-value: &lt; 2.2e-16\n\n\nBerúc do úvahy aj reklamu na Facebooku sa kvadratický člen pri Youtube ukazuje ako silne signifikantný.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#testovanie-podmodelov",
    "href": "reg.html#testovanie-podmodelov",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.9 Testovanie podmodelov",
    "text": "9.9 Testovanie podmodelov\nAk sme v situácii, že máme 2 modely, jeden zložitejší, čo fituje dáta lepšie a jeden jednoduchší, ktorý je zasa elegantnejší. Ako sa medzi nimi rozhodujeme? Za predpokladu normality chýb na to môžeme použiť testovaciu štatistiku. Ak by bol menší model (ktorý je len špeciálnou verziou väčšieho modelu) správny, má nasledovná štatistika F rozdelenie.\n\\[\\frac{(RSS_{rest}-RSS_{full})/df}{\\hat \\sigma^2} \\sim F_{df, n-p},\\] kde\n\n\\(RSS_{rest}\\) je reziduálna suma štvorcov menšieho (jednoduchšieho) modelu\n\\(RSS_{full}\\) je reziduálna suma štvorcov plného (zložitejšieho) modelu\n\\(df\\) je počet reštrikcií, ktoré z plného modelu urobia jednoduchší\n\\(n\\) je počet pozorovaní\n\\(p\\) je počet premenných vo veľkom modeli\n\\(\\sigma^2\\) je odhad variancie reziduí.\n\nGeometria je nasledovná\n\n\n\n\n\nPorovnanie zložitejšieho a jednoduchšieho modelu.\n\n\n\n\nTest toho, či je podmodel korektný, je implementovaný nasledovne:\n\nlmod_full &lt;- lm(sales ~ youtube + I(youtube^2) + facebook + newspaper, data=marketing)\nlmod_rest &lt;- lm(sales ~ youtube + facebook, data=marketing)\n\nRSS_rest &lt;- sum(lmod_rest$residuals^2)\nRSS_full &lt;- sum(lmod_full$residuals^2)\n\nanova(lmod_rest,lmod_full)\n\nAnalysis of Variance Table\n\nModel 1: sales ~ youtube + facebook\nModel 2: sales ~ youtube + I(youtube^2) + facebook + newspaper\n  Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    \n1    197 801.96                                  \n2    195 649.71  2    152.25 22.847 1.217e-09 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nTeraz tieto čísla zreprodukujeme mechanicky:\n\n#get F-statistic\n# this tests null hypothesis H0:beta1=0\n(Fstat &lt;- ((RSS_rest - RSS_full)/2) / (RSS_full/(200-5)) ) \n\n[1] 22.84728\n\n#corresponding p-value\n1 - pf(Fstat,df1=2,df2=200-5)\n\n[1] 1.217338e-09\n\n\nTu sme testovali reštrikciu, či je kvadratický člen youtube nevýznamný a zároveň či je prediktor newspaper nevýznamný, teda či sú prislúchajúce koeficienty nulové.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#transformácie-a-interpretácia",
    "href": "reg.html#transformácie-a-interpretácia",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.10 Transformácie a interpretácia",
    "text": "9.10 Transformácie a interpretácia\nV niektorých prípadoch modelujeme namiesto samotnej premennej jej rast. Napríklad je asi uveriteľnejšie uvažovať, že vzdelanie môže pomôcť zvýšit mzdu proporcionálne. To znamená, že absolvovanie vysokej školy zvýši mzdu v priemere približne o 20% a nie o 300eur. Rozdiel medzi 1000eur a 1300eur je totiž výraznejší z praktického hľadiska ako z 3500eur na 3800eur. Na modelovanie rastu používame logaritmickú transformáciu. Všetko si to ukážeme na našom príklade so študentami a ich výkonom na teste.\n\nhoursLearned &lt;- c(2,40,33,11,20,12,13.5,10,11,30,\n                  6,22,45,20,11,22,40,29,47,9)\ntestScore &lt;- c(44, 81, 95.5, 63.5, 71, 59, 59, 57, 60.5, 79,\n               45, 54, 50, 52, 50, 61, 68, 66, 64, 50)\ngroup &lt;- c(rep(\"A\",10), rep(\"B\",10))\ngA &lt;- (group==\"A\")*1\ngB &lt;- (group==\"B\")*1\n\nNa konci každého modelu je korektná interpretácia. Budeme uvažovať štyri rôzne modely.\n\nLevel-level model \\(testScore_i = \\beta_0 + \\beta_1 \\log(hoursLearned_i) + \\beta_2 g^A_i + \\epsilon_i\\)\nLog-level model ak budeme modelovať rast skóre pomocou hodín strávených učením \\(\\log(testScore_i) = \\beta_0 + \\beta_1 hoursLearned_i + \\beta_2 g^A_i + \\epsilon_i\\)\nLevel-log model ak budeme modelovať skóre pomocou rastu hodín strávených učením \\(testScore_i = \\beta_0 + \\beta_1 \\log(hoursLearned_i) + \\beta_2 g^A_i + \\epsilon_i\\)\nLog-log model ak budeme modelovať rast skóre pomocou rastu hodín strávených učením \\(\\log(testScore_i) = \\beta_0 + \\beta_1 \\log(hoursLearned_i) + \\beta_2 g^A_i + \\epsilon_i\\)\n\nKtorý z týchto modelov je najrozumnejší? Treba zvažiť. Každopádne rozhodovanie by nemalo záležať na tom, ako dobre nám modelu fituje dáta. Do rozhovorov by sme mali prizvať niekoho, kto sa vyzná do danej problematiky.\n\n9.10.1 Level-level model\n\\[testScore_i = \\beta_0 + \\beta_1 hoursLearned_i + \\beta_2 g^A_i + \\epsilon_i\\]\n\n#level - level\nlmod_lv_lv &lt;- lm(testScore ~ gA + hoursLearned)\nsummary(lmod_lv_lv)\n\n\nCall:\nlm(formula = testScore ~ gA + hoursLearned)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-19.0139  -4.0357   0.6593   3.5072  18.9040 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   39.5855     4.4224   8.951 7.65e-08 ***\ngA            15.4297     3.7988   4.062 0.000811 ***\nhoursLearned   0.6540     0.1426   4.585 0.000264 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 8.209 on 17 degrees of freedom\nMultiple R-squared:  0.6376,    Adjusted R-squared:  0.595 \nF-statistic: 14.96 on 2 and 17 DF,  p-value: 0.0001789\n\n#our model predicts that for a given group fixed an increase of \n# 1hour additional learning is associated with an increase of \n# test score by 0.65 points on average\nplot(hoursLearned, testScore, pch=group)\nabline(lmod_lv_lv$coeff[1],lmod_lv_lv$coeff[3])\nabline(lmod_lv_lv$coeff[1]+lmod_lv_lv$coeff[2],lmod_lv_lv$coeff[3])\n\n\n\n\n\n\n\n\nInterpretácia: Náš model predikuje, že pre danú skupinu žiakov je každá ďaľšia hodina učenia asociovaná s navýšením skóre v priemere o \\(0.65\\).\n\\[\\begin{eqnarray*}\ny_i &=& \\beta_0 + \\beta_1 x_i + \\epsilon_i \\\\\n&& x_i \\rightarrow x_i + \\Delta \\\\\n&& \\implies \\\\\ny_i &\\rightarrow& \\beta_0 + \\beta_1 (x_i + \\Delta) + \\epsilon_i  \\\\\ny_i &\\rightarrow& \\beta_0 + \\beta_1 x_i + \\epsilon_i +  \\beta_1 \\Delta  \\\\\ny_i &\\rightarrow& y_i +  \\beta_1 \\Delta\n\\end{eqnarray*}\\]\n \nTu je dôležité poznamenať niekoľko skutočností\n\nNáš model predikuje je dôležitý disclaimer a nielen slovná vata. Ide o to, že my nehovoríme o pravde, lebo nevieme aká je pravda. My hovoríme o našom lineárnom regresnom modeli, ktorý má len aproximovať realitu.\npre danú skupinu žiakov znamená, že parameter \\(g^A\\) je zafixovaný.\nje asociovaná neznamená, že spôsobuje. Nevieme čo spôsobuje čo, netušíme nič o kauzalite. Popisujeme ako nejaké premenné zvyknú spolu nastávať.\n\nToto nie sú detaily. Naozaj nie. Korektná interpretácia precízne komunikuje výsledky a podčiarkuje limity použitej štatistickej metódy.\n\n\n9.10.2 Log-level model\n\\[\\log(testScore_i) = \\beta_0 + \\beta_1 hoursLearned_i + \\beta_2 g^A_i + \\epsilon_i\\]\n\n#log - level\nlmod_log_lv &lt;- lm(log(testScore) ~ gA + hoursLearned)\nsummary(lmod_log_lv)\n\n\nCall:\nlm(formula = log(testScore) ~ gA + hoursLearned)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.309170 -0.043717 -0.000054  0.061891  0.225005 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  3.757613   0.067438  55.720  &lt; 2e-16 ***\ngA           0.236549   0.057929   4.083 0.000774 ***\nhoursLearned 0.010302   0.002175   4.736 0.000191 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.1252 on 17 degrees of freedom\nMultiple R-squared:  0.6475,    Adjusted R-squared:  0.606 \nF-statistic: 15.61 on 2 and 17 DF,  p-value: 0.0001417\n\n#our model predicts that for a given group fixed an increase of \n# 1hour additional learning is associated with an increase of \n# test score by approximately 1.03% on average\nx &lt;- seq(1,50,by=1)\ndfA &lt;- data.frame(gA= rep(1,50),hoursLearned=x)\npredA &lt;- exp(predict(lmod_log_lv,dfA))\ndfB &lt;- data.frame(gA= rep(0,50),hoursLearned=x)\npredB &lt;- exp(predict(lmod_log_lv,dfB))\nplot(hoursLearned, testScore, pch=group)\nlines(x,predA)\nlines(x,predB)\n\n\n\n\n\n\n\n\nInterpretácia: Náš model predikuje, že pre danú skupinu žiakov je každá ďaľšia hodina učenia asociovaná s navýšením skóre v priemer o približne \\(1.03\\%\\).\n\\[\\begin{eqnarray*}\n\\log(y_i) &=& \\beta_0 + \\beta_1 x_i + \\epsilon_i \\\\\n&& x_i \\rightarrow x_i + \\Delta \\\\\n&& \\implies \\\\\n\\log(y_i) &\\rightarrow& \\beta_0 + \\beta_1 (x_i + \\Delta) + \\epsilon_i  \\\\\ny_i &\\rightarrow& e^{\\beta_0 + \\beta_1 (x_i + \\Delta) + \\epsilon_i}  \\\\\ny_i &\\rightarrow& e^{\\beta_0 + \\beta_1 x_i + \\epsilon_i +  \\beta_1 \\Delta}  \\\\\ny_i &\\rightarrow& e^{\\beta_0 + \\beta_1 x_i + \\epsilon_i}  e^{\\beta_1 \\Delta}  \\\\\ny_i &\\rightarrow& y_i e^{\\beta_1 \\Delta} \\\\\n&\\sim&\\\\\ny_i &\\rightarrow& y_i (1+\\beta_1 \\Delta)\n\\end{eqnarray*}\\]\n \nTáto aproximácia (preto to slovo približne) je založená na tom, že pre malé hodnoty \\(x\\) je funkcia \\((1+\\beta x)\\) veľmi podobná funkcii \\(e^{\\beta x}\\) ako je zobrazené na tomto obrázku.\n\n# 1+beta*x is similar to exp(beta*x) for small x\nx &lt;- seq(-5,5,0.01)\nbeta &lt;- 0.5\ny1 &lt;- 1+beta*x\ny2 &lt;- exp(beta*x)\nplot(x,y1,type=\"l\",col=\"red\")\nlines(x,y2,type=\"l\",col=\"blue\")\npoints(0,1)\n\n\n\n\n\n\n\n\n\n\n9.10.3 Level-log model\n\\[testScore_i = \\beta_0 + \\beta_1 \\log(hoursLearned_i) + \\beta_2 g^A_i  + \\epsilon_i\\]\n\n#level - log\nlhoursLearned &lt;- log(hoursLearned)\nlmod_lv_log &lt;- lm(testScore ~ gA + lhoursLearned)\nsummary(lmod_lv_log)\n\n\nCall:\nlm(formula = testScore ~ gA + lhoursLearned)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-15.709  -3.417   0.372   3.872  17.950 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)     18.257      6.801   2.684 0.015675 *  \ngA              15.707      3.256   4.824 0.000159 ***\nlhoursLearned   12.465      2.122   5.874 1.84e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 7.052 on 17 degrees of freedom\nMultiple R-squared:  0.7325,    Adjusted R-squared:  0.7011 \nF-statistic: 23.28 on 2 and 17 DF,  p-value: 1.354e-05\n\n#our model predicts that for a given group fixed an increase of \n# 1% in time spent learning is associated with an increase of \n# test score by approximately on average 0.12 points\n# (hence doubling the time learning ~ +12points)\nx &lt;- seq(1,50,by=1)\nlx &lt;- log(seq(1,50,by=1))\ndfA &lt;- data.frame(gA= rep(1,50),lhoursLearned=lx)\npredA &lt;- predict(lmod_lv_log,dfA)\ndfB &lt;- data.frame(gA= rep(0,50),lhoursLearned=lx)\npredB &lt;- predict(lmod_lv_log,dfB)\nplot(hoursLearned, testScore, pch=group)\nlines(x,predA)\nlines(x,predB)\n\n\n\n\n\n\n\n\nInterpretácia: Náš model predikuje, že pre danú skupinu žiakov je nárast učenia o 1% asociovaný s navýšením skóre v priemere o približne \\(0.12\\). Takže zdvojnásobnenie je asociované s približne 12 bodmi na teste.\n\\[\\begin{eqnarray*}\ny_i &=& \\beta_0 + \\beta_1 \\log(x_i) + \\epsilon_i \\\\\n&& x_i \\rightarrow x_i (1+\\Delta) \\\\\n&& \\implies \\\\\ny_i &\\rightarrow& \\beta_0 + \\beta_1 \\log(x_i (1+\\Delta)) + \\epsilon_i  \\\\\ny_i &\\rightarrow& \\beta_0 + \\beta_1 \\log(x_i) +  \\beta_1 \\log(1+\\Delta) + \\epsilon_i  \\\\\ny_i &\\rightarrow& y_i +  \\beta_1 \\log(1+\\Delta)\\\\\n&\\sim&\\\\\ny_i &\\rightarrow& y_i +  \\beta_1 \\Delta\n\\end{eqnarray*}\\]\n \nTáto aproximácia (preto to slovo približne) je založená na tom, že pre malé hodnoty \\(x\\) je funkcia \\(\\beta \\log(1+ x)\\) veľmi podobná funkcii \\(\\beta x\\) ako je zobrazené na tomto obrázku.\n\n# beta*log(1+x) is similar to beta*x for small x\n# or \n# log(1+x) is similar to x for small x\nx &lt;- seq(-0.5,1,0.01)\nbeta &lt;- 0.1\ny1 &lt;- beta*log(1+x)\ny2 &lt;- beta*x\nplot(x,y1,type=\"l\",col=\"red\")\nlines(x,y2,type=\"l\",col=\"blue\")\npoints(0,0)\n\n\n\n\n\n\n\n\n\n\n9.10.4 Log-log model\n\\[\\log(testScore_i) = \\beta_0 + \\beta_1 \\log(hoursLearned_i) + \\beta_2 g^A_i  + \\epsilon_i\\]\n\n#log - log\nltestScore &lt;- log(testScore)\nlmod_log_log &lt;- lm(ltestScore ~ gA + lhoursLearned)\nsummary(lmod_log_log)\n\n\nCall:\nlm(formula = ltestScore ~ gA + lhoursLearned)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-0.261596 -0.044612  0.005685  0.046149  0.205080 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    3.40421    0.09547  35.658  &lt; 2e-16 ***\ngA             0.24312    0.04571   5.319 5.65e-05 ***\nlhoursLearned  0.20212    0.02979   6.785 3.18e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.099 on 17 degrees of freedom\nMultiple R-squared:  0.7795,    Adjusted R-squared:  0.7536 \nF-statistic: 30.05 on 2 and 17 DF,  p-value: 2.624e-06\n\n#our model predicts that for a given group fixed an increase of \n# 1% in time spent learning is associated with an increase of \n# test score by approximately 0.2% points\n# (hence doubling the time learning ~ +20%points)\nx &lt;- seq(1,50,by=1)\nlx &lt;- log(seq(1,50,by=1))\ndfA &lt;- data.frame(gA= rep(1,50),lhoursLearned=lx)\npredA &lt;- exp(predict(lmod_log_log,dfA))\ndfB &lt;- data.frame(gA= rep(0,50),lhoursLearned=lx)\npredB &lt;- exp(predict(lmod_log_log,dfB))\nplot(hoursLearned, testScore, pch=group)\nlines(x,predA)\nlines(x,predB)\n\n\n\n\n\n\n\n\nInterpretácia: Náš model predikuje, že pre danú skupinu žiakov je nárast učenia o 1% asociovaný s navýšením skóre v priemerę o približne \\(0.2\\%\\) bodov. Takže zdvojnásobnenie je asociované s približne s 20% nárastom bodov na teste.\n\\[\\begin{eqnarray*}\n\\log(y_i) &=& \\beta_0 + \\beta_1 \\log(x_i) + \\epsilon_i \\\\\n&& x_i \\rightarrow x_i (1+\\Delta) \\\\\n&& \\implies \\\\\n\\log(y_i) &\\rightarrow& \\beta_0 + \\beta_1 \\log(x_i (1+\\Delta)) + \\epsilon_i  \\\\\n\\log(y_i) &\\rightarrow& \\beta_0 + \\beta_1 \\log(x_i)  + \\epsilon_i +  \\beta_1 \\log(1+\\Delta) \\\\\ny_i &\\rightarrow& e^{\\beta_0 + \\beta_1 \\log(x_i)  + \\epsilon_i +  \\beta_1 \\log(1+\\Delta)}\\\\\ny_i &\\rightarrow& e^{\\beta_0 + \\beta_1 \\log(x_i)  + \\epsilon_i} e^{\\beta_1 \\log(1+\\Delta)}\\\\\ny_i &\\rightarrow& y_i e^{\\beta_1 \\log(1+\\Delta)}\\\\\ny_i &\\rightarrow& y_i e^{ \\log\\big((1+\\Delta)^{\\beta}\\big)}\\\\\ny_i &\\rightarrow& y_i (1+\\Delta)^{\\beta}\\\\\n&\\sim&\\\\\ny_i &\\rightarrow& y_i (1+\\beta_1 \\Delta)\n\\end{eqnarray*}\\]\n \nTáto aproximácia (znovu tu máme slovo približne) je založená na tom, že pre malé hodnoty \\(x\\) je funkcia \\((1+ x)^{\\beta}\\) veľmi podobná funkcii \\(1+\\beta x\\) ako je zobrazené na tomto obrázku.\n\n# (1+x)^beta is similar to (1+beta*x) for small x\nx &lt;- seq(-0.5,1,0.01)\nbeta &lt;- 0.1\ny1 &lt;- (1+x)^beta\ny2 &lt;- 1+beta*x\nplot(x,y1,type=\"l\",col=\"red\")\nlines(x,y2,type=\"l\",col=\"blue\")\npoints(0,1)",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#zhrnutie",
    "href": "reg.html#zhrnutie",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.11 Zhrnutie",
    "text": "9.11 Zhrnutie\nV tejto kapitole sme sa pozreli na kvantifikovanie lineárnej súvzťažnosti medzi dvomi premennými. Na to sme použili nástroj lineárnej regresie. Skúmali sme užitočnosť tohoto modelu ako aj štatistické vlastnosti odhadov, ktoré tento model produkuje. Potom sme pomocou lineárneho modelu používali viacero prediktorov na modelovanie nejakej premennej, ktorá nás zaujíma.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "reg.html#cvičenia",
    "href": "reg.html#cvičenia",
    "title": "9  Úvod do lineárnej regresie",
    "section": "9.12 Cvičenia",
    "text": "9.12 Cvičenia\n\n\n\n\n\n\n\n\nCvičenie 9.1 Stiahnite si tieto dáta o veľkom Slovenskom antigénovom testovaní z roku 2020. Skúmajte aký je vzťah medzi percentom nakazených v prvom a v druhom kole testovania pre rôzne obce. Pozrite sa oddelene na malé, stredné a veľké obce.\n\n\nCvičenie 9.2 Mechanicky spočítajte ESS, RSS a ESS a overte ich vzťah. Potom zrátajte \\(R^2\\) a porovnajte s výsledkom v sumárnej tabuľke.\n\n\nCvičenie 9.3 Mechanicky zreprodukujte všetky výsledky (okrem adjusted \\(R^2\\)) zo sumárnej tabuľke. (Toto je užitočné cvičenie.)\n\n\nCvičenie 9.4 Stiahnite si dataset cars z knižnice dataset. Zobrazte závislosť medzi brzdnou dráhou a rýchlosťou (brzdná dráha bude vysveltovaná premenná) a popíšte ich vzťah aj pomocou jednoduchého lineárneho regresného modelu. Odhadnite koeficienty pomocou funkcie lm a interpretujte výsledky v sumárnej tabuľke.\n\n\nCvičenie 9.5 Z datasetu movies z knižnice ggplot2movies sa pozrite, či veľkosť rozpočtu vie predikovať priemerné hodnotenie. Na túto závislosť sa pozrite pre rôzne typy filmov a dáta spolu s regresnými priamkami vhodne zobrazte. Kriticky zhodnoťte model a výsledky opatrne interpretujte.\n\n\nCvičenie 9.6 Z datasetu USArrests porovnajte úrovne rôznych zločinov podľa toho, či žije v mestách veľa ľudí (\\(y\\) budú Murder,Assault,Rape a \\(x\\) bude UrbanPop ). Dáta zobrazte. Odhadnite koeficienty pomocou funkcie lm a interpretujte výsledky v sumárnej tabuľke.\n\n\nCvičenie 9.7 Z datasetu movies z knižnice ggplot2movies sa znovu pozrieme na predikciu priemerného hodnotenia. Pozrite sa, či typ filmu, rozpočet a dĺžka filmu vedia predikovať hodnotenie.\n\n\nCvičenie 9.8 Majme nasledovné dve skupiny študentov. Zaujíma nás, ako je počet hodín strávených učením asociovaný s dosiahnutým skóre v teste.\n\n# you measure how much they learned\nhoursLearned &lt;- c(2,40,33,11,20,12,13.5,10,11,30,\n                  6,22,45,20,11,22,40,29,47,9)\n# and how they performed on a test\ntestScore &lt;- c(44, 81, 95.5, 63.5, 71, 59, 59, 57, 60.5, 79,\n               45, 54, 50, 52, 50, 61, 68, 66, 64, 50)\n# and how they performed on a test\n\n#there are two different groups of students\ngroup &lt;- c(rep(\"A\",10), rep(\"B\",10))\n\nVyužitím lineárneho modelu uvažujte ako sú tieto dve skupiny rôzne: čo sa týka priemerného testovacieho skóre ako aj čo sa týka citlivosti skóre na učenie.",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Úvod do lineárnej regresie</span>"
    ]
  },
  {
    "objectID": "report.html",
    "href": "report.html",
    "title": "10  Komunikácia výsledkov",
    "section": "",
    "text": "10.1 R Markdown\nZhrňme si, čo všetko už doteraz vieme\nDo skladačky nám ešte chýba nejaký elegantný spôsob ako všetky tieto veci robiť a spísať ich do uceleného zmysluplného textu, ako tieto veci odkomunikovať. Môžeme separátne urobiť štatistickú analýzu a potom nakopírovať tabuľky a obrázky do textového editora, v ktorom to upravíme. Toto je však dosť prácne. Pridáte jeden riadok do dátovej tabuľky a celé to môžete prerobiť odznovu. Ak chcete zmeniť nejaký aspekt výberu dát na začiatku (napr. obmedzím sa na nejakú zaujímavú a relevantnú podvzorku dát), tak znova to všetko môžete prerobiť. Rko nám však ponúka veľmi elegantnú alternatívu. Môžeme totiž písať dokumenty (html, pdf, docx) a robiť analýzu naraz a to priamo v Rku. Skrátka si výrazne uľahčíme (pos slovensky) workflow. Sú aj ďalšie veci, ktoré Rko vie: napr. produkovať aplikácie alebo webovské stránky. Aj táto webstránka, na ktorú sa práve pozeráte je vyrobená priamo v RStudio.\nOtvoríme si nový RMarkdown dokument.\nUložíme ho (teraz som si uložil ako projekt.Rmd).\nTakto potom vyzerá.\nPo štuknutí na tlačítko Knit dostaneme takýto html dokument, ktorý je uložený v našom priečinku.\nSyntax je priamočiara a stačí zopár základných pravidiel a budeme vedieť väčšinu užitočného. Do textu pridávame chunk-y, to sú kusy kódu. Napríklad tu sú chunky pre zobrazenie sumáru datasetu cars ako aj chunk na zobrazenie obrázka. Symbol ## slúži na definovanie podkapitoly, vidíme ako pridať odkaz na webstránku ako aj ako zvýrazniť text.\nUžitočné vlastnosti chunkov sú tieto\nPre chunky s obrázkami sú to\nJe užitočné začať tu.",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Komunikácia výsledkov</span>"
    ]
  },
  {
    "objectID": "report.html#r-markdown",
    "href": "report.html#r-markdown",
    "title": "10  Komunikácia výsledkov",
    "section": "",
    "text": "echo - či sa zobrazí kus kódu alebo nie,\ncache - či sa má znovu vykonať kus kódu (niektoré časti môžu dlho trvať, tak ich spustíme len raz),\nwarning - vie skryť upozornenia,\neval - či sa kus kódu má vykonať,\nmessage - vie skryť správy,\nerror - ak nastavené na TRUE tak pokračuje v kompilácii aj keď narazí na chybu.\n\n\n\nfig.show - či sa zobrazí obrázok alebo nie,\nfig.cap - popisok obrázku,\nout.width - šírka obrázka,\nfig.asp - aspect ratio,\nfig.align - zarovnanie (center ak na stred).",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Komunikácia výsledkov</span>"
    ]
  },
  {
    "objectID": "report.html#cvičenia",
    "href": "report.html#cvičenia",
    "title": "10  Komunikácia výsledkov",
    "section": "10.2 Cvičenia",
    "text": "10.2 Cvičenia\n\nInštrukcie na úspešné skompilovanie:\n\nStiahnite si súbor do adresára v ktorom budete pracovať\nZatvorte RStudio a otvorte Rmd súbor priamo z tohoto adresára. Teraz Vám správne nastaví current directory, toto skontrolujete príkazom getwd()\nDo Vášho adresára nahrajte prázdny priečinok s menom tables. Do tohoto sa potom nahrá súbor s tabuľkami.\nNainštalujte si knižnice pacman a eatATA pomocou funkcie install.packages()\nStlačte tlačíko Knit\nDoplňte časti chýbajúceho kódu.\n\n\n\n\n\n\nCvičenie 10.1 Napíšte v RMarkdowne kratučký tutoriál, ktorý vysvetlí ako sa používa funkcia plot() v R. Postupne pridávajte komplikáciu za komplikáciou, aby bolo z kódu zreteľné, ako táto funkcia funguje.\n\n\nCvičenie 10.2 Napíšte v RMarkdowne prvé dve cvičenia z Vašej poslednej domácej úlohy.",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Komunikácia výsledkov</span>"
    ]
  },
  {
    "objectID": "cleaning.html",
    "href": "cleaning.html",
    "title": "4  Čistenie dát",
    "section": "",
    "text": "4.1 Knižnica Janitor\nČistenie dát (data cleaning, data cleansing) je proces, pri ktorom odstraňujeme alebo orpavujeme chyby a nezrovnalosti v dátach, aby boli použiteľné na analýzu. Cieľom je, aby údaje boli presné, úplné, konzistentné a mali zmysel pre ďalšie spracovanie.\nTypické problémy, ktoré sa pri čistení dát riešia:\nDobre vyčistené dáta sú základom každej analýzy. Ak dáta nie sú kvalitné, výsledky môžu byť zavádzajúce - od nespresných štatistík až po nespoľahlivé predikcie.\nTáto knižnica poskytuje jednoduché funkcie, ktoré nám pomôžu rýchlo pripraviť dáta na analýzu - napríklad vyčistiť názvy stĺpcov, nájsť duplicity alebo doplniť chýbajúce hodnoty.\n#install.packages(\"janitor\")\nlibrary(janitor)\n\n\nAttaching package: 'janitor'\n\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Čistenie dát</span>"
    ]
  },
  {
    "objectID": "cleaning.html#knižnica-janitor",
    "href": "cleaning.html#knižnica-janitor",
    "title": "4  Čistenie dát",
    "section": "",
    "text": "4.1.1 Čistenie názvov stĺpcov\nČastým problémom sú názvy stĺpcov s nesprávnym syntaxom napr. s medzerami, veľkými písmenami alebo špeciálnymi znakmi. Funkcia clean_names() všetky názvy prevedie do jednotného, konzistentného tvaru.\nFunkcia:\n\nUpraví písmená a oddeľovače na konzistentný formát (predvolený je snake_case, ale dostupné sú aj iné napr. camelCase)\nRieši špeciálne znaky a medzery, vrátane transiliterácie znakov\nPridáva čísla k duplicitným názvnom stĺpcov\nKonvertuje znaky % na percent a # na number, aby sa zachoval význam názvu.\nZachováva medzery (alebo ich absenciu) okolo čísel\n\nPríklad\n\ndata &lt;- as.data.frame(matrix(ncol = 6))\nnames(data) &lt;- c(\"First Name\", \"Age (Years)\", \"score %\", \"repeatVálue\", \"repeatValue\", \"\")\ndata %&gt;%\n  clean_names()\n\n  first_name age_years score_percent repeat_value repeat_value_2  x\n1         NA        NA            NA           NA             NA NA\n\n#&gt;   first_name age_years score_percent repeat_value repeat_value_2  x\n#&gt; 1         NA        NA            NA           NA             NA NA\n\nZákladné R by vytvorilo toto:\n\nmake.names(names(data))\n\n[1] \"First.Name\"  \"Age..Years.\" \"score..\"     \"repeatVálue\" \"repeatValue\"\n[6] \"X\"          \n\n#&gt; [1] \"First.Name\"  \"Age..Years.\" \"score..\"     \"repeatVálue\" \"repeatValue\" \"X\"\n\n\n\n4.1.2 Kontrola kompatibility stĺpcov\nPri práci s viacerými súbormi dát, ktoré by mali byť indetické sa často stane, že ich chceme načítať a zlúčiť na analýzu. Niekedy však funkcie ako napr. dplyr::bind_rows() alebo rbind() zlyhajúce, pretože stĺpce sa líšia názvom alebo typom.\nFunkcia compare_df_cols() umožňuje rýchlo porovnať viacero data.frameov. Prijíma názvy bez úvodzoviek alebo zoznam data.frameov a vracia zhrnutie ich porovnania. Môžeme zistiť:\n\nAký je typ jednotlivých stĺpcov\nKtoré stĺpce chýbajú alebo sú prítomné v rôznych objetoch.\nKde sa typy stĺpcov líšia.\n\nPríklad\n\ndf1 &lt;- data.frame(a = 1:2, b = c(\"big\", \"small\"))\ndf2 &lt;- data.frame(a = 10:12, b = c(\"medium\", \"small\", \"big\"), c = 0, stringsAsFactors = TRUE) # here, column b is a factor\ndf3 &lt;- df1 %&gt;%\n  dplyr::mutate(b = as.character(b))\n\n# Porovnanie všetkých stĺpcov\ncompare_df_cols(df1, df2, df3)\n\n  column_name       df1     df2       df3\n1           a   integer integer   integer\n2           b character  factor character\n3           c      &lt;NA&gt; numeric      &lt;NA&gt;\n\n#&gt;   column_name       df1     df2       df3\n#&gt; 1           a   integer integer   integer\n#&gt; 2           b character  factor character\n#&gt; 3           c      &lt;NA&gt; numeric      &lt;NA&gt;\n\n# Len rozdiely medzi stĺpcami\ncompare_df_cols(df1, df2, df3, return = \"mismatch\")\n\n  column_name       df1    df2       df3\n1           b character factor character\n\n#&gt;   column_name       df1    df2       df3\n#&gt; 1           b character factor character\n\n# Špecifikácia metódy spájania stĺpcov\ncompare_df_cols(df1, df2, df3, return = \"mismatch\", bind_method = \"rbind\") # default is dplyr::bind_rows\n\n  column_name       df1     df2       df3\n1           b character  factor character\n2           c      &lt;NA&gt; numeric      &lt;NA&gt;\n\n#&gt;   column_name       df1     df2       df3\n#&gt; 1           b character  factor character\n#&gt; 2           c      &lt;NA&gt; numeric      &lt;NA&gt;\n\nAk chceme jednoducho zistiť či je možné data.frames úspešne zlúčiť podľa stĺpcov, použijeme compare_df_cols_same(). Funkcia vráti TRUE alebo FALSE.\n\ncompare_df_cols_same(df1, df3)\n\n[1] TRUE\n\n#&gt; [1] TRUE\ncompare_df_cols_same(df2, df3)\n\n  column_name    ..1       ..2\n1           b factor character\n\n\n[1] FALSE\n\n#&gt;   column_name    ..1       ..2\n#&gt; 1           b factor character\n#&gt; [1] FALSE\n\n\n\n4.1.3 Kontrola duplikátov\nPri čistení dát je často potrebné overiť, či sa v dátach nenachádzajú neželané duplikáty. Funkcie v balíku janitor umožňujú rýchlo identifikovať a preskúmať duplicitné záznamy, čo je dôležité najmä v prípadoch, keď by sa mal každý unikátny záznam objaviť v dátach len raz.\nJednou z takýchto funkcií je get_dupes(). T8 vracia všetky záznamy, ktoré sú duplicitné a pridáva stĺpec s počtom opakovaní, aby bolo jednoduché odhaliť problematické záznamy.\n\nget_dupes(mtcars, wt, cyl) # or mtcars %&gt;% get_dupes(wt, cyl) if you prefer to pipe\n\n    wt cyl dupe_count  mpg  disp  hp drat  qsec vs am gear carb\n1 3.44   6          2 19.2 167.6 123 3.92 18.30  1  0    4    4\n2 3.44   6          2 17.8 167.6 123 3.92 18.90  1  0    4    4\n3 3.57   8          2 14.3 360.0 245 3.21 15.84  0  0    3    4\n4 3.57   8          2 15.0 301.0 335 3.54 14.60  0  1    5    8\n\n#&gt;     wt cyl dupe_count  mpg  disp  hp drat  qsec vs am gear carb\n#&gt; 1 3.44   6          2 19.2 167.6 123 3.92 18.30  1  0    4    4\n#&gt; 2 3.44   6          2 17.8 167.6 123 3.92 18.90  1  0    4    4\n#&gt; 3 3.57   8          2 14.3 360.0 245 3.21 15.84  0  0    3    4\n#&gt; 4 3.57   8          2 15.0 301.0 335 3.54 14.60  0  1    5    8\n\n\n\n4.1.4 Preskúmanie vzťahov medzi stĺpcami\nPri práci s dátami je užitočné vedieť, či niektoré stĺpce majú jedinečné vzťahy medzi sebou, napr. keď každý záznam v jednom stĺpci zodpovedá presne jednému záznamu v inom stĺpci. Funkcia get_one_to_one() zobazuje, ktoré stĺpce v dátovom rámci majú medzi sebou one-to-one vzťahy.\n\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nstarwars[1:4,] %&gt;%\n  get_one_to_one()\n\n[[1]]\n[1] \"name\"       \"height\"     \"mass\"       \"skin_color\" \"birth_year\"\n[6] \"films\"     \n\n[[2]]\n[1] \"hair_color\" \"starships\" \n\n[[3]]\n[1] \"sex\"     \"species\"\n\n#&gt; [[1]]\n#&gt; [1] \"name\"       \"height\"     \"mass\"       \"skin_color\" \"birth_year\"\n#&gt; [6] \"films\"     \n#&gt; \n#&gt; [[2]]\n#&gt; [1] \"hair_color\" \"starships\" \n#&gt; \n#&gt; [[3]]\n#&gt; [1] \"sex\"     \"species\"\n\n\n\n4.1.5 Odstraňovanie prázdnych riadkov a stĺpcov\nPri čistení dát z Excelu alebo iných zdrojov sa často stretneme s prázdnymi riadkami a stĺpcami, ktoré po načítaní do R nemajú žiadne hodnoty. Takéto riadky a stĺpce môžu zbytočne komplikovať analýzu a vizualizácie.\nNa odstránenie prázdnych riadkov a stĺpcov môžeme použiť funkciu remove_empty().\n\nq &lt;- data.frame(v1 = c(1, NA, 3),\n                v2 = c(NA, NA, NA),\n                v3 = c(\"a\", NA, \"b\"))\nq %&gt;%\n  remove_empty(c(\"rows\", \"cols\"))\n\n  v1 v3\n1  1  a\n3  3  b\n\n#&gt;   v1 v3\n#&gt; 1  1  a\n#&gt; 3  3  b\n\n\n\n4.1.6 Odstraňovanie stĺpcov s konštantnými hodnotami\nV niektorých dátových súboroch sa môžeme stretnúť so stĺpcami, ktoré odstraňujú len jednu hodnotu vo všetkých riadkoch. Takéto stĺpce zvyčajne neposkytujú žiadnu informatívnu hodnotu a môžu zbytočne zaťažovať analýzu.\nNa ich odstránenie môžeme využiť funkciu remove_constant(). Táto funkcia tiež umožňuje nastaviť, či sa majú považovať hodnoty NA za odlišné od konštanty prostredníctvom parametra na.rm. Funkcia pracuje nielen s data.frames, ale aj s maticami.\n\na &lt;- data.frame(good = 1:3, boring = \"the same\")\na %&gt;% remove_constant()\n\n  good\n1    1\n2    2\n3    3\n\n#&gt;   good\n#&gt; 1    1\n#&gt; 2    2\n#&gt; 3    3\n\n\n\n4.1.7 Zaokrúhľovanie čísel\nV R sa štandartne používa tzv. “bankers rounding”, čo znamená, že polovičné hodnoty (napr. 2.5, 3.5) sa zaokrúhľujú na najbližšie párne číslo. V praxi to môže byť mätúce, keď očakávame, že 2.5 sa zaokrúhli nahor na 3.\nFunkcia round_half_up() rieši tento problém tým, že všetky polovičné hodnoty zaokrúhľuje nahor - presne podľa bežného očakávania.\n\nnums &lt;- c(2.5, 3.5)\nround(nums)\n\n[1] 2 4\n\n#&gt; [1] 2 4\nround_half_up(nums)\n\n[1] 3 4\n\n#&gt; [1] 3 4\n\n\n\n4.1.8 Konverzia čísel z Excelu na dátumy\nPri práci s dátami z Excelu sa často stretávame s číslami, ktoré predstavujú dátumy - napríklad hodnota 42223 by mala byť dátumom. Funkcia excel_numeric_to_date() umožňuje tieto Excel serial numbers previesť na objekt triedy Date alebo POSIXlt, pričom podporuje rôzne systémy kódovania dátumov v Exceli a zachováva aj časové zložky ak sú obsiahnuté v zlomkoch dňa.\n\nexcel_numeric_to_date(41103)\n\n[1] \"2012-07-13\"\n\n#&gt; [1] \"2012-07-13\"\nexcel_numeric_to_date(41103.01) # ignores decimal places, returns Date object\n\n[1] \"2012-07-13\"\n\n#&gt; [1] \"2012-07-13\"\nexcel_numeric_to_date(41103.01, include_time = TRUE) # returns POSIXlt object\n\n[1] \"2012-07-13 00:14:24 CEST\"\n\n#&gt; [1] \"2012-07-13 00:14:24 EDT\"\nexcel_numeric_to_date(41103.01, date_system = \"mac pre-2011\")\n\n[1] \"2016-07-14\"\n\n#&gt; [1] \"2016-07-14\"\n\nTakáto konverzia je užitočná, keď načítavame Excel súbory do R a chceme pracovať s dátumami priamo ako s dátovými typmi, namiesto manuálneho prevodu alebo zložitej úpravy čísel.\n\n\n4.1.9 Konverzia zmiešaných dátumov a časov na dátum\nFunkcie convert_to_date() a covert_to_datetime() nadväzujú na excel_numeric_to_date() a umožňujú robustnejšie spracovanie zmiešaných vstupov - napr. kombinácie textových dátumov a Excel serial numbers. Sú veľmi užitočné, keď načítavame viacero tabuliek, ktoré by mali mať rovnaké formáty stĺpcov, ale v praxi sa líšia.\n\nconvert_to_date(c(\"2020-02-29\", \"40000.1\"))\n\n[1] \"2020-02-29\" \"2009-07-06\"\n\n#&gt; [1] \"2020-02-29\" \"2009-07-06\"\n\nconvert_to_datetime(44874.5)\n\n[1] \"2022-11-09 12:00:00 UTC\"\n\n#&gt; [1] \"2022-11-09 12:00:00 UTC\"",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Čistenie dát</span>"
    ]
  },
  {
    "objectID": "cleaning.html#cvičenia",
    "href": "cleaning.html#cvičenia",
    "title": "4  Čistenie dát",
    "section": "4.2 Cvičenia",
    "text": "4.2 Cvičenia\n\nOčistime dáta v Titanic datasete, ktorý obsahuje informácie o pasažiaroch Titanicu. Tento dataset je verejne dostupný a využívaný napr. na riešenie klasifikačných problémov. Tento dataset obsahuje nejednotné názvy stĺpcov, napr. “PassengerId a”Name”, ktoré je potrebné upraviť.\n\nlibrary(janitor)\n\nurl &lt;- \"https://raw.githubusercontent.com/datasciencedojo/datasets/master/titanic.csv\"\ndf &lt;- read.csv(url)\n\nhead(df)\n\n  PassengerId Survived Pclass\n1           1        0      3\n2           2        1      1\n3           3        1      3\n4           4        1      1\n5           5        0      3\n6           6        0      3\n                                                 Name    Sex Age SibSp Parch\n1                             Braund, Mr. Owen Harris   male  22     1     0\n2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female  38     1     0\n3                              Heikkinen, Miss. Laina female  26     0     0\n4        Futrelle, Mrs. Jacques Heath (Lily May Peel) female  35     1     0\n5                            Allen, Mr. William Henry   male  35     0     0\n6                                    Moran, Mr. James   male  NA     0     0\n            Ticket    Fare Cabin Embarked\n1        A/5 21171  7.2500              S\n2         PC 17599 71.2833   C85        C\n3 STON/O2. 3101282  7.9250              S\n4           113803 53.1000  C123        S\n5           373450  8.0500              S\n6           330877  8.4583              Q",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Čistenie dát</span>"
    ]
  },
  {
    "objectID": "random.html#domáca-úloha-1",
    "href": "random.html#domáca-úloha-1",
    "title": "3  Náhodné čísla a simulácie",
    "section": "3.8 Domáca úloha 1",
    "text": "3.8 Domáca úloha 1\nProsím odovzdať do 12.10.2025 19:59 cez formulár (tento Vám príde emailom).\nV riešeniach používajte prosím plnovýznamové vety a nahrávajte riešenia v jednom pdf súbore nazvanom podľa Vašich priezvísk v tvare DU1_priezvisko1_priezvisko2.pdf (napríklad DU1_Kovacova_Zelinka.pdf).\n\nMáme dáta o\ntop 50 najpredávanejších knihách\nza roky 2009-2019 na Amazone.\n\nVykreslite si vzťah medzi cenou a hodnotením. Oplatí sa kúpiť drahšie knižky?\nNájdite 2 najvýraznejšie iné pozorovania na grafe a zistite, ktoré knihy to sú a prečo sú výrazne iné. Vykreslite graf bez týchto kníh.\nVezmite si knihy s viac ako 10 000 recenziami, s cenou medzi 10 a 20 dolárov, obsahujúce fikciu.\n\nKoľko z nich bolo bestsellerom práve v roku 2018?\n\nVypíšte názvy 10 najlepšie hodnotených a 10 najhoršie hodnotených kníh s viac ako 15 000 recenziami, ktoré stoja menej ako 15 dolárov. Vysvetlite, prečo sa niektoré knihy opakujú.\nZistite, aká je priemerná cena za knihy J.K. Rowlingovej, ktoré sa nachádzajú v tomto rebríčku.\n\nKoľko majú tieto knihy v priemere recenzií?\nBONUS: Pomocou cyklu alebo funkcie zistite, v ktorých rokoch prevláda fikcia medzi 20 najlepšie hodnotenými knihami daného roku.\nVysvetlite, ako postupujete, aby sme tam mali každú knihu len raz.\nV roku, kedy bol pomer fikcie najväčší, vypíšte pre top 20 kníh názov, autora a to, či je to fikcia.\n\n\nZ vrecúška vyťahujete guličky s číslami od 1 po 20 bez vracania.\nSimuláciou zistite, či je pravdepodobnejšie, že na 3 vytiahnutých guličkách je dokopy súčet 20\nalebo na 5 guličkách je súčet 35.\n\n\nPomocou počítača vypočítajte\n\\[\\begin{equation*}\n\n\\sum_{n=5}^{100}\\frac{n}{(n+1)(n-1)}.\n\n\\end{equation*}\\]\nVypočítajte aj nekonečnú sumu, detailne opíšte Vaše riešenie\n\\[\\begin{equation*}\n\n\\sum_{n=2}^{\\infty}\\frac{4}{(n+1)(n-1)}.\n\n\\end{equation*}\\]\n\n\n\n\n\nPomocou simulácie vypočítajte pravdepodobnosť, že ak palicu náhodne rozlomím na 4 kusy, tak z týchto kúskov budem vedieť poskladať stvoruholník.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nR súbor z cvičení z 29.9.2025",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Náhodné čísla a simulácie</span>"
    ]
  }
]